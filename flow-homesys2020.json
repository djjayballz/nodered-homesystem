[{"id":"a73e6298.8dcc88","type":"tab","label":"RPi-Control","disabled":false,"info":"überwacht die RPi-Funktionen (Temperatur, Speicherplatz, etc.)\nUI-& Telegram-Befehle für Reboot, etc."},{"id":"57b8c30b.db8ba4","type":"tab","label":"Telegram-Bot","disabled":false,"info":""},{"id":"f5f1b719.8a699","type":"tab","label":"MQTT-Sensoren","disabled":false,"info":"Hier werden die Sensoren via MQTT ausgelesen.\nDie Daten werden jede Minute geschickt.\nEs wäre sinnvoller, die Datenlast durch dein Limiter auf z.B. alle 5 Minuten zu setzen."},{"id":"1f0f525d.8043ce","type":"tab","label":"Wetter","disabled":false,"info":"Hier wird das aktuelle Wetter für Greifswald ausgelesen.\nDesweitern Regenwarnung morgens für den jeweiligen Tag und den nächsten.\n\nNoch zu tun:\n    - Dezimalzeichen mit , austauschen\n    - Regenmenge payload.rain [mm] aufnehmen\n    - Windrichtung (Grad) in NOSW einteilen\n        http://snowfence.umn.edu/Components/winddirectionanddegreeswithouttable3.htm\n"},{"id":"9d2b39e8.bae118","type":"tab","label":"Lüften","disabled":false,"info":"Hier soll Logik entstehen, die einem signalisiert,\ndass gelüftet werden sollte und auch kann.\n\nAufgaben:\n- Vergleich Außenfeuchtigkeit + Temperatur zu Innen\n- Anzeige in Dashboard: Rot + Grüne Lampe"},{"id":"8f4a1c25.fc2518","type":"tab","label":"Kippen-multicounter","disabled":false,"info":"hier noch einfügen:\n\nmulti-user-interface via userId "},{"id":"dced8749.bff1b8","type":"tab","label":"Counter","disabled":false,"info":""},{"id":"c570f763.a864f","type":"tab","label":"Körpertemperaturmesser","disabled":true,"info":"Körpertemp soll täglich oder alle zwei Tage abgefragt via Telegram und gespeichert und geplottet werden.\n\nI. Errinnerung + Plotten\nII. Datenbank anlegen"},{"id":"343e6461.3afb5c","type":"tab","label":"Watering-Logik","disabled":true,"info":"Logik via MQTT für Wasserstand, Bodentrockenheit und Wetter-Abfrage"},{"id":"201f6d0a.e307ca","type":"tab","label":"Chatbot_advanced","disabled":true,"info":""},{"id":"3cf84bba.5bc2d4","type":"tab","label":"Data to Google-Spreadsheet","disabled":true,"info":""},{"id":"3eae6dd9.5cba02","type":"tab","label":"Langzeit-Graph","disabled":true,"info":""},{"id":"9f8950c8.4c9fc","type":"tab","label":"Push to Repo","disabled":true,"info":""},{"id":"352c0898.281f8","type":"tab","label":"Wann regnet es wieder?","disabled":true,"info":"https://flows.nodered.org/flow/d19047e54e9c7b27086f"},{"id":"33893690.3e3e02","type":"tab","label":"Aurora-Sichtbarkeit","disabled":true,"info":"https://flows.nodered.org/flow/59b1a953dbf96dba3db9"},{"id":"4a21bbc6.fc693c","type":"tab","label":"Frostalarm","disabled":true,"info":"https://flows.nodered.org/flow/3b6a81cfb8d50bf33a5f"},{"id":"5c07913f.b8c258","type":"subflow","name":"Wetter-morgen","info":"Der 5-Tage-Wetter-Bericht soll morgens um 6:00 Uhr\nabgerufen werden.\nDann nur auf das morgige Wetter gekürzt und nach\nRegen (Rain) gefiltert werden.\n\nTime:\n0: 06:00 Uhr - heute\n1: 09:00 Uhr\n2: 12:00 Uhr\n3: 15:00 Uhr\n4: 18:00 Uhr\n5: 21:00 Uhr\n6: 24:00 Uhr - morgen --> Array 6 bis 13\n7: 03:00 Uhr\n8: 06:00 Uhr\n9: 09:00 Uhr\n10: 12:00 Uhr\n11: 15:00 Uhr\n12: 18:00 Uhr\n13: 21:00 Uhr","in":[{"x":60,"y":240,"wires":[{"id":"b2f0daf6.f9e1d"},{"id":"c1b00565.4cf548"},{"id":"9b90570e.075ff"},{"id":"dd701fc.0e9c8e"},{"id":"f7d9e887.6d77f"},{"id":"eef96931.ecc55"},{"id":"d2c9dbf6.a4bfd8"},{"id":"3ef541df.668c06"}]}],"out":[{"x":400,"y":240,"wires":[{"id":"b2f0daf6.f9e1d","port":0},{"id":"c1b00565.4cf548","port":0},{"id":"9b90570e.075ff","port":0},{"id":"dd701fc.0e9c8e","port":0},{"id":"f7d9e887.6d77f","port":0},{"id":"eef96931.ecc55","port":0},{"id":"d2c9dbf6.a4bfd8","port":0},{"id":"3ef541df.668c06","port":0}]},{"x":840,"y":240,"wires":[{"id":"706a7dae.27c9f4","port":0},{"id":"61a1657d.f32d94","port":0},{"id":"99a01bf1.e1ccc","port":0},{"id":"778fc027.982468","port":0},{"id":"d646a075.47617","port":0},{"id":"4e44e971.d4a4b","port":0},{"id":"1fa662c2.c0d20d","port":0},{"id":"5a6c28ec.1beb8","port":0}]}],"outputLabels":["Regen","Datum+Zeit"]},{"id":"f3ebc49a.29a038","type":"subflow","name":"Bewässerung abfragen","info":"","category":"","in":[{"x":280,"y":140,"wires":[{"id":"d81f4744.2f7b1"}]}],"out":[{"x":2180,"y":40,"wires":[{"id":"59719fec.b6c66","port":0},{"id":"49b98848.36685","port":0}]},{"x":1800,"y":180,"wires":[{"id":"975ec679.54a43","port":0}]}]},{"id":"eac9d098.6aa758","type":"subflow","name":"Temperatur abfragen","info":"","category":"","in":[{"x":60,"y":300,"wires":[{"id":"3c42134a.bb2ca4"}]}],"out":[{"x":900,"y":300,"wires":[{"id":"4ecdc066.cd19b","port":0}]}]},{"id":"2a05f905.b219ae","type":"subflow","name":"Lüften-Logik","info":"","category":"","in":[{"x":60,"y":380,"wires":[{"id":"ed115edb.3a34d"}]}],"out":[{"x":1420,"y":340,"wires":[{"id":"7f62a16b.37ab1","port":0}]},{"x":1420,"y":460,"wires":[{"id":"822248af.fb19d8","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"892e0e97.ba689","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#9d263e","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":false},"page-titlebar-backgroundColor":{"value":"#9d263e","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#d13f5c","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#9d263e","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":10,"gy":10,"cx":8,"cy":4,"px":0,"py":0}}},{"id":"ee60ef80.af7e8","type":"ui_tab","z":"","name":"RPi Control","icon":"dashboard","order":4},{"id":"2e076917.42ecae","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":1},{"id":"87039188.2f2898","type":"ui_tab","z":"","name":"Garten","icon":"dashboard","order":3},{"id":"b97c557e.0fc828","type":"ui_tab","z":"","name":"Counter","icon":"dashboard"},{"id":"7121ca76.e3d444","type":"ui_tab","z":"","name":"Langzeit","icon":"dashboard"},{"id":"86298762.6fed08","type":"ui_tab","z":"","name":"RPi Control","icon":"dashboard","order":4},{"id":"6bfb0f18.6e21e","type":"ui_tab","z":"","name":"Home","icon":"dashboard","order":1},{"id":"f4a0430c.3ab7f","type":"ui_tab","z":"","name":"Garten","icon":"dashboard","order":3},{"id":"f75b4e29.89a3e8","type":"ui_tab","z":"","name":"Counter","icon":"dashboard"},{"id":"62dc1df2.8a97a4","type":"ui_tab","z":"","name":"Langzeit","icon":"dashboard"},{"id":"cd0c507e.ece488","type":"ui_group","z":0,"name":"Schlafzimmer","tab":"a1cd27e6.0b6d1","order":5,"disp":true,"width":"6","collapse":true},{"id":"19c026cc.d12109","type":"ui_group","z":"","name":"Wohnzimmer","tab":"a1cd27e6.0b6d1","order":2,"disp":true,"width":"6","collapse":true},{"id":"8d130f13.d84e68","type":"ui_group","z":"","d":true,"name":"KellerHGW","tab":"a1cd27e6.0b6d1","order":6,"disp":true,"width":"6","collapse":true},{"id":"18b81b1b.70b245","type":"ui_group","z":"","name":"Küche","tab":"a1cd27e6.0b6d1","order":1,"disp":true,"width":"6","collapse":true},{"id":"137ca620.959b52","type":"ui_group","z":0,"name":"Bad","tab":"a1cd27e6.0b6d1","order":3,"disp":true,"width":"6","collapse":true},{"id":"86b1550c.1f3dd8","type":"ui_group","z":0,"name":"Außentemperatur","tab":"9552faa1.c81b9","order":1,"disp":true,"width":"6","collapse":true},{"id":"6271eae2.2d3f34","type":"ui_group","z":"","name":"Boden","tab":"9552faa1.c81b9","order":2,"disp":true,"width":"6","collapse":true},{"id":"9552faa1.c81b9","type":"ui_tab","z":"","d":true,"name":"Garten","icon":"nature_people","order":2,"disabled":false,"hidden":false},{"id":"a1cd27e6.0b6d1","type":"ui_tab","z":"","name":"Home","icon":"home","order":1},{"id":"7aadcf9c.6f8078","type":"persist-store","z":"","filename":"kippen_Apirl18_persistance.json","interval":"60"},{"id":"ef23a546.0acb08","type":"persist-store","z":"","filename":"bier_April18_persistance.json","interval":"60"},{"id":"c46b3287.939958","type":"ui_group","z":0,"name":"Kippencounter","tab":"207e9609.60054a","order":1,"disp":true,"width":"6","collapse":false},{"id":"a977cccc.45c42","type":"ui_group","z":0,"name":"Biercounter","tab":"207e9609.60054a","order":2,"disp":true,"width":"6","collapse":true},{"id":"50c9e5a0.afe2bc","type":"ui_group","z":"","name":"Text-Input read out","tab":"c2273f63.a4d2e","order":3,"disp":true,"width":"12","collapse":true},{"id":"207e9609.60054a","type":"ui_tab","z":"","name":"Counter","icon":"smoke_rooms","order":5},{"id":"c2273f63.a4d2e","type":"ui_tab","z":"","d":true,"name":"Langzeit","icon":"timelapse","order":4,"disabled":false,"hidden":false},{"id":"ee52b112.146558","type":"persist-store","z":"","filename":"persistance_langzeit-temp.json","interval":"60"},{"id":"8b7b941b.cae75","type":"persist-store","z":"","filename":"persistance_bodentemp.json","interval":"60"},{"id":"18b96a32.586906","type":"ui_group","z":"","name":"Außentemperatur","tab":"c2273f63.a4d2e","order":1,"disp":true,"width":"12","collapse":true},{"id":"7d900e40.6edd58","type":"ui_group","z":0,"name":"Bodentemperatur","tab":"c2273f63.a4d2e","order":2,"disp":true,"width":"6","collapse":false},{"id":"a08a3d24.93c3d","type":"chatbot-telegram-node","z":"","botname":"FMS63_Bot","usernames":"173173012","providerToken":"","polling":"1000","store":"","log":"","debug":false,"webHook":"","connectMode":"polling"},{"id":"230b31d5.91ae6e","type":"ui_group","z":"","name":"Wetter in Lübeck","tab":"7993acf.a1913d4","order":1,"disp":true,"width":"6","collapse":true},{"id":"34be1ad7.0974ae","type":"persist-store","z":"","filename":"wetter-jetzt-persistance.json","interval":"60"},{"id":"f52cc8f2.2a5f98","type":"ui_group","z":"","name":"Actions","tab":"f88aa08f.7c24f","order":4,"disp":true,"width":"6","collapse":false},{"id":"237bac70.b52b4c","type":"ui_group","z":"","name":"Prozessor","tab":"f88aa08f.7c24f","order":1,"disp":false,"width":"6","collapse":false},{"id":"c37fe1e0.d9e61","type":"ui_group","z":"","name":"Speicher","tab":"f88aa08f.7c24f","order":2,"disp":false,"width":"6","collapse":false},{"id":"f88aa08f.7c24f","type":"ui_tab","z":"","name":"RPi Control","icon":"settings_applications","order":6},{"id":"25e6b1aa.2c2116","type":"ui_group","z":"","name":"Graphen aus OpenWeatherMap","tab":"7993acf.a1913d4","order":2,"disp":true,"width":"6","collapse":true},{"id":"7993acf.a1913d4","type":"ui_tab","z":"","name":"Wetter","icon":"cloud","order":3},{"id":"207ee41.8134b9c","type":"ui_group","z":"","name":"Wind & Luftdruck","tab":"7993acf.a1913d4","order":3,"disp":true,"width":"6","collapse":false},{"id":"910e0d1c.ac167","type":"ui_group","z":"","name":"Tagesverschiebung","tab":"7993acf.a1913d4","order":4,"disp":true,"width":"6","collapse":false},{"id":"759eee4b.556d7","type":"persist-store","z":"","filename":"sunrise.json","interval":"60"},{"id":"e147afdd.1b40d","type":"persist-store","z":"","filename":"sunset_persist.json","interval":"60"},{"id":"c144a1c.f64b76","type":"ui_group","z":"","name":"Pump system","tab":"9552faa1.c81b9","order":4,"disp":true,"width":"6","collapse":true},{"id":"e326dded.a1852","type":"ui_spacer","name":"spacer","group":"c144a1c.f64b76","order":3,"width":"6","height":1},{"id":"ca579866.668a8","type":"persist-store","z":"","filename":"wetter-morgen-persistance.json","interval":"60"},{"id":"fbfdf60d.5c3958","type":"ui_spacer","name":"spacer","group":"6271eae2.2d3f34","order":5,"width":"6","height":1},{"id":"280a4449.04f21c","type":"ui_spacer","name":"spacer","group":"86b1550c.1f3dd8","order":5,"width":"6","height":1},{"id":"339bd694.daabda","type":"ui_spacer","name":"spacer","group":"c144a1c.f64b76","order":8,"width":"6","height":1},{"id":"2ff68391.9d889c","type":"ui_group","z":"","name":"Keller","tab":"a1cd27e6.0b6d1","order":4,"disp":true,"width":"6","collapse":true},{"id":"79da91f1.62655","type":"ui_tab","z":"","name":"TEMP","icon":"dashboard","order":25},{"id":"d91657b7.4e111","type":"ui_group","z":"","name":"Schlafzimmer 2","tab":"a1cd27e6.0b6d1","order":7,"disp":true,"width":"6","collapse":false},{"id":"155f41a1.44729e","type":"ui_group","z":"","name":"Schlafzimmer 3","tab":"a1cd27e6.0b6d1","order":8,"disp":true,"width":"6","collapse":false},{"id":"99a4f592.3a9cf8","type":"persist-store","z":"","filename":"koerper-temp.json","interval":"60"},{"id":"13c257eb.aa9228","type":"persist-store","z":"","filename":"kippen-laura.json","interval":"60"},{"id":"d581c716.9df25","type":"telegram bot","z":"","botname":"kippen_bot","usernames":"","chatids":"988343062","baseapiurl":"","updatemode":"polling","pollinterval":"300","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"sslterminated":false,"verboselogging":true},{"id":"beb6c874.52d368","type":"telegram bot","z":"","botname":"multikippenbot","usernames":"","chatids":"173173012","baseapiurl":"","updatemode":"polling","pollinterval":"500","usesocks":false,"sockshost":"","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"sslterminated":false,"verboselogging":true},{"id":"929706f8.89bc38","type":"mqtt-broker","z":"","name":"","broker":"test.mosquitto.org","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"7568a405.c7c94c","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"dcd0ec61.5a5e6","type":"chatbot-context-store","z":"","name":"home-pi-telegrambot-context","contextStorage":"plain-file","contextParams":"{ \"path\": \"/telegrambot/context\" }"},{"id":"5f36f47d.6537e4","type":"chatbot-telegram-receive","z":"57b8c30b.db8ba4","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","x":170,"y":100,"wires":[["f5e58460.653dd8","76291b5a.5cc16c","f5b36bfa.9f7e08","a56f4a9c.e5d65","cb6debeb.55f178","854a6e54.7465","f8a759b2.db20d8","e8738e01.13b09","1d18e18e.4ace5e","17f7e5ac.45ba22","776b6e7b.3f0eb"]]},{"id":"30159a70.1b72be","type":"chatbot-telegram-send","z":"57b8c30b.db8ba4","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","track":false,"passThrough":false,"outputs":0,"x":1805,"y":120,"wires":[]},{"id":"f5e58460.653dd8","type":"chatbot-message","z":"57b8c30b.db8ba4","name":"Miau","message":[{"message":"Miau"}],"language":"","x":1010,"y":60,"wires":[["30159a70.1b72be"]]},{"id":"99de044d.a0459","type":"comment","z":"57b8c30b.db8ba4","name":"Auto-Reply","info":"","x":1020,"y":20,"wires":[]},{"id":"76291b5a.5cc16c","type":"chatbot-command","z":"57b8c30b.db8ba4","name":"","command":"/keller","x":170,"y":680,"wires":[["6f71fba1.fb0944"]]},{"id":"f5b36bfa.9f7e08","type":"chatbot-command","z":"57b8c30b.db8ba4","name":"","command":"/garten","x":180,"y":501.25,"wires":[["f551a8b1.137d8","6462168.de51e68","ba29832b.bd1e18"]],"outputLabels":["/wz"]},{"id":"1b827898.20f23f","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Bodentemperatur beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":500,"wires":[["41d616e6.9b9ec8"]]},{"id":"41d616e6.9b9ec8","type":"chatbot-conversation","z":"57b8c30b.db8ba4","name":"","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"173173012","userId":"","transport":"telegram","store":"","x":1880,"y":860,"wires":[["30159a70.1b72be"]]},{"id":"62e59fec.5463e","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Bodentemperatur","topic":"/keller/temp/28ff8c388a1635a","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":140,"y":1720,"wires":[["c9db1470.945a58"]]},{"id":"f551a8b1.137d8","type":"change","z":"57b8c30b.db8ba4","name":"get flow.Bodentemperatur","rules":[{"t":"set","p":"payload","pt":"msg","to":"Bodentemperatur","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":500,"wires":[["1b827898.20f23f","57566e09.0b5cd"]]},{"id":"c3eb59b1.47c65","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Bodentemperatur","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1720,"wires":[[]]},{"id":"f4d5e36f.648b88","type":"comment","z":"57b8c30b.db8ba4","name":"Commands","info":"","x":155,"y":400,"wires":[]},{"id":"6a1e7efd.6cd3d8","type":"comment","z":"57b8c30b.db8ba4","name":"Input für Commands","info":"","x":110,"y":1660,"wires":[]},{"id":"e88fd7ef.e4523","type":"comment","z":"57b8c30b.db8ba4","name":"Textausgabe des Commands","info":"","x":1200,"y":400,"wires":[]},{"id":"ef1d64cc.6fdba","type":"comment","z":"57b8c30b.db8ba4","name":"Auswahl des Inputs","info":"","x":850,"y":400,"wires":[]},{"id":"dd1707c.613ba78","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Außen","topic":"/keller/temp/28ffca9721747","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":110,"y":1780,"wires":[["2a3449ed.666aae"]]},{"id":"d6935e9b.668358","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Außen","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":530,"y":1780,"wires":[[]]},{"id":"6462168.de51e68","type":"change","z":"57b8c30b.db8ba4","name":"get flow.Außentemperatur","rules":[{"t":"set","p":"payload","pt":"msg","to":"Außen","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":540,"wires":[["dfff895c.332a58","f350a310.565be"]]},{"id":"dfff895c.332a58","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Außentemperatur beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":540,"wires":[["41d616e6.9b9ec8"]]},{"id":"a56f4a9c.e5d65","type":"chatbot-command","z":"57b8c30b.db8ba4","name":"","command":"/wz","x":170,"y":740,"wires":[["adf2ad4.0c346d","b5445a70.28f038"]]},{"id":"6f71fba1.fb0944","type":"change","z":"57b8c30b.db8ba4","name":"get flow.Keller","rules":[{"t":"set","p":"payload","pt":"msg","to":"Keller","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":840,"y":680,"wires":[["ff5c250a.bb7318","20ec1f3b.eac0f","8e6c9f71.19eab"]]},{"id":"ff5c250a.bb7318","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur im Keller beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":680,"wires":[["41d616e6.9b9ec8"]]},{"id":"c180e935.72e24","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Keller","topic":"/keller/temp/28ff84ed6117326","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":110,"y":1840,"wires":[["4ab5b5cf.ffca7c"]]},{"id":"b79de10f.3c00d","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Keller","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":1840,"wires":[[]]},{"id":"adf2ad4.0c346d","type":"change","z":"57b8c30b.db8ba4","name":"get temp flow.Wohnzimmer","rules":[{"t":"set","p":"payload","pt":"msg","to":"Wohnzimmer/Temp","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":740,"wires":[["ea87bf6d.770198","f587c36.c42794"]]},{"id":"ea87bf6d.770198","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur im Wohnzimmer beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":740,"wires":[["41d616e6.9b9ec8"]]},{"id":"cb6debeb.55f178","type":"chatbot-command","z":"57b8c30b.db8ba4","name":"","command":"/status","x":170,"y":1300,"wires":[["9dccf91c.9f284","bf62816f.17f948","137b5e1f.b0689a","7c55c6fc.f65c3","5a184fe2.aa31a","5e66acd4.0e4acc","d93eaeae.232f7","dff46e7c.697bc8","70ac720a.d44e9c","53369d2b.5da6fc","da672c33.a8183"]]},{"id":"4ab5b5cf.ffca7c","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1840,"wires":[["b79de10f.3c00d"]]},{"id":"2a3449ed.666aae","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1780,"wires":[["d6935e9b.668358"]]},{"id":"c9db1470.945a58","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1720,"wires":[["c3eb59b1.47c65"]]},{"id":"98455ac1.9922c8","type":"chatbot-message","z":"57b8c30b.db8ba4","name":"schnurrr","message":[{"message":"*schnurrrrr*"}],"x":1020,"y":120,"wires":[["30159a70.1b72be"]]},{"id":"854a6e54.7465","type":"chatbot-command","z":"57b8c30b.db8ba4","name":"","command":"/streicheln","x":510,"y":120,"wires":[["98455ac1.9922c8"]]},{"id":"cf2d748c.bdaf88","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Wohnzimmer/Temp","topic":"/wz/temp","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":150,"y":1920,"wires":[["d796ff36.511778"]]},{"id":"5f10d51e.2ec05c","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Wohnzimmer/Humid","topic":"/wz/humid","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":150,"y":1960,"wires":[["882e549e.6af538"]]},{"id":"ca5b21ed.60997","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Küche/Temp","topic":"/kueche/temp","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":130,"y":2020,"wires":[["9f7098f.80cbde8"]]},{"id":"3ced40b7.2ddd58","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Bad/Temp","topic":"/bad/temp","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":120,"y":2120,"wires":[["5cc67d93.aa589c"]]},{"id":"68c1cc1e.4691d4","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Bad/Humid","topic":"/bad/humid","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":120,"y":2160,"wires":[["29b3f27f.a24b16"]]},{"id":"cfd9fd6c.56a3d8","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Schlafzimmer/Temp","topic":"/sz/temp","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":150,"y":2240,"wires":[["5b8dc7e9.49226"]]},{"id":"79b6f11a.04fd58","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Schlafzimmer/Humid","topic":"/sz/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":150,"y":2280,"wires":[["3824ccdf.8355b4"]]},{"id":"d796ff36.511778","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1920,"wires":[["ea3b12da.b81da8"]]},{"id":"ea3b12da.b81da8","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Wohnzimmer/Temp","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":1920,"wires":[[]]},{"id":"882e549e.6af538","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1960,"wires":[["43fc7377.145594"]]},{"id":"43fc7377.145594","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Wohnzimmer/Humid","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":1960,"wires":[[]]},{"id":"9f7098f.80cbde8","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2020,"wires":[["1f36320f.367636"]]},{"id":"1f36320f.367636","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Küche/Temp","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":2020,"wires":[[]]},{"id":"daa90521.6f3238","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2060,"wires":[["c7c98e52.324fc8"]]},{"id":"c7c98e52.324fc8","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Küche/Humid","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":2060,"wires":[[]]},{"id":"5cc67d93.aa589c","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2120,"wires":[["af89c1e9.ae6be8"]]},{"id":"af89c1e9.ae6be8","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Bad/Temp","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":2120,"wires":[[]]},{"id":"29b3f27f.a24b16","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2160,"wires":[["44b21482.5c7864"]]},{"id":"44b21482.5c7864","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Bad/Humid","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":2160,"wires":[[]]},{"id":"5b8dc7e9.49226","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2240,"wires":[["8c91bdf6.305b6"]]},{"id":"8c91bdf6.305b6","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Schlafzimmer/Temp","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":2240,"wires":[[]]},{"id":"3824ccdf.8355b4","type":"change","z":"57b8c30b.db8ba4","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":2280,"wires":[["9ed04433.e0096"]]},{"id":"9ed04433.e0096","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"Schlafzimmer/Humid","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":2280,"wires":[[]]},{"id":"f8a759b2.db20d8","type":"chatbot-command","z":"57b8c30b.db8ba4","name":"","command":"/kueche","x":180,"y":840,"wires":[["dffd9278.80b12","247d6987.034d96"]]},{"id":"3d043de0.773c52","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur in der Küche beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":840,"wires":[["41d616e6.9b9ec8"]]},{"id":"dffd9278.80b12","type":"change","z":"57b8c30b.db8ba4","name":"get temp flow.Küche","rules":[{"t":"set","p":"payload","pt":"msg","to":"Küche/Temp","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":840,"wires":[["3d043de0.773c52","a6cede9d.b02cb"]]},{"id":"b5445a70.28f038","type":"change","z":"57b8c30b.db8ba4","name":"get humid flow.Wohnzimmer","rules":[{"t":"set","p":"payload","pt":"msg","to":"Wohnzimmer/Humid","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":780,"wires":[["13081310.f66a55","ead0d8d6.c9acb"]]},{"id":"13081310.f66a55","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die relative Luftfeuchtigkeit im Wohnzimmer beträgt \" + msg.payload +\" %.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":780,"wires":[["41d616e6.9b9ec8"]]},{"id":"247d6987.034d96","type":"change","z":"57b8c30b.db8ba4","name":"get humid flow.Küche","rules":[{"t":"set","p":"payload","pt":"msg","to":"Küche/Humid","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":880,"wires":[["495d9430.487814","d404b3a1.4d658"]]},{"id":"495d9430.487814","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die relative Luftfeuchtigkeit in der Küche beträgt \" + msg.payload +\" %.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":880,"wires":[["41d616e6.9b9ec8"]]},{"id":"e8738e01.13b09","type":"chatbot-command","z":"57b8c30b.db8ba4","name":"","command":"/bad","x":170,"y":940,"wires":[["af6136ec.0e25b8","18efa922.9459b7"]]},{"id":"97ecb607.38c228","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur im Bad beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":940,"wires":[["41d616e6.9b9ec8"]]},{"id":"af6136ec.0e25b8","type":"change","z":"57b8c30b.db8ba4","name":"get temp flow.Bad","rules":[{"t":"set","p":"payload","pt":"msg","to":"Bad/Temp","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":940,"wires":[["97ecb607.38c228","548e22ac.56d894"]]},{"id":"18efa922.9459b7","type":"change","z":"57b8c30b.db8ba4","name":"get humid flow.Bad","rules":[{"t":"set","p":"payload","pt":"msg","to":"Bad/Humid","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":980,"wires":[["c3582c3b.5e3188","4ffc971a.b338f"]]},{"id":"c3582c3b.5e3188","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die relative Luftfeuchtigkeit im Bad beträgt \" + msg.payload +\" %.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":980,"wires":[["41d616e6.9b9ec8"]]},{"id":"1d18e18e.4ace5e","type":"chatbot-command","z":"57b8c30b.db8ba4","name":"","command":"/sz","x":170,"y":1040,"wires":[["6e7a7683.8578","45f2a90c.238e"]]},{"id":"73794b70.40dca4","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur im Schlafzimmer beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":1040,"wires":[["41d616e6.9b9ec8"]]},{"id":"6e7a7683.8578","type":"change","z":"57b8c30b.db8ba4","name":"get temp flow.Schlafzimmer","rules":[{"t":"set","p":"payload","pt":"msg","to":"Schlafzimmer/Temp","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":1040,"wires":[["73794b70.40dca4","64b659f5.18b3d8"]]},{"id":"45f2a90c.238e","type":"change","z":"57b8c30b.db8ba4","name":"get humid flow.Schlafzimmer","rules":[{"t":"set","p":"payload","pt":"msg","to":"Schlafzimmer/Humid","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":1080,"wires":[["143aac3d.22da7c","8387218e.3f2c2"]]},{"id":"143aac3d.22da7c","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die relative Luftfeuchtigkeit im Schlafzimmer beträgt \" + msg.payload +\" %.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":1080,"wires":[["41d616e6.9b9ec8"]]},{"id":"545aa08e.24e29","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Küche/Humid","topic":"/kueche/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":130,"y":2060,"wires":[["daa90521.6f3238"]]},{"id":"9dccf91c.9f284","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"50","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":550,"y":1220,"wires":[["f551a8b1.137d8"]]},{"id":"bf62816f.17f948","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":1240,"wires":[["6462168.de51e68"]]},{"id":"137b5e1f.b0689a","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"150","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":1260,"wires":[["6f71fba1.fb0944"]]},{"id":"7c55c6fc.f65c3","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":1280,"wires":[["adf2ad4.0c346d"]]},{"id":"5a184fe2.aa31a","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":1300,"wires":[["b5445a70.28f038"]]},{"id":"5e66acd4.0e4acc","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"300","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":1320,"wires":[["dffd9278.80b12"]]},{"id":"d93eaeae.232f7","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"350","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":1340,"wires":[["247d6987.034d96"]]},{"id":"dff46e7c.697bc8","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"400","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":1360,"wires":[["af6136ec.0e25b8"]]},{"id":"70ac720a.d44e9c","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"450","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":1380,"wires":[["18efa922.9459b7"]]},{"id":"53369d2b.5da6fc","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":1400,"wires":[["6e7a7683.8578"]]},{"id":"da672c33.a8183","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"delay","timeout":"550","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":560,"y":1420,"wires":[["45f2a90c.238e"]]},{"id":"40db6a16.8fd6ac","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Guten Morgen, draußen sind es \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1190,"y":220,"wires":[["41d616e6.9b9ec8"]]},{"id":"cb7b803d.b54398","type":"change","z":"57b8c30b.db8ba4","name":"set Payload to flow.Außentemperatur","rules":[{"t":"set","p":"payload","pt":"msg","to":"aussentempowm","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":220,"wires":[["40db6a16.8fd6ac"]]},{"id":"86ad4742.27d28","type":"delay","z":"57b8c30b.db8ba4","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"20","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":870,"y":260,"wires":[["cb7b803d.b54398"]]},{"id":"9bb4d400.f580f8","type":"comment","z":"57b8c30b.db8ba4","name":"Guten-Morgen-Temperatur","info":"","x":490,"y":200,"wires":[]},{"id":"b5e922a8.bbd46","type":"inject","z":"57b8c30b.db8ba4","name":"GutenMorgen-Msg","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"30 07 * * *","once":false,"x":620,"y":240,"wires":[["86ad4742.27d28"]]},{"id":"17f7e5ac.45ba22","type":"debug","z":"57b8c30b.db8ba4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":633,"y":36.666656494140625,"wires":[]},{"id":"bf10a170.2cae7","type":"inject","z":"57b8c30b.db8ba4","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"x":1870,"y":980,"wires":[["d8d7e309.1551a"]]},{"id":"d5914a1d.8b012","type":"function","z":"57b8c30b.db8ba4","name":"online-status","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Telegram-Bot ist online. \"+ msg.day+ \".\" + msg.month+\".\" + msg.year +\" \"+ msg.hours+\":\"  + msg.mins+\"Uhr\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1865,"y":900,"wires":[["41d616e6.9b9ec8"]]},{"id":"dd2651ec.dc1f48","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Wohnzimmer/Humid","topic":"/wz/humid","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":150,"y":2500,"wires":[["beef988f.68ad58"]]},{"id":"18b30ed3.1cfcc9","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Küche/Humid","topic":"/kueche/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":130,"y":2420,"wires":[["3c3b0c1.cd7dcf4"]]},{"id":"72c8a4ad.602324","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Schlafzimmer/Humid","topic":"/sz/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":150,"y":2540,"wires":[["50d73f7f.0377b8"]]},{"id":"c39643c5.99ccd","type":"mqtt in","z":"57b8c30b.db8ba4","name":"Bad/Humid","topic":"/bad/humid","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":120,"y":2460,"wires":[["5fea1929.ac7918"]]},{"id":"3c3b0c1.cd7dcf4","type":"falling-edge","z":"57b8c30b.db8ba4","name":"fällt um 8 %","threshold":"8","x":430,"y":2420,"wires":[["41e27d4e.4e144c"]]},{"id":"5fea1929.ac7918","type":"falling-edge","z":"57b8c30b.db8ba4","name":"fällt um 8 %","threshold":"8","x":430,"y":2460,"wires":[["52d24b2.173da34"]]},{"id":"beef988f.68ad58","type":"falling-edge","z":"57b8c30b.db8ba4","name":"fällt um 8 %","threshold":"8","x":430,"y":2500,"wires":[["188921c6.88f7ee"]]},{"id":"50d73f7f.0377b8","type":"falling-edge","z":"57b8c30b.db8ba4","name":"fällt um 8 %","threshold":"8","x":430,"y":2540,"wires":[["4a1e819c.c53ae8"]]},{"id":"cd188ee2.1e4f2","type":"function","z":"57b8c30b.db8ba4","d":true,"name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : msg.topic +\": gut gelüftet\"} };\nreturn msg;","outputs":1,"noerr":0,"x":920,"y":2480,"wires":[["118f5a10.f50d26"]]},{"id":"41e27d4e.4e144c","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Küche","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2420,"wires":[["cd188ee2.1e4f2"]]},{"id":"52d24b2.173da34","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2460,"wires":[["cd188ee2.1e4f2"]]},{"id":"188921c6.88f7ee","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2500,"wires":[["cd188ee2.1e4f2"]]},{"id":"4a1e819c.c53ae8","type":"change","z":"57b8c30b.db8ba4","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Schlafzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":2540,"wires":[["cd188ee2.1e4f2"]]},{"id":"118f5a10.f50d26","type":"chatbot-conversation","z":"57b8c30b.db8ba4","name":"","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"173173012","userId":"","transport":"telegram","store":"","x":1170,"y":2480,"wires":[["92ca9c11.eccda"]]},{"id":"92ca9c11.eccda","type":"chatbot-telegram-send","z":"57b8c30b.db8ba4","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","track":false,"passThrough":false,"outputs":0,"x":1190,"y":2520,"wires":[]},{"id":"88a364d4.380f78","type":"mqtt in","z":"f5f1b719.8a699","name":"Bodentemp","topic":"/keller/temp/28ff8c388a1635a","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":110,"y":3240,"wires":[["c8e822e.a475d6","91ade318.064f18","7396bf49.b38f28","efa22c63.4de0b8","6e78fe64.1af5a"]]},{"id":"fdc362a8.cf2b9","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/keller/UV/UV","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":110,"y":3620,"wires":[["76db7c9e.330bfc"]]},{"id":"dd12e85b.989bc8","type":"chatbot-conversation","z":"f5f1b719.8a699","name":"","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"173173012","userId":"","transport":"telegram","store":"","x":2940,"y":700,"wires":[["7136f5d6.ca8d04"]]},{"id":"34169ae9.a6ce16","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/keller/UV/mW","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":120,"y":3660,"wires":[["5956ed6c.3d415c"]]},{"id":"89eadc5f.d485","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/keller/UV/index","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":120,"y":3700,"wires":[["1b619c1.182e964"]]},{"id":"c8e822e.a475d6","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Bodentemperatur","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2100,"y":2720,"wires":[["7a6657d0.625bf8","a8a3cd1d.a25978"]]},{"id":"7136f5d6.ca8d04","type":"chatbot-telegram-send","z":"f5f1b719.8a699","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","track":false,"passThrough":false,"outputs":0,"x":3178.5715942382812,"y":701.4286499023438,"wires":[]},{"id":"7a6657d0.625bf8","type":"switch","z":"f5f1b719.8a699","name":"Switch:Temp < 10 °C","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"10","vt":"str"}],"checkall":"false","outputs":1,"x":2350,"y":2760,"wires":[["ab962da0.02f868"]]},{"id":"20d13cbe.aadd24","type":"function","z":"f5f1b719.8a699","name":"Achtung! Es ist kalt draußen","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Es friert! \" + msg.payload + \" °C\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2870,"y":2780,"wires":[["dd12e85b.989bc8"]]},{"id":"bb9a97b5.6301b8","type":"mqtt in","z":"f5f1b719.8a699","name":"Außentemp","topic":"/keller/temp/28ffca9721747","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":120,"y":3400,"wires":[["79a20da7.783d04","c3a7b9ea.6d04b","d4c06065.27dbe8","3c6fb1ae.a783be","9aad0fef.c71028","ed64e42f.a56058"]]},{"id":"79a20da7.783d04","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Außentemperatur","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2100,"y":2858.75,"wires":[["a8a3cd1d.a25978"]]},{"id":"9a38aa07.816f7","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/wz/temp","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":80,"y":760,"wires":[["700e4722.cac198"]]},{"id":"720db2f7.a77f9c","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/wz/humid","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":80,"y":800,"wires":[["a965aa1c.385f"]]},{"id":"dc638b63.d419c8","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/sz/temp","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":80,"y":1060,"wires":[["1a438924.40ef17"]]},{"id":"41622a7.73a5d54","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/sz/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":80,"y":1100,"wires":[["833a03b4.65dee8"]]},{"id":"75b68a28.ac6bd4","type":"mqtt in","z":"f5f1b719.8a699","name":"Keller","topic":"/keller/temp/28ff84ed6117326","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":90,"y":3020,"wires":[["7d4e7894.24167","342fafd.a17cc5"]]},{"id":"cded3f31.8d846","type":"comment","z":"f5f1b719.8a699","name":"Garten","info":"","x":60,"y":3200,"wires":[]},{"id":"c2ef2832.57b0d8","type":"comment","z":"f5f1b719.8a699","name":"Wohnzimmer","info":"","x":90,"y":660,"wires":[]},{"id":"dc02f98f.cb7348","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Schlafzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":1120,"wires":[["f96dc917.41a9b8"]]},{"id":"2ef2b655.289032","type":"switch","z":"f5f1b719.8a699","name":"Humid > 65 %","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"65","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1588.7501220703125,"y":1117.5,"wires":[["76f25387.b64e84"]]},{"id":"6b059f7d.23c9f8","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte im \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1898.7501220703125,"y":1116.25,"wires":[["dd12e85b.989bc8"]]},{"id":"f96dc917.41a9b8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1408.7501220703125,"y":1118.75,"wires":[["2ef2b655.289032"]]},{"id":"cfa7cab8.12e84","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":800,"wires":[["dd28cb75.9cf2d8"]]},{"id":"3ffdff0e.eb01a","type":"switch","z":"f5f1b719.8a699","name":"Humid > 65 %","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"65","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1585.0001220703125,"y":800,"wires":[["28f53949.130316"]]},{"id":"9437438f.2b2628","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte im \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1900,"y":800,"wires":[["dd12e85b.989bc8"]]},{"id":"dd28cb75.9cf2d8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1408.7501220703125,"y":800,"wires":[["3ffdff0e.eb01a"]]},{"id":"7d690adf.20a6dc","type":"comment","z":"f5f1b719.8a699","name":"Schlafzimmer","info":"","x":90,"y":960,"wires":[]},{"id":"e3bf6c4e.08027","type":"comment","z":"f5f1b719.8a699","name":"Keller HGW","info":"","x":70,"y":2920,"wires":[]},{"id":"b5308177.823e58","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/kueche/temp","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":90,"y":140,"wires":[["2ee016cd.efc56a"]]},{"id":"269ce037.7ed2d8","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/kueche/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":100,"y":180,"wires":[["b2b5d29c.acb1c8","8da263ce.2bca3"]]},{"id":"3567a255.525c66","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/bad/temp","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":80,"y":420,"wires":[["8095735.eb9009"]]},{"id":"f3ef6a00.fc474","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/bad/humid","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":80,"y":460,"wires":[["f01952e5.7a9b3"]]},{"id":"6a1bebb1.e26744","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":460,"wires":[["93edb071.415c7"]]},{"id":"7608c34a.87fd14","type":"switch","z":"f5f1b719.8a699","name":"Humid > 80 %","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"80","vt":"str"}],"checkall":"false","outputs":1,"x":1590.0001220703125,"y":456.25,"wires":[["bf0339e4.c0c9d"]]},{"id":"671a302b.3f3d5","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte im \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1900,"y":457.5,"wires":[["dd12e85b.989bc8"]]},{"id":"93edb071.415c7","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1411.2501220703125,"y":458.75,"wires":[["7608c34a.87fd14"]]},{"id":"2841b87.c660bc8","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Küche","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":180,"wires":[["c85a9404.07199"]]},{"id":"473c2ddc.ef4234","type":"switch","z":"f5f1b719.8a699","name":"Humid > 70 %","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"70","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1590.0001220703125,"y":178.75,"wires":[["5375f18a.ce6078"]]},{"id":"ff70a087.ec2118","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1900,"y":180,"wires":[["dd12e85b.989bc8"]]},{"id":"c85a9404.07199","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1410.0001220703125,"y":180,"wires":[["473c2ddc.ef4234"]]},{"id":"11df0540.e51a93","type":"comment","z":"f5f1b719.8a699","name":"Küche","info":"","x":70,"y":60,"wires":[]},{"id":"48a18ced.42af6c","type":"comment","z":"f5f1b719.8a699","name":"Bad","info":"","x":70,"y":340,"wires":[]},{"id":"15b73577.731cfb","type":"comment","z":"f5f1b719.8a699","name":"Alarm","info":"","x":1210,"y":40,"wires":[]},{"id":"41bb6163.914e2","type":"smooth","z":"f5f1b719.8a699","name":"max","property":"payload","action":"max","count":"3600","round":"2","mult":"single","reduce":true,"x":660,"y":260,"wires":[["99444ef0.99cda8","dfbcdce0.83f3d8"]]},{"id":"5425f0a.0de099","type":"smooth","z":"f5f1b719.8a699","name":"max","property":"payload","action":"max","count":"3600","round":"2","mult":"single","reduce":true,"x":660,"y":560,"wires":[["21c25a58.1fb9b6","b366d860.00597"]]},{"id":"12afb6f3.343f91","type":"smooth","z":"f5f1b719.8a699","name":"max","property":"payload","action":"max","count":"3600","round":"2","mult":"single","reduce":true,"x":660,"y":880,"wires":[["d0ce5399.2d6ae","8e4d43ff.0dd998"]]},{"id":"6123f9ad.77ed5","type":"smooth","z":"f5f1b719.8a699","name":"max","property":"payload","action":"max","count":"3600","round":"2","mult":"single","reduce":true,"x":660,"y":1180,"wires":[["468ae86c.c42cf","99fa3f7b.781208"]]},{"id":"d0bae4f4.e08fe","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Küche","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":140,"wires":[["a459c336.513058"]]},{"id":"b5ec393c.b9a5a8","type":"switch","z":"f5f1b719.8a699","name":"Temp < 17 °C","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"17","vt":"str"}],"checkall":"false","outputs":1,"x":1590.0001220703125,"y":138.75,"wires":[["dd6f4f94.716888"]]},{"id":"f9810c64.8b05b","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1890,"y":140,"wires":[["dd12e85b.989bc8"]]},{"id":"a459c336.513058","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1410.0001220703125,"y":140,"wires":[["b5ec393c.b9a5a8"]]},{"id":"dd6f4f94.716888","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740,"y":140,"wires":[["f9810c64.8b05b","98d5c03b.6eb1c"]]},{"id":"5375f18a.ce6078","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1739.9999389648438,"y":181.25,"wires":[["ff70a087.ec2118","6d57a09a.71852"]]},{"id":"bf0339e4.c0c9d","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1741.25,"y":457.5,"wires":[["671a302b.3f3d5","5dbbc812.8efdc8"]]},{"id":"28f53949.130316","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740,"y":800,"wires":[["9437438f.2b2628","7585607a.9d58a"]]},{"id":"76f25387.b64e84","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740.0001220703125,"y":1116.25,"wires":[["6b059f7d.23c9f8","c9ca0d16.49e86"]]},{"id":"f2058b64.b99058","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":420,"wires":[["1324572c.962bb1"]]},{"id":"38e88521.49c262","type":"switch","z":"f5f1b719.8a699","name":"Temp < 17 °C","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"17","vt":"str"}],"checkall":"false","outputs":1,"x":1590.0001220703125,"y":418.75,"wires":[["894e2997.b9371"]]},{"id":"1324572c.962bb1","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1410.0001220703125,"y":420,"wires":[["38e88521.49c262"]]},{"id":"894e2997.b9371","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740,"y":420,"wires":[["3e473c2a.20ad8c","6bb94dc0.05a974"]]},{"id":"bc1104df.093f08","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":760,"wires":[["afeda7ce.96e55"]]},{"id":"ded148ec.d5936","type":"switch","z":"f5f1b719.8a699","name":"Temp < 17 °C","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"17","vt":"str"}],"checkall":"false","outputs":1,"x":1583.7501220703125,"y":758.75,"wires":[["3ef8c34c.8c27fc"]]},{"id":"afeda7ce.96e55","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1408.7501220703125,"y":760,"wires":[["ded148ec.d5936"]]},{"id":"3ef8c34c.8c27fc","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740,"y":760,"wires":[["eb5fbb6.b4cab48","fe694f02.39ae5"]]},{"id":"a8669902.52ec38","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Schlafzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":1080,"wires":[["8b22f736.257918"]]},{"id":"b19aeb1e.bb53f","type":"switch","z":"f5f1b719.8a699","name":"Temp < 17°C","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"17","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":1078.75,"wires":[["6cb01c87.77d874"]]},{"id":"8b22f736.257918","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1410.0001220703125,"y":1080,"wires":[["b19aeb1e.bb53f"]]},{"id":"6cb01c87.77d874","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740,"y":1080,"wires":[["bab29d18.4dfb48","2088cae0.03013e"]]},{"id":"7d4e7894.24167","type":"smooth","z":"f5f1b719.8a699","name":"min","action":"min","count":"1000","round":"2","mult":"single","x":430,"y":3060,"wires":[["4a83b631.f91bd"]]},{"id":"d4c06065.27dbe8","type":"smooth","z":"f5f1b719.8a699","name":"min","action":"min","count":"1000","round":"2","mult":"single","x":445.5,"y":3457.2499389648438,"wires":[["bb4111cd.501728"]]},{"id":"91ade318.064f18","type":"smooth","z":"f5f1b719.8a699","name":"min","action":"min","count":"1000","round":"2","mult":"single","x":440,"y":3180,"wires":[["459bc596.256ccc"]]},{"id":"7396bf49.b38f28","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Boden","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":3280,"wires":[["62e7bf54.a8cc"]]},{"id":"3c6fb1ae.a783be","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Außen","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":3360,"wires":[["39780b4c.d1dae4","d0a59f9.e80c6e"]]},{"id":"ab962da0.02f868","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":2570,"y":2760,"wires":[[]]},{"id":"a8a3cd1d.a25978","type":"switch","z":"f5f1b719.8a699","name":"Switch:Temp < 0 °C","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"0.5","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":2340,"y":2820,"wires":[["20d13cbe.aadd24"]]},{"id":"2ce42861.cad548","type":"inject","z":"f5f1b719.8a699","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"x":3021.25,"y":843.75,"wires":[["b1aa80b1.8bce"]]},{"id":"1efe00d5.aef15f","type":"function","z":"f5f1b719.8a699","name":"online","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Sensoren sind online. \" + msg.day+ \".\" + msg.month+\".\" + msg.year +\" \"+ msg.hours+\":\"  + msg.mins+\"Uhr\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":3002.666748046875,"y":774,"wires":[["dd12e85b.989bc8"]]},{"id":"1b619c1.182e964","type":"ui_text","z":"f5f1b719.8a699","group":"86b1550c.1f3dd8","order":8,"width":0,"height":0,"name":"","label":"UV-Index:","format":"{{msg.payload}}","layout":"row-right","x":920,"y":3700,"wires":[]},{"id":"6da5aa63.5851fc","type":"ui_text","z":"f5f1b719.8a699","group":"cd0c507e.ece488","order":6,"width":"6","height":"2","name":"","label":"Optimal: <br> T = 16-18 °C <br>  rel. Feuchte = 40-60 % ","format":"","layout":"row-spread","x":600,"y":980,"wires":[]},{"id":"8cae16c8.5f3cb8","type":"ui_text","z":"f5f1b719.8a699","group":"19c026cc.d12109","order":6,"width":"6","height":"2","name":"","label":"Optimal: <br> T = 20 °C <br>  rel. Feuchte = 40-60 % ","format":"","layout":"row-spread","x":590,"y":672,"wires":[]},{"id":"4f407f0b.9412d","type":"ui_text","z":"f5f1b719.8a699","group":"8d130f13.d84e68","order":0,"width":"6","height":"2","name":"","label":"Optimal: <br> T = 10-15 °C <br>  rel. Feuchte = 50-65 % ","format":"","layout":"row-spread","x":284.9998779296875,"y":2958.75,"wires":[]},{"id":"367c73c5.635ab4","type":"ui_text","z":"f5f1b719.8a699","group":"18b81b1b.70b245","order":6,"width":"6","height":"2","name":"","label":"Optimal: <br> T = 18 °C <br>  rel. Feuchte = 40-60 % ","format":"","layout":"row-spread","x":590,"y":56,"wires":[]},{"id":"311cf1ad.591736","type":"ui_text","z":"f5f1b719.8a699","group":"137ca620.959b52","order":6,"width":"6","height":"2","name":"","label":"Optimal: <br> T = 23 °C <br>  rel. Feuchte = 50-70 % ","format":"","layout":"row-spread","x":590,"y":360,"wires":[]},{"id":"99444ef0.99cda8","type":"ui_text","z":"f5f1b719.8a699","group":"18b81b1b.70b245","order":3,"width":0,"height":0,"name":"","label":"max. gemessene Luftfeuchte","format":"{{msg.payload}} %","layout":"row-left","x":930,"y":260,"wires":[]},{"id":"21c25a58.1fb9b6","type":"ui_text","z":"f5f1b719.8a699","group":"137ca620.959b52","order":3,"width":0,"height":0,"name":"","label":"max. gemessene Luftfeuchte","format":"{{msg.payload}} %","layout":"row-left","x":930,"y":560,"wires":[]},{"id":"d0ce5399.2d6ae","type":"ui_text","z":"f5f1b719.8a699","group":"19c026cc.d12109","order":3,"width":0,"height":0,"name":"","label":"max. gemessene Luftfeuchte","format":"{{msg.payload}} %","layout":"row-left","x":930,"y":880,"wires":[]},{"id":"468ae86c.c42cf","type":"ui_text","z":"f5f1b719.8a699","group":"cd0c507e.ece488","order":3,"width":0,"height":0,"name":"","label":"max. gemessene Luftfeuchte","format":"{{msg.payload}} %","layout":"row-left","x":930,"y":1180,"wires":[]},{"id":"4a83b631.f91bd","type":"ui_text","z":"f5f1b719.8a699","group":"8d130f13.d84e68","order":0,"width":0,"height":0,"name":"","label":"tiefste Temperatur: ","format":"{{msg.payload}} °C","layout":"row-left","x":950,"y":3060,"wires":[]},{"id":"bb4111cd.501728","type":"ui_text","z":"f5f1b719.8a699","group":"86b1550c.1f3dd8","order":4,"width":"3","height":"1","name":"","label":"min: ","format":"{{msg.payload}} °C","layout":"row-left","x":920,"y":3460,"wires":[]},{"id":"459bc596.256ccc","type":"ui_text","z":"f5f1b719.8a699","group":"6271eae2.2d3f34","order":4,"width":"3","height":"1","name":"","label":"min: ","format":"{{msg.payload}} °C","layout":"row-left","x":920,"y":3160,"wires":[]},{"id":"76db7c9e.330bfc","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"86b1550c.1f3dd8","order":6,"width":0,"height":0,"label":"UV","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"outputs":2,"x":910,"y":3620,"wires":[[],[]]},{"id":"5956ed6c.3d415c","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"86b1550c.1f3dd8","order":7,"width":0,"height":0,"label":"mW","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"outputs":2,"x":910,"y":3660,"wires":[[],[]]},{"id":"468cb6ae.fc8548","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"19c026cc.d12109","order":1,"width":0,"height":0,"label":"Temperatur","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#ff9595","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":880,"y":720,"wires":[[],[]]},{"id":"9fdfbc42.2257f8","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"19c026cc.d12109","order":2,"width":0,"height":0,"label":"relative Luftfeuchte","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#aec7e8","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":900,"y":800,"wires":[[],[]]},{"id":"c10cba24.9cac8","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"cd0c507e.ece488","order":1,"width":0,"height":0,"label":"Temperatur","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#ff9595","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":880,"y":1020,"wires":[[],[]]},{"id":"f6965e02.3e1c68","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"cd0c507e.ece488","order":2,"width":0,"height":0,"label":"relative Luftfeuchte","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#aec7e8","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":900,"y":1100,"wires":[[],[]]},{"id":"2fcfae8e.4db572","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"8d130f13.d84e68","order":1,"width":0,"height":0,"label":"Keller","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":910,"y":3020,"wires":[[],[]]},{"id":"35e26095.299228","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"18b81b1b.70b245","order":1,"width":0,"height":0,"label":"Temperatur","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#ff9595","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":880,"y":100,"wires":[[],[]]},{"id":"41c2ce21.9d8d98","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"18b81b1b.70b245","order":2,"width":0,"height":0,"label":"relative Luftfeuchte","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#aec7e8","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":900,"y":180,"wires":[[],[]]},{"id":"51f5e029.c79c28","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"137ca620.959b52","order":1,"width":0,"height":0,"label":"Temperatur","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#ff9595","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":881.25,"y":403.75,"wires":[[],[]]},{"id":"dd87bdcf.369808","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"137ca620.959b52","order":2,"width":0,"height":0,"label":"relative Luftfeuchte","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#aec7e8","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":901.25,"y":483.75,"wires":[[],[]]},{"id":"b5e36680.3627f8","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"6271eae2.2d3f34","order":1,"width":"0","height":"0","label":"Bodentemperatur","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#aec7e8","#27b62b","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"outputs":2,"x":960,"y":3260,"wires":[[],[]]},{"id":"7d5065a9.792c54","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"86b1550c.1f3dd8","order":1,"width":0,"height":0,"label":"Außentemperatur","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":960,"y":3360,"wires":[[],[]]},{"id":"85caf771.e0e18","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"6271eae2.2d3f34","order":2,"width":0,"height":0,"gtype":"gage","title":"Bodentemperatur","label":"","format":"{{value}} °C","min":"-10","max":"30","colors":["#3342ff","#0ce600","#ca3838"],"seg1":"10","seg2":"20","x":960,"y":3200,"wires":[]},{"id":"3117a341.dcfccc","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"19c026cc.d12109","order":4,"width":"3","height":"3","gtype":"gage","title":"Temperatur","label":"","format":"{{value}} °C","min":0,"max":"30","colors":["#00b500","#e6e600","#ca3838"],"seg1":"22","seg2":"25","x":880,"y":760,"wires":[]},{"id":"e1fb34fd.540c9","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"19c026cc.d12109","order":5,"width":"3","height":"3","gtype":"gage","title":"rel. Luftfeuchte","label":"","format":"{{value}} %","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"65","seg2":"75","x":890,"y":840,"wires":[]},{"id":"50922815.b97028","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"cd0c507e.ece488","order":4,"width":"3","height":"3","gtype":"gage","title":"Temperatur","label":"","format":"{{value}} °C","min":0,"max":"30","colors":["#00b500","#e6e600","#ca3838"],"seg1":"22","seg2":"25","x":880,"y":1060,"wires":[]},{"id":"ebf7c520.a6f2d8","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"cd0c507e.ece488","order":5,"width":"3","height":"3","gtype":"gage","title":"rel. Luftfeuchte","label":"","format":"{{value}} %","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"65","seg2":"75","x":890,"y":1140,"wires":[]},{"id":"695add7e.adc6b4","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"18b81b1b.70b245","order":4,"width":"3","height":"3","gtype":"gage","title":"Temperatur","label":"","format":"{{value}} °C","min":0,"max":"30","colors":["#00b500","#e6e600","#ca3838"],"seg1":"22","seg2":"25","x":880,"y":140,"wires":[]},{"id":"cf9c9828.620e4","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"18b81b1b.70b245","order":5,"width":"3","height":"3","gtype":"gage","title":"rel. Luftfeuchte","label":"","format":"{{value}} %","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"65","seg2":"75","x":890,"y":220,"wires":[]},{"id":"260c3ad0.a7c5e6","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"137ca620.959b52","order":4,"width":"3","height":"3","gtype":"gage","title":"Temperatur","label":"","format":"{{value}} °C","min":0,"max":"30","colors":["#00b500","#e6e600","#ca3838"],"seg1":"24","seg2":"26","x":881.25,"y":443.75,"wires":[]},{"id":"7192075c.c064","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"137ca620.959b52","order":5,"width":"3","height":"3","gtype":"gage","title":"rel. Luftfeuchte","label":"","format":"{{value}} %","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"70","seg2":"80","x":891.25,"y":523.75,"wires":[]},{"id":"c3a7b9ea.6d04b","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"86b1550c.1f3dd8","order":2,"width":0,"height":0,"gtype":"gage","title":"Außentemperatur","label":"","format":"{{value}} °C","min":"-10","max":"30","colors":["#3e1cff","#2dbc29","#ca3838"],"seg1":"10","seg2":"20","x":960,"y":3420,"wires":[]},{"id":"1e95f6b2.7878b9","type":"chatbot-telegram-receive","z":"dced8749.bff1b8","bot":"a08a3d24.93c3d","botProduction":"","x":90,"y":380,"wires":[["6741a941.f8aa4","12eed4c3.7ec053","7e6e8689.2b8b3"]]},{"id":"662f4c20.bfda8c","type":"chatbot-telegram-send","z":"dced8749.bff1b8","bot":"a08a3d24.93c3d","botProduction":"","track":false,"passThrough":false,"outputs":0,"x":1890,"y":440,"wires":[]},{"id":"9d5acf14.249608","type":"chatbot-conversation","z":"dced8749.bff1b8","name":"","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"173173012","userId":"","transport":"telegram","store":"","x":1880,"y":400,"wires":[["662f4c20.bfda8c"]]},{"id":"6741a941.f8aa4","type":"chatbot-command","z":"dced8749.bff1b8","name":"","command":"/kippe","x":270,"y":120,"wires":[["2bae3868.bdcc9","46b71076.a5586"]]},{"id":"ef9140b1.a975f","type":"function","z":"dced8749.bff1b8","name":"sendet Bieranzahl","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Du hast heute schon \" + msg.payload +\" Bier getrunken.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1290,"y":760,"wires":[["9d5acf14.249608"]]},{"id":"a8a6d9bf.b65808","type":"function","z":"dced8749.bff1b8","name":"sendet Bierintervall","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Vor \" + msg.payload +\" war dein letztes.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1290,"y":720,"wires":[["9d5acf14.249608"]]},{"id":"12eed4c3.7ec053","type":"chatbot-command","z":"dced8749.bff1b8","name":"","command":"/bier","x":270,"y":880,"wires":[["afa171ca.32d7a8","820449dd.67ac9"]]},{"id":"afa171ca.32d7a8","type":"function","z":"dced8749.bff1b8","name":"+ 1","func":"msg.increment = 1;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":880,"wires":[["af5c550d.3c88c8"]]},{"id":"feced751.9f8b38","type":"function","z":"dced8749.bff1b8","name":"reset","func":"msg.reset = true;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":960,"wires":[["af5c550d.3c88c8"]]},{"id":"65a30a04.bb97c4","type":"function","z":"dced8749.bff1b8","name":"- 1","func":"msg.decrement = 1;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":920,"wires":[["af5c550d.3c88c8"]]},{"id":"af5c550d.3c88c8","type":"counter","z":"dced8749.bff1b8","name":"","init":"0","step":1,"lower":"","upper":"","mode":"increment","outputs":2,"x":940,"y":920,"wires":[["ef9140b1.a975f","9869e9c.0b52918","5dff575.e2c2ea8"],[]]},{"id":"46b71076.a5586","type":"function","z":"dced8749.bff1b8","name":"+ 1","func":"msg.increment = 1;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":120,"wires":[["343b3a2f.2af23e"]]},{"id":"2104aa70.dbb446","type":"function","z":"dced8749.bff1b8","name":"reset","func":"msg.reset = true;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":200,"wires":[["343b3a2f.2af23e"]]},{"id":"9df60e41.3b681","type":"function","z":"dced8749.bff1b8","name":"- 1","func":"msg.decrement = 1;\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":160,"wires":[["343b3a2f.2af23e"]]},{"id":"343b3a2f.2af23e","type":"counter","z":"dced8749.bff1b8","name":"","init":"0","step":1,"lower":null,"upper":null,"mode":"increment","outputs":2,"x":920,"y":160,"wires":[["9b1ebe09.a3eca","cdd0cd3a.9ce12","afd97e3c.b82348","38fb62e1.8f301e","94d2d5b.af432a8","686315c5.f66184","d316a91b.87e2d8"],[]]},{"id":"f69614d1.fef5b","type":"inject","z":"dced8749.bff1b8","name":"reset um 04:30 Uhr","topic":"reset","payload":"","payloadType":"date","repeat":"","crontab":"30 04 * * *","once":false,"onceDelay":0.1,"x":560,"y":240,"wires":[["2104aa70.dbb446"]]},{"id":"bb4e3d91.2ad72","type":"inject","z":"dced8749.bff1b8","name":"reset um 04:30 Uhr","topic":"reset","payload":"","payloadType":"date","repeat":"","crontab":"30 04 * * *","once":false,"onceDelay":0.1,"x":540,"y":1000,"wires":[["feced751.9f8b38"]]},{"id":"db8a8ea1.8febe8","type":"persist in","z":"dced8749.bff1b8","name":"Kippen","storageNode":"7aadcf9c.6f8078","x":1720,"y":160,"wires":[]},{"id":"57b7c377.604d74","type":"persist out","z":"dced8749.bff1b8","name":"Kippen","storageNode":"7aadcf9c.6f8078","x":1300,"y":20,"wires":[["9b1ebe09.a3eca"]]},{"id":"2d32e284.d89d76","type":"persist in","z":"dced8749.bff1b8","name":"Bier","storageNode":"ef23a546.0acb08","x":1690,"y":920,"wires":[]},{"id":"8c0e65da.5d1ef8","type":"persist out","z":"dced8749.bff1b8","name":"Bier","storageNode":"ef23a546.0acb08","x":1330,"y":920,"wires":[["5dff575.e2c2ea8"]]},{"id":"2095de3d.e2095a","type":"inject","z":"dced8749.bff1b8","name":"minus 1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":160,"wires":[["9df60e41.3b681"]]},{"id":"ea970c54.0d3e2","type":"inject","z":"dced8749.bff1b8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":280,"y":920,"wires":[["65a30a04.bb97c4"]]},{"id":"edff0226.722a88","type":"ui_button","z":"dced8749.bff1b8","name":"","group":"c46b3287.939958","order":5,"width":0,"height":0,"passthru":false,"label":"Nächste Kippe","color":"","bgcolor":"","icon":"smoke_rooms","payload":"1 Kippe geraucht","payloadType":"str","topic":"","x":300,"y":80,"wires":[["2bae3868.bdcc9","46b71076.a5586","a4ace528.57cfc","297e9ecb.386432"]]},{"id":"2c384555.56bff2","type":"ui_button","z":"dced8749.bff1b8","name":"","group":"c46b3287.939958","order":6,"width":"0","height":"0","passthru":false,"label":"Reset","color":"","bgcolor":"","icon":"fa-refresh","payload":"Counter resetted","payloadType":"str","topic":"","x":270,"y":200,"wires":[["2104aa70.dbb446","2389be40.7b2fd2"]]},{"id":"34e2ce02.0b8e6a","type":"ui_button","z":"dced8749.bff1b8","name":"","group":"a977cccc.45c42","order":4,"width":0,"height":0,"passthru":false,"label":"Nächstes Bier","color":"","bgcolor":"","icon":"fa-beer","payload":"1 Bier getrunken","payloadType":"str","topic":"","x":300,"y":840,"wires":[["820449dd.67ac9","afa171ca.32d7a8","758d1fbd.943ee8","b412fded.e8e758"]]},{"id":"51beb68.1e62748","type":"ui_button","z":"dced8749.bff1b8","name":"","group":"a977cccc.45c42","order":0,"width":"0","height":"0","passthru":false,"label":"Reset","color":"","bgcolor":"","icon":"fa-refresh","payload":"resetted","payloadType":"str","topic":"","x":270,"y":960,"wires":[["feced751.9f8b38","30653508.292772"]]},{"id":"cdd0cd3a.9ce12","type":"ui_text","z":"dced8749.bff1b8","group":"c46b3287.939958","order":3,"width":0,"height":0,"name":"","label":"Kippen: ","format":"{{msg.payload}}","layout":"row-left","x":1460,"y":200,"wires":[]},{"id":"76f8a27e.159a0c","type":"ui_text","z":"dced8749.bff1b8","group":"c46b3287.939958","order":4,"width":0,"height":0,"name":"","label":"Letzte Kippe vor ","format":"{{msg.payload}}","layout":"row-left","x":1480,"y":120,"wires":[]},{"id":"9869e9c.0b52918","type":"ui_text","z":"dced8749.bff1b8","group":"a977cccc.45c42","order":2,"width":0,"height":0,"name":"","label":"Bier: ","format":"{{msg.payload}}","layout":"row-left","x":1450,"y":960,"wires":[]},{"id":"510e3a7b.2f9f44","type":"ui_text","z":"dced8749.bff1b8","group":"a977cccc.45c42","order":3,"width":0,"height":0,"name":"","label":"Letztes Bier vor ","format":"{{msg.payload}}","layout":"row-left","x":1480,"y":880,"wires":[]},{"id":"9b1ebe09.a3eca","type":"ui_chart","z":"dced8749.bff1b8","name":"","group":"c46b3287.939958","order":2,"width":0,"height":0,"label":"Kippen per day in a week","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"keine Daten","dot":true,"ymin":"0","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1510,"y":160,"wires":[["db8a8ea1.8febe8"],[]]},{"id":"5dff575.e2c2ea8","type":"ui_chart","z":"dced8749.bff1b8","name":"","group":"a977cccc.45c42","order":1,"width":0,"height":0,"label":"Bier per day in 12 weeks","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"keine Daten","dot":true,"ymin":"0","ymax":"","removeOlder":"12","removeOlderPoints":"","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1510,"y":920,"wires":[["2d32e284.d89d76"],[]]},{"id":"758d1fbd.943ee8","type":"ui_toast","z":"dced8749.bff1b8","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"1 Bier getrunken","x":970,"y":840,"wires":[]},{"id":"a4ace528.57cfc","type":"ui_toast","z":"dced8749.bff1b8","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"1 Kippe geraucht","x":950,"y":80,"wires":[]},{"id":"2389be40.7b2fd2","type":"ui_toast","z":"dced8749.bff1b8","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"Counter resetted","x":310,"y":240,"wires":[]},{"id":"30653508.292772","type":"ui_toast","z":"dced8749.bff1b8","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"","x":310,"y":1000,"wires":[]},{"id":"2bae3868.bdcc9","type":"interval-length","z":"dced8749.bff1b8","format":"human","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","startup":false,"name":"","x":940,"y":120,"wires":[["76f8a27e.159a0c","94d2d5b.af432a8","e2d9210d.b1c71"],[]]},{"id":"820449dd.67ac9","type":"interval-length","z":"dced8749.bff1b8","format":"human","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","startup":false,"name":"","x":960,"y":880,"wires":[["a8a6d9bf.b65808","510e3a7b.2f9f44"],[]]},{"id":"21c35f8c.1b4d6","type":"ui_audio","z":"dced8749.bff1b8","name":"","group":"a977cccc.45c42","voice":"de-DE","always":true,"x":940,"y":800,"wires":[]},{"id":"b412fded.e8e758","type":"change","z":"dced8749.bff1b8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Du Saufnase!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":800,"wires":[["21c35f8c.1b4d6"]]},{"id":"e6d4e106.0db0a8","type":"ui_audio","z":"dced8749.bff1b8","name":"","group":"c46b3287.939958","voice":"de-DE","always":true,"x":920,"y":40,"wires":[]},{"id":"297e9ecb.386432","type":"change","z":"dced8749.bff1b8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Rauch' nicht so viel!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":40,"wires":[["e6d4e106.0db0a8"]]},{"id":"c5c569fc.b71b1","type":"mqtt in","z":"3eae6dd9.5cba02","name":"Außentemp","topic":"/keller/temp/28ffca9721747","qos":"2","broker":"","x":190,"y":140,"wires":[["ec07aecb.d04198"]]},{"id":"77a39df2.5b97e4","type":"persist in","z":"3eae6dd9.5cba02","name":"Außentemp","storageNode":"ee52b112.146558","x":951.8333282470703,"y":142.83333587646484,"wires":[]},{"id":"a4f88754.2d385","type":"persist out","z":"3eae6dd9.5cba02","name":"Außentemp","storageNode":"ee52b112.146558","x":471.8333282470703,"y":82.83333587646484,"wires":[["ec07aecb.d04198"]]},{"id":"22f110f3.e07d48","type":"mqtt in","z":"3eae6dd9.5cba02","name":"Bodentemp","topic":"/keller/temp/28ff8c388a1635a","qos":"2","broker":"","x":191.8333282470703,"y":222.83333587646484,"wires":[["c5f4a24f.0bc998"]]},{"id":"28eefec1.1fe5fa","type":"persist in","z":"3eae6dd9.5cba02","name":"Bodentemp","storageNode":"8b7b941b.cae75","x":951.8333282470703,"y":222.83333587646484,"wires":[]},{"id":"81b05973.e413a8","type":"persist out","z":"3eae6dd9.5cba02","name":"Bodentemp","storageNode":"8b7b941b.cae75","x":471.8333282470703,"y":282.83333587646484,"wires":[["c5f4a24f.0bc998"]]},{"id":"f61801e1.679ea","type":"comment","z":"3eae6dd9.5cba02","name":"disabled, weil Website zu langsam","info":"","x":871.8333282470703,"y":62.833335876464844,"wires":[]},{"id":"ec07aecb.d04198","type":"ui_chart","z":"3eae6dd9.5cba02","name":"","group":"18b96a32.586906","order":1,"width":"0","height":"0","label":"Außentemperatur: 6 Monate","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":661.8333282470703,"y":142.83333587646484,"wires":[["77a39df2.5b97e4"],[]]},{"id":"c5f4a24f.0bc998","type":"ui_chart","z":"3eae6dd9.5cba02","name":"","group":"7d900e40.6edd58","order":1,"width":"0","height":"0","label":"Bodentemperatur: 6 Monate","chartType":"line","legend":"false","xformat":"dd HH:mm","interpolate":"linear","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#aec7e8","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":661.8333282470703,"y":222.83333587646484,"wires":[["28eefec1.1fe5fa"],[]]},{"id":"7c05bc62.2ccd54","type":"mqtt in","z":"3cf84bba.5bc2d4","name":"Außentemp","topic":"/keller/temp/28ffca9721747","qos":"2","broker":"","x":190,"y":200,"wires":[["a45be21b.1d1238","f94d0a89.e9df3"]]},{"id":"98fe42d7.de0e28","type":"http request","z":"3cf84bba.5bc2d4","name":"","method":"GET","url":"https://docs.google.com/forms/d/e/1FAIpQLSeTRGyz6_9BH8iho8E065MWHGQNCzRutZUUjgMDW4ByMO_7XQ/formResponse?entry.578420309={{payload}}","tls":"","x":685,"y":199,"wires":[[]]},{"id":"aee646cd.85d5f8","type":"comment","z":"3cf84bba.5bc2d4","name":"Google-Daten","info":"https://docs.google.com/forms/d/e/1FAIpQLSe3cOoDqNwfl7ZYAc6vCDZkUSii6ULnF4TSMHgwTC5moEoZXQ/viewform?usp=sf_link\n\nTemperatur\n540525783\n\nHOW TO\nhttps://www.open-electronics.org/how-send-data-from-arduino-to-google-docs-spreadsheet/","x":685,"y":168,"wires":[]},{"id":"c85182a0.519178","type":"comment","z":"3cf84bba.5bc2d4","name":"enable um Daten zu senden","info":"","x":846.0832977294922,"y":44.99998474121094,"wires":[]},{"id":"a45be21b.1d1238","type":"delay","z":"3cf84bba.5bc2d4","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":416.0832977294922,"y":204.99998474121094,"wires":[["98fe42d7.de0e28"]]},{"id":"8e093b3f.648b4","type":"comment","z":"3cf84bba.5bc2d4","name":"Sendet jede Stunde die Außentemperatur an Google","info":"Problem:\nDie Werte werden jedoch als Text und\nnicht als Zahl behandelt.","x":338.79161834716797,"y":139.16664505004883,"wires":[]},{"id":"f94d0a89.e9df3","type":"file","z":"3cf84bba.5bc2d4","name":"","filename":"~/home/test/test1","appendNewline":true,"createDir":true,"overwriteFile":"false","x":437.9583168029785,"y":306.25000381469727,"wires":[[]]},{"id":"cbed3954.cf26c8","type":"ui_button","z":"9f8950c8.4c9fc","name":"","group":"f52cc8f2.2a5f98","order":1,"width":0,"height":0,"passthru":false,"label":"update to repo","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":200,"y":80,"wires":[["175d7c33.c586ec"]]},{"id":"175d7c33.c586ec","type":"exec","z":"9f8950c8.4c9fc","command":"cd ~/.node-red/ ","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":500,"y":80,"wires":[[],[],[]]},{"id":"b2f0daf6.f9e1d","type":"switch","z":"5c07913f.b8c258","name":"6","property":"payload[6].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":80,"wires":[["706a7dae.27c9f4"]]},{"id":"c1b00565.4cf548","type":"switch","z":"5c07913f.b8c258","name":"7","property":"payload[7].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":120,"wires":[["61a1657d.f32d94"]]},{"id":"9b90570e.075ff","type":"switch","z":"5c07913f.b8c258","name":"8","property":"payload[8].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":160,"wires":[["99a01bf1.e1ccc"]]},{"id":"dd701fc.0e9c8e","type":"switch","z":"5c07913f.b8c258","name":"9","property":"payload[9].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":200,"wires":[["778fc027.982468"]]},{"id":"f7d9e887.6d77f","type":"switch","z":"5c07913f.b8c258","name":"10","property":"payload[10].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":240,"wires":[["d646a075.47617"]]},{"id":"eef96931.ecc55","type":"switch","z":"5c07913f.b8c258","name":"11","property":"payload[11].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":280,"wires":[["4e44e971.d4a4b"]]},{"id":"d2c9dbf6.a4bfd8","type":"switch","z":"5c07913f.b8c258","name":"12","property":"payload[12].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":230,"y":320,"wires":[["1fa662c2.c0d20d"]]},{"id":"3ef541df.668c06","type":"switch","z":"5c07913f.b8c258","name":"13","property":"payload[13].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":231.66665649414062,"y":360.41668701171875,"wires":[["5a6c28ec.1beb8"]]},{"id":"706a7dae.27c9f4","type":"change","z":"5c07913f.b8c258","name":"Datum 6","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload[6].dt_txt","tot":"msg"},{"t":"move","p":"payload[6].dt_txt","pt":"msg","to":"payload.date","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":80,"wires":[[]]},{"id":"61a1657d.f32d94","type":"change","z":"5c07913f.b8c258","name":"Datum 7","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload[7].dt_txt","tot":"msg"},{"t":"move","p":"payload[7].dt_txt","pt":"msg","to":"payload.date","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":120,"wires":[[]]},{"id":"99a01bf1.e1ccc","type":"change","z":"5c07913f.b8c258","name":"Datum 8","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload[8].dt_txt","tot":"msg"},{"t":"move","p":"payload[8].dt_txt","pt":"msg","to":"payload.date","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":160,"wires":[[]]},{"id":"778fc027.982468","type":"change","z":"5c07913f.b8c258","name":"Datum 9","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload[9].dt_txt","tot":"msg"},{"t":"move","p":"payload[9].dt_txt","pt":"msg","to":"payload.date","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":200,"wires":[[]]},{"id":"d646a075.47617","type":"change","z":"5c07913f.b8c258","name":"Datum 10","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload[10].dt_txt","tot":"msg"},{"t":"move","p":"payload[10].dt_txt","pt":"msg","to":"payload.date","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":240,"wires":[[]]},{"id":"4e44e971.d4a4b","type":"change","z":"5c07913f.b8c258","name":"Datum 11","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload[11].dt_txt","tot":"msg"},{"t":"move","p":"payload[11].dt_txt","pt":"msg","to":"payload.date","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":280,"wires":[[]]},{"id":"1fa662c2.c0d20d","type":"change","z":"5c07913f.b8c258","name":"Datum 12","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload[12].dt_txt","tot":"msg"},{"t":"move","p":"payload[12].dt_txt","pt":"msg","to":"payload.date","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":320,"wires":[[]]},{"id":"5a6c28ec.1beb8","type":"change","z":"5c07913f.b8c258","name":"Datum 13","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload[13].dt_txt","tot":"msg"},{"t":"move","p":"payload[13].dt_txt","pt":"msg","to":"payload.date","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":360,"wires":[[]]},{"id":"9afdab28.2b99e","type":"comment","z":"5c07913f.b8c258","name":"Wetter-Object enthält \"Rain\"?","info":"","x":150,"y":40,"wires":[]},{"id":"bc75677b.76c45","type":"comment","z":"5c07913f.b8c258","name":"Wann ?","info":"","x":530,"y":40,"wires":[]},{"id":"785d1cc7.44e484","type":"switch","z":"1f0f525d.8043ce","name":"Regnet's?","property":"payload.weather","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":870,"y":360,"wires":[["37588b80.8266a4"]]},{"id":"fc362787.b0b908","type":"chatbot-telegram-send","z":"1f0f525d.8043ce","bot":"a08a3d24.93c3d","botProduction":"","track":false,"passThrough":false,"outputs":0,"x":1830,"y":20,"wires":[]},{"id":"25265fc7.59d84","type":"chatbot-conversation","z":"1f0f525d.8043ce","name":"","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"173173012","userId":"","transport":"telegram","store":"","x":1640,"y":20,"wires":[["fc362787.b0b908","b9af15ab.06f768"]]},{"id":"66a18271.a98d84","type":"function","z":"1f0f525d.8043ce","name":"sendet Regenwarnung-24h","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : msg.payload} };\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":280,"wires":[["25265fc7.59d84"]]},{"id":"1e50b6e6.3a8a41","type":"inject","z":"1f0f525d.8043ce","name":"jeden Tag um 2:30 Uhr","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"30 02 * * *","once":false,"onceDelay":0.1,"x":140,"y":280,"wires":[["70a4f07d.70ae08","bcf5b24.8037dd"]]},{"id":"7eefad6c.bd66cc","type":"ui_text","z":"1f0f525d.8043ce","group":"230b31d5.91ae6e","order":1,"width":0,"height":0,"name":"","label":"Wetter","format":"{{msg.payload.detail}}","layout":"row-spread","x":990,"y":520,"wires":[]},{"id":"e71dced9.4e9538","type":"ui_text","z":"1f0f525d.8043ce","group":"230b31d5.91ae6e","order":4,"width":0,"height":0,"name":"","label":"Windgeschwindigkeit","format":"{{msg.payload}} km/h","layout":"row-spread","x":1040,"y":640,"wires":[]},{"id":"a23bf8fe.0b3308","type":"ui_text","z":"1f0f525d.8043ce","group":"230b31d5.91ae6e","order":3,"width":0,"height":0,"name":"","label":"Luftfeuchtigkeit","format":"{{msg.payload}} %","layout":"row-spread","x":1020,"y":600,"wires":[]},{"id":"110b06a2.fade89","type":"ui_text","z":"1f0f525d.8043ce","group":"230b31d5.91ae6e","order":2,"width":0,"height":0,"name":"","label":"Temperatur","format":"{{msg.payload}} °C","layout":"row-spread","x":1010,"y":560,"wires":[]},{"id":"f3485590.1d37e8","type":"ui_text","z":"1f0f525d.8043ce","group":"230b31d5.91ae6e","order":5,"width":0,"height":0,"name":"","label":"Luftdruck","format":"{{msg.payload}} hPa","layout":"row-spread","x":1000,"y":680,"wires":[]},{"id":"70a4f07d.70ae08","type":"openweathermap","z":"1f0f525d.8043ce","name":"Wetter morgen","wtype":"forecast","lon":"10.6847","lat":"53.8664","city":"","country":"","language":"de","x":400,"y":240,"wires":[["840d50d8.7e9748","2d2e23b6.64e84c"]]},{"id":"c7d21ccb.05a918","type":"chatbot-command","z":"1f0f525d.8043ce","name":"","command":"/wetter","x":340,"y":20,"wires":[["d0fc4d92.ff8ed8"]]},{"id":"aa077b25.68e1f8","type":"chatbot-telegram-receive","z":"1f0f525d.8043ce","bot":"a08a3d24.93c3d","botProduction":"","x":90,"y":20,"wires":[["c7d21ccb.05a918"]]},{"id":"3b29010e.b87896","type":"function","z":"1f0f525d.8043ce","name":"Sende jetziges Wetter","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Das Wetter in \"+ msg.location.city +\" ist: \" + msg.payload.detail + \". \" +\n    \"Es sind \" + msg.payload.tempc + \" °C. \" +\n    \"Die Luftfeuchtigkeit beträgt \" + msg.payload.humidity + \" %. \" +\n    \"Die Windgeschwindigkeit beträgt \"+ Number((msg.payload.windspeed*3.6).toFixed(2)) + \" km/h. \" +\n    \"Der Luftdruck beträgt \" + msg.payload.pressure + \" hPa.\" } };\nreturn msg;","outputs":1,"noerr":0,"x":1390,"y":20,"wires":[["25265fc7.59d84"]]},{"id":"85080df3.8a3ff","type":"persist in","z":"1f0f525d.8043ce","name":"wetter-jetzt","storageNode":"34be1ad7.0974ae","x":310,"y":580,"wires":[]},{"id":"d0fc4d92.ff8ed8","type":"persist out","z":"1f0f525d.8043ce","name":"wetter-jetzt","storageNode":"34be1ad7.0974ae","x":650,"y":20,"wires":[["2563b057.1e10c8"]]},{"id":"f18a75ad.615f88","type":"ui_chart","z":"1f0f525d.8043ce","name":"","group":"207ee41.8134b9c","order":1,"width":0,"height":0,"label":"Windgeschwindigkeit [km/h]","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"Daten werden alle 20 Minuten geladen.","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#81bfe9","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1060,"y":1100,"wires":[[],[]]},{"id":"5843e7dd.fc341","type":"ui_chart","z":"1f0f525d.8043ce","name":"","group":"207ee41.8134b9c","order":5,"width":0,"height":0,"label":"Luftdruck [hPa]","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"Daten werden alle 20 Minuten geladen.","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1020,"y":980,"wires":[[],[]]},{"id":"5da0afb2.a34028","type":"exec","z":"a73e6298.8dcc88","command":"vcgencmd measure_temp","addpay":false,"append":"","useSpawn":"","timer":"","name":"RPi Temp.","x":330,"y":100,"wires":[["d1a236c5.9d93b"],[],[]]},{"id":"13cdc4ee.06b803","type":"inject","z":"a73e6298.8dcc88","name":"","topic":"","payload":"","payloadType":"date","repeat":"10","crontab":"","once":false,"x":130,"y":160,"wires":[["5da0afb2.a34028","31c6f06d.bd7c4","e673f425.ef34a","c5ea6ca3.c18f48"]]},{"id":"d1a236c5.9d93b","type":"function","z":"a73e6298.8dcc88","name":"","func":"str = msg.payload\nmsg.payload = str.substring(5,9);\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":80,"wires":[["da93a1e9.948b88","ea01f663.6214b8","84c14590.c615"]]},{"id":"e92dc9b8.3e9e48","type":"exec","z":"a73e6298.8dcc88","command":"sudo reboot -h now","addpay":false,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"Reboot","x":1020,"y":1260,"wires":[[],[],[]]},{"id":"f6efb480.4217e8","type":"exec","z":"a73e6298.8dcc88","command":"sudo shutdown -h now","addpay":false,"append":"","useSpawn":"","timer":"","name":"Shutdown","x":1020,"y":1340,"wires":[[],[],[]]},{"id":"31c6f06d.bd7c4","type":"exec","z":"a73e6298.8dcc88","command":"top -d 0.5 -b -n2 | grep \"Cpu(s)\"|tail -n 1 | awk '{print $2 + $4}'","addpay":false,"append":"","useSpawn":"","timer":"","name":"CPU Load","x":330,"y":160,"wires":[["5bb3b015.503158","3893acf7.92e624"],[],[]]},{"id":"79732573.b1ea0c","type":"exec","z":"a73e6298.8dcc88","command":"df -h","addpay":false,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"Disk Usage","x":330,"y":300,"wires":[["f9aef973.771dc8"],[],[]]},{"id":"f9aef973.771dc8","type":"function","z":"a73e6298.8dcc88","name":"Speicher","func":"var re = /([0-9]{2})%/\nvar idx = msg.payload.search(re);\nvar str = msg.payload;\nif (idx >=0) {\n    str = msg.payload.substring(idx, idx + 2);\n}\nmsg.payload = str;\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":300,"wires":[["1393de24.9ec402","4d6e6931.9b8238","344b2053.f0443","8487ee8a.7d73e","b04f4524.6d0a18"]]},{"id":"b4ce7612.877538","type":"inject","z":"a73e6298.8dcc88","name":"","topic":"","payload":"","payloadType":"date","repeat":"60","crontab":"","once":false,"x":130,"y":300,"wires":[["79732573.b1ea0c"]]},{"id":"71dc23f5.5b9fe4","type":"function","z":"a73e6298.8dcc88","name":"Sende Payload als Nachricht","func":"var msg2 = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Der Speicher der Himbeere ist zu \" + msg.payload +\" % belegt.\"} };\nreturn msg2;","outputs":1,"noerr":0,"x":1480,"y":940,"wires":[["109f6e74.62e562"]]},{"id":"c3829b61.20457","type":"change","z":"a73e6298.8dcc88","name":"set Payload to flow.Speicher","rules":[{"t":"set","p":"payload","pt":"msg","to":"Speicher","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":940,"wires":[["71dc23f5.5b9fe4"]]},{"id":"4d6e6931.9b8238","type":"change","z":"a73e6298.8dcc88","name":"","rules":[{"t":"set","p":"Speicher","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":300,"wires":[[]]},{"id":"3aca1ca6.522084","type":"chatbot-telegram-receive","z":"a73e6298.8dcc88","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","x":130,"y":1080,"wires":[["e7076520.f09f48","94aa2249.c76458","f3a52449.ed8118","226713da.34ab5c","c0858ca.276387","b39e5698.a15dd","6c21d725.dc2bf"]]},{"id":"e7076520.f09f48","type":"chatbot-command","z":"a73e6298.8dcc88","name":"","command":"/speicher","x":540,"y":960,"wires":[["c3829b61.20457"]],"outputLabels":["/wz"]},{"id":"109f6e74.62e562","type":"chatbot-conversation","z":"a73e6298.8dcc88","name":"","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"173173012","userId":"","transport":"telegram","store":"","x":2020,"y":540,"wires":[["dbaee633.f735"]]},{"id":"7a9d94fd.5d2154","type":"function","z":"a73e6298.8dcc88","name":"Sende Payload als Nachricht","func":"var msg1 = {\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Der Speicher der Himbeere ist zu \" + msg.payload + \" % belegt. Die logs werden automatisch gelöscht. Bitte warte auf den automatischen Reboot.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1480,"y":560,"wires":[["109f6e74.62e562"]]},{"id":"344b2053.f0443","type":"switch","z":"a73e6298.8dcc88","name":"Switch:Disk > 50 %","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"50","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":570,"y":560,"wires":[["346ca400.6ad91c","99e88c08.f5587","8dd369fa.abc42"]]},{"id":"346ca400.6ad91c","type":"delay","z":"a73e6298.8dcc88","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"10","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":860,"y":560,"wires":[["7a9d94fd.5d2154"]]},{"id":"66949e4d.66f8c","type":"comment","z":"a73e6298.8dcc88","name":"Achtung, wenn Speicher über 50% belegt","info":"Dies soll dem Schutz der SD-Karte dienen.","x":618,"y":523,"wires":[]},{"id":"33bc53c5.54d3a4","type":"function","z":"a73e6298.8dcc88","name":"Sende Payload als Nachricht","func":"var msg1 = {\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Die Speicherbelegung der Himbeere ist beträgt jetzt \"+ msg.payload + \" %. Die logs wurden wohl gelöscht.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1480,"y":440,"wires":[["109f6e74.62e562"]]},{"id":"8487ee8a.7d73e","type":"switch","z":"a73e6298.8dcc88","name":"Switch:Disk < 11 %","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"11","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":570,"y":440,"wires":[["72954740.6af358"]]},{"id":"72954740.6af358","type":"delay","z":"a73e6298.8dcc88","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"day","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":850,"y":440,"wires":[["33bc53c5.54d3a4"]]},{"id":"a5ea5a56.0fc098","type":"comment","z":"a73e6298.8dcc88","name":"Info: Logs wurden gelöscht","info":"","x":566,"y":400,"wires":[]},{"id":"94aa2249.c76458","type":"chatbot-command","z":"a73e6298.8dcc88","name":"","command":"/status","x":530,"y":920,"wires":[["c3829b61.20457"]]},{"id":"f3a52449.ed8118","type":"chatbot-command","z":"a73e6298.8dcc88","name":"","command":"/shutdown","x":550,"y":1300,"wires":[["bac30299.34bf98","14a8f2a5.5cb3e5"]]},{"id":"226713da.34ab5c","type":"chatbot-command","z":"a73e6298.8dcc88","name":"","command":"/reboot","x":540,"y":1220,"wires":[["c97ef0f0.89011","5916e31d.c7bd8c"]]},{"id":"14a8f2a5.5cb3e5","type":"function","z":"a73e6298.8dcc88","name":"Sende Payload als Nachricht","func":"var msg2 = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Himbeere wird in 3 Sekunden heruntergefahren.\"} };\nreturn msg2;","outputs":1,"noerr":0,"x":1480,"y":1300,"wires":[["109f6e74.62e562"]]},{"id":"bac30299.34bf98","type":"delay","z":"a73e6298.8dcc88","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":820,"y":1340,"wires":[["f6efb480.4217e8"]]},{"id":"c97ef0f0.89011","type":"delay","z":"a73e6298.8dcc88","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":820,"y":1260,"wires":[["e92dc9b8.3e9e48"]]},{"id":"5916e31d.c7bd8c","type":"function","z":"a73e6298.8dcc88","name":"Sende Payload als Nachricht","func":"var msg2 = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Himbeere wird in 3 Sekunden neugestartet.\"} };\nreturn msg2;","outputs":1,"noerr":0,"x":1480,"y":1220,"wires":[["109f6e74.62e562"]]},{"id":"179ca551.250c0b","type":"exec","z":"a73e6298.8dcc88","command":"sudo apt-get clean","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1050,"y":1060,"wires":[[],[],[]]},{"id":"c0858ca.276387","type":"chatbot-command","z":"a73e6298.8dcc88","name":"","command":"/clean","x":530,"y":1020,"wires":[["179ca551.250c0b","590c8081.0fd46"]]},{"id":"590c8081.0fd46","type":"function","z":"a73e6298.8dcc88","name":"Sende Payload als Nachricht","func":"var msg2 = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Der Befehl sudo apt-get clean wurde ausgeführt.\"} };\nreturn msg2;","outputs":1,"noerr":0,"x":1480,"y":1020,"wires":[["109f6e74.62e562"]]},{"id":"b39e5698.a15dd","type":"chatbot-command","z":"a73e6298.8dcc88","name":"","command":"/remove","x":540,"y":860,"wires":[["99e88c08.f5587","19541118.2f7c07"]],"outputLabels":["/wz"]},{"id":"99e88c08.f5587","type":"exec","z":"a73e6298.8dcc88","command":"sudo rm /var/log/daemon.log /var/log/daemon.log.1 /var/log/syslog /var/log/syslog.1","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"löscht Logs","x":1030,"y":740,"wires":[["d009dc96.859b1"],[],[]]},{"id":"19541118.2f7c07","type":"function","z":"a73e6298.8dcc88","name":"Sende Payload als Nachricht","func":"var msg1 = {\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Die logs sollten gelöscht worden sein.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1480,"y":860,"wires":[["109f6e74.62e562"]]},{"id":"6c21d725.dc2bf","type":"chatbot-command","z":"a73e6298.8dcc88","name":"","command":"/stop","x":530,"y":1120,"wires":[["e0dc88de.29c128","5b2e0b59.d022bc"]]},{"id":"e1aa6ac8.bae778","type":"exec","z":"a73e6298.8dcc88","command":"node-red-stop","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1040,"y":1160,"wires":[[],[],[]]},{"id":"e0dc88de.29c128","type":"delay","z":"a73e6298.8dcc88","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":820,"y":1160,"wires":[["e1aa6ac8.bae778"]]},{"id":"5b2e0b59.d022bc","type":"function","z":"a73e6298.8dcc88","name":"Sende Payload als Nachricht","func":"var msg2 = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Node-Red wird in 3 Sekunden ausgeschaltet. Zuhause musst du's im Terminal wieder starten!\"} };\nreturn msg2;","outputs":1,"noerr":0,"x":1480,"y":1120,"wires":[["109f6e74.62e562"]]},{"id":"9ab61ff.7f6496","type":"inject","z":"a73e6298.8dcc88","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"x":2170,"y":720,"wires":[["2206cc70.afac1c"]]},{"id":"e33ab312.a98568","type":"function","z":"a73e6298.8dcc88","name":"online","func":"var msg2 = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"RPi-Control ist online. \" + msg.day+ \".\" + msg.month+\".\" + msg.year +\" \"+ msg.hours+\":\"  + msg.mins+\"Uhr\"} };\nreturn msg2;","outputs":1,"noerr":0,"x":2150,"y":640,"wires":[["109f6e74.62e562"]]},{"id":"dbaee633.f735","type":"chatbot-telegram-send","z":"a73e6298.8dcc88","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","track":false,"passThrough":false,"outputs":0,"x":2210,"y":540,"wires":[]},{"id":"8064739d.4b46c","type":"exec","z":"a73e6298.8dcc88","command":"sudo reboot","addpay":false,"append":"","useSpawn":"","timer":"","name":"Reboot","x":1020,"y":600,"wires":[["d009dc96.859b1"],[],[]]},{"id":"8dd369fa.abc42","type":"delay","z":"a73e6298.8dcc88","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":840,"y":600,"wires":[["8064739d.4b46c"]]},{"id":"22deee73.297a22","type":"inject","z":"a73e6298.8dcc88","name":"auto-reboot nach 2,5 Tagen","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"00 00 * * 3,0","once":false,"onceDelay":0.1,"x":160,"y":1760,"wires":[[]]},{"id":"90399033.a96188","type":"ui_button","z":"a73e6298.8dcc88","name":"","group":"f52cc8f2.2a5f98","order":3,"width":0,"height":0,"passthru":false,"label":"Reboot","tooltip":"","color":"","bgcolor":"","icon":"settings_backup_restore","payload":"Die Himbeere wird neugestartet.","payloadType":"str","topic":"","x":440,"y":1400,"wires":[["1eaf6d6e.e2e7a3","c97ef0f0.89011"]]},{"id":"b5ccc691.969f38","type":"ui_button","z":"a73e6298.8dcc88","name":"","group":"f52cc8f2.2a5f98","order":4,"width":0,"height":0,"passthru":false,"label":"Shutdown","color":"","bgcolor":"red","icon":"power_settings_new","payload":"Die Himbeere wird heruntergefahren.","payloadType":"str","topic":"","x":440,"y":1440,"wires":[["8c8a07da.09432","bac30299.34bf98"]]},{"id":"b5ebd77.25abda8","type":"ui_button","z":"a73e6298.8dcc88","name":"","group":"f52cc8f2.2a5f98","order":2,"width":0,"height":0,"passthru":false,"label":"clean Logs","color":"","bgcolor":"green","icon":"delete_forever","payload":"Die Logs wurden gelöscht.","payloadType":"str","topic":"","x":450,"y":800,"wires":[["99e88c08.f5587","459999a0.37a348"]]},{"id":"feed8b2b.6548e","type":"ui_chart","z":"a73e6298.8dcc88","name":"","group":"237bac70.b52b4c","order":5,"width":0,"height":0,"label":"Temperatur [°C]","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"55","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":true,"outputs":2,"x":1460,"y":100,"wires":[[],[]]},{"id":"3893acf7.92e624","type":"ui_chart","z":"a73e6298.8dcc88","name":"","group":"237bac70.b52b4c","order":4,"width":0,"height":0,"label":"Prozessorauslastung [%]","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":"24","removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1490,"y":140,"wires":[[],[]]},{"id":"b04f4524.6d0a18","type":"ui_chart","z":"a73e6298.8dcc88","name":"","group":"c37fe1e0.d9e61","order":0,"width":0,"height":0,"label":"Speicherplatzfüllung [%]","chartType":"line","legend":"false","xformat":"dd HH:mm","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1050,"y":300,"wires":[[],[]]},{"id":"da93a1e9.948b88","type":"ui_gauge","z":"a73e6298.8dcc88","name":"","group":"237bac70.b52b4c","order":2,"width":"3","height":"3","gtype":"gage","title":"CPU Temperatur","label":"","format":"{{value}} °C","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1030,"y":100,"wires":[]},{"id":"5bb3b015.503158","type":"ui_gauge","z":"a73e6298.8dcc88","name":"","group":"237bac70.b52b4c","order":1,"width":"0","height":"0","gtype":"gage","title":"Prozessorauslastung","label":"CPU","format":"{{value}} %","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1040,"y":140,"wires":[]},{"id":"83a2926b.12e63","type":"ui_gauge","z":"a73e6298.8dcc88","name":"","group":"237bac70.b52b4c","order":3,"width":"3","height":"3","gtype":"gage","title":"Arbeitsspeicher","label":"RAM","format":"{{msg.payload}} %","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1020,"y":220,"wires":[]},{"id":"1393de24.9ec402","type":"ui_gauge","z":"a73e6298.8dcc88","name":"","group":"c37fe1e0.d9e61","order":2,"width":0,"height":0,"gtype":"gage","title":"Belegter Speicherplatz","label":"","format":"{{value}} %","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1480,"y":300,"wires":[]},{"id":"459999a0.37a348","type":"ui_toast","z":"a73e6298.8dcc88","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"Logs wurden geloescht","x":850,"y":800,"wires":[]},{"id":"1eaf6d6e.e2e7a3","type":"ui_toast","z":"a73e6298.8dcc88","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"Die Himbeere wird neugestartet.","x":870,"y":1400,"wires":[]},{"id":"8c8a07da.09432","type":"ui_toast","z":"a73e6298.8dcc88","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"Die Himbeere wird heruntergefahren.","x":890,"y":1440,"wires":[]},{"id":"26c3965a.945022","type":"smooth","z":"a73e6298.8dcc88","name":"","property":"payload","action":"mean","count":"1","round":"1","mult":"single","x":680,"y":220,"wires":[["406eeedd.5f8bd"]]},{"id":"72f02dd9.d41bcc","type":"exec","z":"a73e6298.8dcc88","command":"sudo shutdown -h now","addpay":false,"append":"","useSpawn":"","timer":"","name":"Shutdown","x":1200,"y":60,"wires":[[],[],[]]},{"id":"ea01f663.6214b8","type":"switch","z":"a73e6298.8dcc88","name":"T > 60 °C","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"65","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":800,"y":20,"wires":[["634c6b7f.0d243c","46d65100.a29f7"]]},{"id":"634c6b7f.0d243c","type":"delay","z":"a73e6298.8dcc88","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1020,"y":60,"wires":[["72f02dd9.d41bcc"]]},{"id":"46d65100.a29f7","type":"function","z":"a73e6298.8dcc88","name":"Sende Payload als Nachricht","func":"var msg1 = {\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Himbeere ist überhitzt (>65 °C) und schaltet sich gleich aus!\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1480,"y":20,"wires":[["109f6e74.62e562"]]},{"id":"a186b5ee.6d0d78","type":"ui_chart","z":"a73e6298.8dcc88","name":"","group":"c37fe1e0.d9e61","order":0,"width":0,"height":0,"label":"Arbeitsspeicher","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"Warte auf Daten","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1460,"y":220,"wires":[[],[]]},{"id":"db5718b8.d827f","type":"openweathermap","z":"1f0f525d.8043ce","name":"Wetter jetzt","wtype":"current","lon":"10.6847","lat":"53.8664","city":"","country":"","language":"de","x":270,"y":540,"wires":[["3357b326.4e86bc","c236a203.e9ca38","7a4d698d.72c0e","b6ac15b0.d158a","fbacb312.a44e5","7edacdf.2cc4234","7eefad6c.bd66cc","85080df3.8a3ff","785d1cc7.44e484","d8bbcc40.eb0958","7ad02718.9feed8","1ce36dc6.bec43a","d53863c0.6d8398","50aefd7a.2aeb84"]]},{"id":"3e67e709.019208","type":"inject","z":"1f0f525d.8043ce","name":"","topic":"","payload":"","payloadType":"date","repeat":"1200","crontab":"","once":true,"onceDelay":"1","x":110,"y":540,"wires":[["db5718b8.d827f"]]},{"id":"fbacb312.a44e5","type":"debug","z":"1f0f525d.8043ce","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":330,"y":500,"wires":[]},{"id":"3357b326.4e86bc","type":"function","z":"1f0f525d.8043ce","name":"extract tempc","func":"msg.payload = Number(msg.payload.tempc);\nvar topic=msg.topic;\nmsg.topic=\"Temperatur [°C]\";\ndelete msg.location;\ndelete msg.data;\n\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":860,"wires":[["5a3fd184.58487","110b06a2.fade89","3db4aa41.eb182e","a609899.58d4df8","f4cdba25.8966f8"]]},{"id":"c236a203.e9ca38","type":"function","z":"1f0f525d.8043ce","name":"extract humidity","func":"msg.payload = Number(msg.payload.humidity);\nvar topic=msg.topic;\nmsg.topic=\"Luftfeuchtigkeit [%]\";\ndelete msg.location;\ndelete msg.data;\n\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":900,"wires":[["a23bf8fe.0b3308","f1d6d336.c8fb48","451dba91.9385d4","7a3feaf5.5dc894"]]},{"id":"7a4d698d.72c0e","type":"function","z":"1f0f525d.8043ce","name":"extract windspeed [km/h]","func":"msg.payload = Number((msg.payload.windspeed*3.6).toFixed(2));\nvar topic=msg.topic;\nmsg.topic=\"Windgeschwindigkeit [km/h]\";\n\ndelete msg.location;\ndelete msg.data;\n\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":1100,"wires":[["ff0e937.f14197"]]},{"id":"b6ac15b0.d158a","type":"function","z":"1f0f525d.8043ce","name":"extract pressure","func":"msg.payload = Number(msg.payload.pressure);\nvar topic = msg.topic;\nmsg.topic = \"Luftdruck [hPa]\";\ndelete msg.location;\ndelete msg.data;\n\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":980,"wires":[["5843e7dd.fc341","f3485590.1d37e8","2ca5dc9c.2e362c"]]},{"id":"861c5d20.59b7f","type":"comment","z":"1f0f525d.8043ce","name":"Graphen aus OWM","info":"","x":990,"y":840,"wires":[]},{"id":"7edacdf.2cc4234","type":"function","z":"1f0f525d.8043ce","name":"extract clouds","func":"msg.payload = Number(msg.payload.clouds);\nvar topic=msg.topic;\nmsg.topic=\"Wolken [%]\";\ndelete msg.location;\ndelete msg.data;\n\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":940,"wires":[["f1d6d336.c8fb48"]]},{"id":"f1d6d336.c8fb48","type":"ui_chart","z":"1f0f525d.8043ce","name":"","group":"25e6b1aa.2c2116","order":3,"width":0,"height":0,"label":"Wolken & Luftfeuchtigkeit [%]","chartType":"line","legend":"true","xformat":"HH:mm:ss","interpolate":"linear","nodata":"Daten werden alle 20 Minuten geladen.","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#c0c0c0","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1070,"y":920,"wires":[[],[]]},{"id":"5a3fd184.58487","type":"ui_chart","z":"1f0f525d.8043ce","name":"","group":"25e6b1aa.2c2116","order":2,"width":0,"height":0,"label":"Temperatur [°C]","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"Daten werden alle 20 Minuten geladen.","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#ff4040","#1f77b4","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1020,"y":880,"wires":[[],[]]},{"id":"2563b057.1e10c8","type":"change","z":"1f0f525d.8043ce","name":". to ,","rules":[{"t":"change","p":"payload.tempc","pt":"msg","from":".","fromt":"str","to":",","tot":"str"},{"t":"change","p":"payload.humidity","pt":"msg","from":".","fromt":"str","to":",","tot":"str"},{"t":"change","p":"payload.windspeed","pt":"msg","from":".","fromt":"str","to":",","tot":"str"},{"t":"change","p":"payload.pressure","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1210,"y":20,"wires":[["3b29010e.b87896"]]},{"id":"d1a9798.79cf308","type":"comment","z":"1f0f525d.8043ce","name":"Dashboard Text","info":"","x":980,"y":480,"wires":[]},{"id":"b4d66594.41bd5","type":"comment","z":"1f0f525d.8043ce","name":"Regenwarnung","info":"","x":360,"y":160,"wires":[]},{"id":"840d50d8.7e9748","type":"debug","z":"1f0f525d.8043ce","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":430,"y":200,"wires":[]},{"id":"bf3a532.64714b","type":"chatbot-telegram-send","z":"3eae6dd9.5cba02","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","track":false,"passThrough":false,"outputs":0,"x":970,"y":440,"wires":[]},{"id":"13e48717.be8711","type":"chatbot-conversation","z":"3eae6dd9.5cba02","name":"","chatId":"173173012","transport":"telegram","store":"","x":960,"y":400,"wires":[["bf3a532.64714b"]]},{"id":"2f10e173.627886","type":"function","z":"3eae6dd9.5cba02","name":"convert Text input","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : msg.payload} };\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":400,"wires":[["13e48717.be8711"]]},{"id":"f07644fc.b338e8","type":"change","z":"3eae6dd9.5cba02","name":"notification","rules":[{"t":"set","p":"payload","pt":"msg","to":"Nachricht gesendet","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":480,"wires":[["6a5cedfe.5de29c"]]},{"id":"e83a253e.7798f","type":"ui_text_input","z":"3eae6dd9.5cba02","name":"UI-Text input","label":"Jonas mit Text nerven:","group":"50c9e5a0.afe2bc","order":3,"width":0,"height":0,"passthru":true,"mode":"text","delay":"0","topic":"","x":110,"y":400,"wires":[["2f10e173.627886","f07644fc.b338e8","e3893792.fe51a8"]]},{"id":"6a5cedfe.5de29c","type":"ui_toast","z":"3eae6dd9.5cba02","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"Nachricht gesendet","x":690,"y":480,"wires":[]},{"id":"e3893792.fe51a8","type":"ui_audio","z":"3eae6dd9.5cba02","name":"","group":"50c9e5a0.afe2bc","voice":"de-DE","always":"","x":500,"y":440,"wires":[]},{"id":"776b6e7b.3f0eb","type":"chatbot-command","z":"57b8c30b.db8ba4","name":"","command":"/wiki","x":175,"y":1140,"wires":[["5a76cda6.5459e4"]]},{"id":"5a76cda6.5459e4","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Zufälliger Wikiartikel: https://de.wikipedia.org/wiki/Spezial:Zuf%C3%A4llige_Seite\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1200,"y":1140,"wires":[["41d616e6.9b9ec8"]]},{"id":"2206cc70.afac1c","type":"function","z":"a73e6298.8dcc88","name":"timeConvert","func":"if ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\nvar dt = new Date(msg.timestamp);\nvar msg = {\n\t'month':\tdt.getMonth() + 1,\n\t'day':\t\tdt.getDate(),\n\t'year':\t\tdt.getFullYear(),\n\t'hours':\tdt.getHours(),\n\t'mins':\t\tdt.getMinutes(),\n\t'msecs':\tdt.getMilliseconds()\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":2170,"y":680,"wires":[["e33ab312.a98568"]]},{"id":"b1aa80b1.8bce","type":"function","z":"f5f1b719.8a699","name":"timeConvert","func":"if ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\nvar dt = new Date(msg.timestamp);\nvar msg = {\n\t'month':\tdt.getMonth() + 1,\n\t'day':\t\tdt.getDate(),\n\t'year':\t\tdt.getFullYear(),\n\t'hours':\tdt.getHours(),\n\t'mins':\t\tdt.getMinutes(),\n\t'msecs':\tdt.getMilliseconds()\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":3021.25,"y":803.75,"wires":[["1efe00d5.aef15f"]]},{"id":"d8d7e309.1551a","type":"function","z":"57b8c30b.db8ba4","name":"timeConvert","func":"if ( !msg.timestamp ) msg.timestamp = Math.round(+new Date());\n\nvar dt = new Date(msg.timestamp);\nvar msg = {\n\t'month':\tdt.getMonth() + 1,\n\t'day':\t\tdt.getDate(),\n\t'year':\t\tdt.getFullYear(),\n\t'hours':\tdt.getHours(),\n\t'mins':\t\tdt.getMinutes(),\n\t'msecs':\tdt.getMilliseconds()\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":1870,"y":940,"wires":[["d5914a1d.8b012"]]},{"id":"8011f437.98e1d","type":"inject","z":"352c0898.281f8","name":"Location (Greifswald)","topic":"Home","payload":"54.09311,13.38786","payloadType":"str","repeat":"180","crontab":"","once":true,"onceDelay":"","x":200,"y":140,"wires":[[]]},{"id":"21291097.7a106","type":"function","z":"352c0898.281f8","name":"make Weather object","func":"//parse forecast.io message\n\nvar weather = JSON.parse(msg.payload); \n\nvar data = weather.minutely.data;\nvar timeToRain = -1;\n\nvar i=1;\nfor (var i=0 ; i< data.length;i++) {\n\tif (data[i].precipProbability > 0.25) { weather.nextRain = parseInt(data[i].time); break; }\n}\n\n//reduce size of object\ndelete weather.minutely;\ndelete weather.hourly;\ndelete weather.daily;\ndelete weather.flags;\n\nif (weather.nextRain != null) {\n\tvar t =( weather.nextRain - parseInt(weather.currently.time) );\n\nif (t<0){t=0}\nelse{t = t/60;}\ntimeToRain = t;\n}\nvar msg2 = { payload:timeToRain};\nreturn msg2;","outputs":"1","x":596.9999389648438,"y":198,"wires":[["d0d17416.d798e8","bdb2eaf0.a3c58"]]},{"id":"bdb2eaf0.a3c58","type":"debug","z":"352c0898.281f8","name":"","complete":true,"x":856.8333129882812,"y":132.5,"wires":[]},{"id":"d0d17416.d798e8","type":"mqtt out","z":"352c0898.281f8","name":"Minutes to Rain","topic":"weather/forecast/minsToRain","broker":"","x":845,"y":193,"wires":[]},{"id":"9ab4d851.ab6b98","type":"mqtt in","z":"352c0898.281f8","name":"Minutes To Rain","topic":"weather/forecast/minsToRain","broker":"","x":232,"y":297,"wires":[["cca8ce2b.579c"]]},{"id":"cca8ce2b.579c","type":"function","z":"352c0898.281f8","name":"Is weather unsafe?","func":"// console.log(msg.topic, msg.payload, msg.qos, msg.retain);\n// context = {};\nvar unsafe=0;\nvar minsToRain = parseInt(msg.payload);\nif ((minsToRain >=0) && (minsToRain < 46) )\n{\n   unsafe=1;\n}\nmsg.payload=unsafe;\nreturn msg;","outputs":"1","x":479,"y":297,"wires":[["2b138bb9.3ce0fc"]]},{"id":"2b138bb9.3ce0fc","type":"mqtt out","z":"352c0898.281f8","name":"Weather unsafe","topic":"weather/unsafe","broker":"","x":737,"y":298,"wires":[]},{"id":"837689b0.e544c8","type":"function","z":"352c0898.281f8","name":"Rain Warning Colour","func":"// The received message is stored in 'msg'\n// It will have at least a 'payload' property:\n//   console.log(msg.payload);\n// The 'context' object is available to store state\n// between invocations of the function\n//   context = {};\n\n//if weather status switched off end flow now\nif(context.global.weatherStatus == \"0\")\n{\n   return null;\n}\nelse\n{\n\tvar red =0;\n\tvar blue =0;\n\tvar green =0;\n\t\n\tvar minsToRain = msg.payload;\n\t\n\tif (minsToRain == -1 || minsToRain > 45)\n\t{\n\t\tgreen=255;\n\t}\n\telse if (minsToRain == 0)\n\t{\n\t   red =255;\n\t}\n\telse\n\t{\n\t\t\tblue = (255 - (255 - (minsToRain*5)));\n\t        red = (255 - (minsToRain*5));\n\t        green =0;\n\t}\n\t\n\tmsg.payload = red + \",\" + green + \",\" + blue;\n}\nreturn msg;","outputs":1,"x":511.25,"y":452.75,"wires":[["7239b640.b2296","3694e111.5309ce"]]},{"id":"7239b640.b2296","type":"debug","z":"352c0898.281f8","name":"rgb out","active":true,"complete":"false","x":791.25,"y":500.75,"wires":[]},{"id":"485bc4a2.b05dfc","type":"mqtt in","z":"352c0898.281f8","name":"Minutes To Rain","topic":"weather/forecast/minsToRain","broker":"","x":235.25,"y":454.75,"wires":[["837689b0.e544c8"]]},{"id":"3694e111.5309ce","type":"mqtt out","z":"352c0898.281f8","name":"Ambient Light Lounge 1","topic":"home/ambient/lounge/1","broker":"","x":844,"y":410,"wires":[]},{"id":"3b6ce876.886e","type":"debug","z":"352c0898.281f8","name":"","active":true,"complete":"false","x":567,"y":137,"wires":[]},{"id":"8ca53dce.49906","type":"comment","z":"352c0898.281f8","name":"Rain Forecaster","info":"","x":210,"y":93,"wires":[]},{"id":"947049b3.c2d9e","type":"inject","z":"33893690.3e3e02","name":"","topic":"","payload":"","repeat":"","crontab":"*/30 * * * *","once":false,"x":230,"y":100,"wires":[["ee3c42fd.be4f88"]]},{"id":"ee3c42fd.be4f88","type":"http request","z":"33893690.3e3e02","name":"","method":"GET","url":"http://www.swpc.noaa.gov/wingkp/wingkp_list.txt","x":354.99999141693115,"y":156,"wires":[["c225d85.c593b28"]]},{"id":"7bd535b9.d070dc","type":"debug","z":"33893690.3e3e02","name":"","active":true,"complete":"false","x":741.0000371932983,"y":100.99999237060547,"wires":[]},{"id":"c225d85.c593b28","type":"function","z":"33893690.3e3e02","name":"parse NOAA kp log","func":"var lat = 54.1;\n\n// first output is the current kp value\n// second is whether it is likely to be visible from your latitude\n// ( on a clear night etc etc )\n\nvar lines = msg.payload.split(\"\\n\");\nvar last = lines[lines.length - 2];\nlast = last.replace(/\\s{2,}/g, ' ');\nvar bits = last.split(\" \");\nvar status = Number(bits[4]);\nvar kp = Number(bits[bits.length - 1]);\n\nvar visible = false;\nvar edge = 3;\nif (lat >= 60) edge = 3;\nelse edge = (60-lat)/2 + 3;\n\nif (kp > edge) visible = true;\nif (lat < 45) visible = false;\n\nmsg = { payload:kp };\nmsg2 = { payload:visible };\n\nif (status <= 1) return [msg,msg2];\nreturn null;","outputs":"2","noerr":0,"x":515.0000104904175,"y":99.99999237060547,"wires":[["7bd535b9.d070dc"],["df65cf1d.fa0ad"]]},{"id":"ad7d4482.c6448","type":"comment","z":"33893690.3e3e02","name":"Idea shamelessly copied from http://blog.riyas.org/2014/01/raspberry-pi-as-northern-light-forcast.html?m=1","info":"","x":501.9999876022339,"y":57.99997806549072,"wires":[]},{"id":"df65cf1d.fa0ad","type":"debug","z":"33893690.3e3e02","name":"","active":true,"complete":"false","x":743.0000371932983,"y":144.99998569488525,"wires":[]},{"id":"73ae4e09.abf138","type":"inject","z":"4a21bbc6.fc693c","name":"Get forecast","topic":"","payload":"developers-API-key/forecast/q/pws:IFINNING3.xml","payloadType":"string","repeat":"","crontab":"00 12 * * *","once":false,"x":180,"y":100,"wires":[[]]},{"id":"26c7d488.e13a54","type":"comment","z":"4a21bbc6.fc693c","name":"Frost Warnings","info":"","x":158,"y":57,"wires":[]},{"id":"b33127f2.8629f8","type":"mqtt out","z":"4a21bbc6.fc693c","name":"Weather Forecast","topic":"weather/forecast","broker":"","x":690,"y":100,"wires":[]},{"id":"d0139ea7.a6479","type":"mqtt in","z":"4a21bbc6.fc693c","name":"Weather Forecast","topic":"weather/forecast","broker":"","x":174,"y":145,"wires":[[]]},{"id":"cb52d454.416a28","type":"debug","z":"4a21bbc6.fc693c","name":"","active":true,"complete":false,"x":844,"y":126,"wires":[]},{"id":"4b5fd137.30394","type":"function","z":"4a21bbc6.fc693c","name":"Temp Calcs","func":"var weatherDATA = msg.payload.response.forecast[0].simpleforecast[0].forecastdays[0].forecastday[0];\nvar lowC = weatherDATA.low[0].celsius[0];\nvar wind = weatherDATA.avewind[0].mph;\nvar cloud = weatherDATA.icon[0];\nvar kvalue = 0;\n\n//This section calculates the kvalue\nif (wind>10)  {\n\tif ((cloud == \"clear\")||(cloud == \"partlycloudy\"))  {\n\tkvalue = 3;\n\t}\n\t\telse {\n\t\tkvalue = 2;\n\t\t}\n}\n\nelse if ((wind>5) && (wind<=10)) {\n\tif ((cloud == \"clear\")||(cloud == \"partlycloudy\"))  {\n\tkvalue = 4;\n\t}\n\t\telse {\n\t\tkvalue = 2;\n\t\t}\n}\n\nelse  {\n\tif ((cloud == \"clear\")||(cloud == \"partlycloudy\"))  {\n\tkvalue = 5;\n\t}\n\t\telse {\n\t\tkvalue = 3;\n\t\t}\n}\n\n//Deduct the kvalue from lowtemp to get grasstemp\nvar grasstemp = ((lowC) - (kvalue));\n\n//Check if Grass Temp or Air Temp is zero C or below\nif ((lowC <= 0)||(grasstemp <= 0)) {\n//If so, then send out an alert\nmsg.payload= ((\"Air temp forecast \") + (lowC) + (\"C, Grass temp forecast \" ) + (grasstemp) + (\"C, predicted tonight.\")) ;\nreturn [msg];\n}","outputs":1,"x":644,"y":145,"wires":[["cb52d454.416a28"]]},{"id":"e673f425.ef34a","type":"memory","z":"a73e6298.8dcc88","name":"","relativeValues":true,"totalMemory":false,"usedMemory":false,"freeMemory":false,"availableMemory":true,"activeMemory":true,"buffcacheMemory":false,"freeAvailableMemory":false,"swapTotalMemory":false,"swapUsedMemory":false,"swapFreeMemory":false,"x":540,"y":220,"wires":[["26c3965a.945022"]]},{"id":"406eeedd.5f8bd","type":"switch","z":"a73e6298.8dcc88","name":"","property":"payload","propertyType":"msg","rules":[{"t":"lt","v":"100","vt":"str"},{"t":"eq","v":"100","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":850,"y":220,"wires":[["83a2926b.12e63","a186b5ee.6d0d78"],[]]},{"id":"c5ea6ca3.c18f48","type":"exec","z":"a73e6298.8dcc88","command":"free | grep Mem | awk '{print (100*($4+$6+$7)/$2)}'","addpay":false,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"Free Memory","x":340,"y":220,"wires":[[],[],[]]},{"id":"ff0e937.f14197","type":"smooth","z":"1f0f525d.8043ce","name":"","property":"payload","action":"mean","count":"1","round":"1","mult":"single","x":760,"y":1100,"wires":[["f18a75ad.615f88","e71dced9.4e9538","35f4d54e.f003e2"]]},{"id":"d8bbcc40.eb0958","type":"function","z":"1f0f525d.8043ce","name":"extract rain","func":"msg.payload = Number(msg.data.rain[\"3h\"||\"1h\"]);\nvar topic=msg.topic;\nmsg.topic=\"Niederschlag [mm]\";\ndelete msg.location;\ndelete msg.data;\n\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":1020,"wires":[["77532bbc.3be7dc","625d48d4.93f3e"]]},{"id":"77532bbc.3be7dc","type":"ui_chart","z":"1f0f525d.8043ce","name":"","group":"25e6b1aa.2c2116","order":4,"width":0,"height":0,"label":"Niederschlag [mm]","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"Daten werden alle 20 Minuten geladen.","dot":false,"ymin":"0","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1030,"y":1020,"wires":[[],[]]},{"id":"7ad02718.9feed8","type":"function","z":"1f0f525d.8043ce","name":"extract sunrise","func":"msg.payload = Number(msg.payload.sunrise)*1000;\n\nvar topic=msg.topic;\nmsg.topic=\"Sonnenaufgang\";\ndelete msg.location;\ndelete msg.data;\n\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":1260,"wires":[["573ff7d0.c7931"]]},{"id":"1ce36dc6.bec43a","type":"function","z":"1f0f525d.8043ce","name":"extract sunset","func":"msg.payload = Number(msg.payload.sunset)*1000;\nvar topic=msg.topic;\nmsg.topic=\"Sonnenuntergang\";\ndelete msg.location;\ndelete msg.data;\n\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":1340,"wires":[["5f411118.41a908"]]},{"id":"573ff7d0.c7931","type":"moment","z":"1f0f525d.8043ce","name":"","topic":"","input":"payload","inputType":"msg","inTz":"Europe/Berlin","adjAmount":0,"adjType":"days","adjDir":"add","format":"object","locale":"C","output":"payload","outputType":"msg","outTz":"Europe/Berlin","x":780,"y":1240,"wires":[["235e7355.25302c"]]},{"id":"235e7355.25302c","type":"function","z":"1f0f525d.8043ce","name":"extract hh+mm/60","func":"msg.payload = Number((msg.payload.hours+(msg.payload.minutes/60)).toFixed(2));\n\nreturn msg;","outputs":1,"noerr":0,"x":1010,"y":1240,"wires":[["e40106b0.16fac8","4f49a34.4d1f65c"]]},{"id":"e40106b0.16fac8","type":"debug","z":"1f0f525d.8043ce","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1230,"y":1300,"wires":[]},{"id":"9a5ebcee.5dbe68","type":"http request","z":"1f0f525d.8043ce","name":"","method":"GET","url":"https://docs.google.com/forms/d/e/1FAIpQLScCx3Ue2GpB0LAwEvQKvQlRRyIKZWdUcCcSWopBAdhrPxv_Eg//formResponse?entry.1823024709={{payload}}","tls":"","x":1690,"y":860,"wires":[[]]},{"id":"4e64b324.081c34","type":"comment","z":"1f0f525d.8043ce","name":"Google-Daten","info":"https://docs.google.com/forms/d/e/1FAIpQLSe3cOoDqNwfl7ZYAc6vCDZkUSii6ULnF4TSMHgwTC5moEoZXQ/viewform?usp=sf_link\n\nTemperatur\n540525783\n\nHOW TO\nhttps://www.open-electronics.org/how-send-data-from-arduino-to-google-docs-spreadsheet/","x":1690,"y":829,"wires":[]},{"id":"3db4aa41.eb182e","type":"delay","z":"1f0f525d.8043ce","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1421.0832977294922,"y":865.9999847412109,"wires":[["9a5ebcee.5dbe68"]]},{"id":"6131d72a.ff7b58","type":"http request","z":"1f0f525d.8043ce","name":"","method":"GET","url":"https://docs.google.com/forms/d/e/1FAIpQLScCx3Ue2GpB0LAwEvQKvQlRRyIKZWdUcCcSWopBAdhrPxv_Eg/formResponse?entry.217278396={{payload}}","tls":"","x":1695,"y":901,"wires":[[]]},{"id":"451dba91.9385d4","type":"delay","z":"1f0f525d.8043ce","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1426.0832977294922,"y":906.9999847412109,"wires":[["6131d72a.ff7b58"]]},{"id":"492f0c9f.80f37c","type":"http request","z":"1f0f525d.8043ce","name":"","method":"GET","url":"https://docs.google.com/forms/d/e/1FAIpQLScCx3Ue2GpB0LAwEvQKvQlRRyIKZWdUcCcSWopBAdhrPxv_Eg/formResponse?entry.1772854754={{payload}}","tls":"","x":1695,"y":941,"wires":[[]]},{"id":"2ca5dc9c.2e362c","type":"delay","z":"1f0f525d.8043ce","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1426.0832977294922,"y":946.9999847412109,"wires":[["492f0c9f.80f37c"]]},{"id":"35ed10ae.a71288","type":"http request","z":"1f0f525d.8043ce","name":"","method":"GET","url":"https://docs.google.com/forms/d/e/1FAIpQLScCx3Ue2GpB0LAwEvQKvQlRRyIKZWdUcCcSWopBAdhrPxv_Eg/formResponse?entry.376198577={{payload}}","tls":"","x":1695,"y":981,"wires":[[]]},{"id":"35f4d54e.f003e2","type":"delay","z":"1f0f525d.8043ce","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1426.0832977294922,"y":986.9999847412109,"wires":[["35ed10ae.a71288"]]},{"id":"1373b36a.fc856d","type":"http request","z":"1f0f525d.8043ce","name":"","method":"GET","url":"https://docs.google.com/forms/d/e/1FAIpQLScCx3Ue2GpB0LAwEvQKvQlRRyIKZWdUcCcSWopBAdhrPxv_Eg/formResponse?entry.647112640}={{payload}}","tls":"","x":1695,"y":1021,"wires":[[]]},{"id":"625d48d4.93f3e","type":"delay","z":"1f0f525d.8043ce","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1426.0832977294922,"y":1026.999984741211,"wires":[["1373b36a.fc856d"]]},{"id":"83eeb9ae.013cf","type":"exec","z":"a73e6298.8dcc88","command":"sudo apt-get update","addpay":false,"append":"","useSpawn":"true","timer":"","oldrc":false,"name":"","x":1060,"y":660,"wires":[["d009dc96.859b1"],[],[]]},{"id":"8d3e5667.3613a8","type":"inject","z":"a73e6298.8dcc88","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":820,"y":660,"wires":[["83eeb9ae.013cf"]]},{"id":"5226531a.b6368c","type":"worldmap","z":"3cf84bba.5bc2d4","name":"","lat":"54.09594","lon":"13.38227","zoom":"10","layer":"OSM","cluster":"0","maxage":"","usermenu":"show","layers":"show","panit":"false","panlock":"false","zoomlock":"false","path":"/worldmap","x":580,"y":480,"wires":[]},{"id":"f39f95af.a4856","type":"inject","z":"3cf84bba.5bc2d4","name":"","topic":"test","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":520,"wires":[["f3c8e463.f5d748"]]},{"id":"f3c8e463.f5d748","type":"change","z":"3cf84bba.5bc2d4","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"name:\"käse\", lat:54.09705, lon:13.47078, icon:bathtub","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":480,"wires":[["5226531a.b6368c","175955fa.521892"]]},{"id":"175955fa.521892","type":"debug","z":"3cf84bba.5bc2d4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":540,"y":580,"wires":[]},{"id":"d53863c0.6d8398","type":"function","z":"1f0f525d.8043ce","name":"extract snow","func":"msg.payload = Number(msg.data.snow[\"3h\"||\"1h\"]);\nvar topic=msg.topic;\nmsg.topic=\"Schnee [mm]\";\ndelete msg.location;\ndelete msg.data;\n\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":1060,"wires":[["77532bbc.3be7dc"]]},{"id":"b9af15ab.06f768","type":"debug","z":"1f0f525d.8043ce","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1790,"y":140,"wires":[]},{"id":"4f49a34.4d1f65c","type":"delay","z":"1f0f525d.8043ce","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"6","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1220,"y":1240,"wires":[["68440ad.98ef274","acd840e2.7706d8"]]},{"id":"5f411118.41a908","type":"moment","z":"1f0f525d.8043ce","name":"","topic":"","input":"payload","inputType":"msg","inTz":"Europe/Berlin","adjAmount":0,"adjType":"days","adjDir":"add","format":"object","locale":"C","output":"payload","outputType":"msg","outTz":"Europe/Berlin","x":780,"y":1360,"wires":[["85dadaa5.80c51"]]},{"id":"85dadaa5.80c51","type":"function","z":"1f0f525d.8043ce","name":"extract hh+mm/60","func":"msg.payload = Number((msg.payload.hours+(msg.payload.minutes/60)).toFixed(2));\n\nreturn msg;","outputs":1,"noerr":0,"x":1010,"y":1360,"wires":[["91c8476a.8c3e38","e40106b0.16fac8"]]},{"id":"91c8476a.8c3e38","type":"delay","z":"1f0f525d.8043ce","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"6","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1220,"y":1360,"wires":[["e22e4e35.2f1e","422e4f7a.bd2298"]]},{"id":"b95875c1.90e74","type":"smooth","z":"f5f1b719.8a699","name":"","property":"payload","action":"mean","count":"5","round":"2","mult":"single","x":420,"y":3020,"wires":[["4a7c500e.8aaf98"]]},{"id":"62e7bf54.a8cc","type":"smooth","z":"f5f1b719.8a699","name":"","property":"payload","action":"mean","count":"5","round":"2","mult":"single","x":430,"y":3280,"wires":[["6e78fe64.1af5a"]]},{"id":"84c14590.c615","type":"smooth","z":"a73e6298.8dcc88","name":"","property":"payload","action":"mean","count":"5","round":"2","mult":"single","x":1200,"y":100,"wires":[["feed8b2b.6548e"]]},{"id":"d009dc96.859b1","type":"ui_text","z":"a73e6298.8dcc88","group":"f52cc8f2.2a5f98","order":0,"width":"6","height":"3","name":"","label":"Console output:","format":"{{msg.payload}}","layout":"col-center","x":1520,"y":660,"wires":[]},{"id":"68440ad.98ef274","type":"persist in","z":"1f0f525d.8043ce","name":"sunrise_persist","storageNode":"759eee4b.556d7","x":1720,"y":1240,"wires":[]},{"id":"e22e4e35.2f1e","type":"persist in","z":"1f0f525d.8043ce","name":"sunset_persist","storageNode":"e147afdd.1b40d","x":1720,"y":1360,"wires":[]},{"id":"c64e1603.32aac","type":"persist out","z":"1f0f525d.8043ce","name":"sunrise_persist","storageNode":"759eee4b.556d7","x":1500,"y":1180,"wires":[["acd840e2.7706d8"]]},{"id":"bfd9cdc5.9a9a7","type":"persist out","z":"1f0f525d.8043ce","name":"sunset_persist","storageNode":"e147afdd.1b40d","x":1500,"y":1420,"wires":[["422e4f7a.bd2298"]]},{"id":"f4735a0e.3adbe8","type":"ui_text","z":"1f0f525d.8043ce","group":"230b31d5.91ae6e","order":6,"width":0,"height":0,"name":"","label":"letzte Werte vor:","format":"{{msg.time}}","layout":"row-spread","x":1020,"y":720,"wires":[]},{"id":"50aefd7a.2aeb84","type":"moment","z":"1f0f525d.8043ce","name":"","topic":"","input":"time","inputType":"msg","inTz":"Europe/Berlin","adjAmount":0,"adjType":"days","adjDir":"add","format":"timeAgo","locale":"C","output":"time","outputType":"msg","outTz":"Europe/Berlin","x":600,"y":620,"wires":[["f4735a0e.3adbe8"]]},{"id":"422e4f7a.bd2298","type":"ui_chart","z":"1f0f525d.8043ce","name":"","group":"910e0d1c.ac167","order":2,"width":0,"height":0,"label":"Sonnenuntergang","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"Daten werden alle 20 Minuten geladen.","dot":false,"ymin":"","ymax":"","removeOlder":"48","removeOlderPoints":"","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1520,"y":1380,"wires":[[],[]]},{"id":"acd840e2.7706d8","type":"ui_chart","z":"1f0f525d.8043ce","name":"","group":"910e0d1c.ac167","order":1,"width":0,"height":0,"label":"Sonnenaufgang","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"Daten werden alle 20 Minuten geladen.","dot":false,"ymin":"","ymax":"","removeOlder":"48","removeOlderPoints":"","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1500,"y":1220,"wires":[[],[]]},{"id":"26ab31af.75da6e","type":"mqtt out","z":"343e6461.3afb5c","name":"","topic":"garten/pump","qos":"","retain":"","broker":"","x":4910,"y":580,"wires":[]},{"id":"ed8bcb3e.06a04","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"garten/soilmoist","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":130,"y":3900,"wires":[["e84c7a34.f8cde","d6b0473e.d962d"]]},{"id":"b0852747.0b8178","type":"range","z":"f5f1b719.8a699","minin":"3700","maxin":"2130","minout":"0","maxout":"100","action":"scale","round":true,"property":"payload","name":"map 0 to 100 %","x":530,"y":3960,"wires":[["13349315.845fad","a8c690aa.58cb18","caf56472.ea8f9","10820ff3.07f218"]]},{"id":"67e27976.3ad7c8","type":"ui_gauge","z":"f5f1b719.8a699","name":"gauge","group":"6271eae2.2d3f34","order":8,"width":0,"height":0,"gtype":"gage","title":"Bodenfeuchte","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#c10000","#467e01","#00ae00"],"seg1":"25","seg2":"75","x":1120,"y":3880,"wires":[]},{"id":"d8936a0a.8b0e9","type":"ui_text","z":"f5f1b719.8a699","group":"6271eae2.2d3f34","order":9,"width":"3","height":"1","name":"","label":"mean","format":"{{msg.payload}} %","layout":"row-left","x":1120,"y":3960,"wires":[]},{"id":"a8c690aa.58cb18","type":"smooth","z":"f5f1b719.8a699","name":"mean","property":"payload","action":"mean","count":"5","round":"0","mult":"single","x":720,"y":3960,"wires":[["d8936a0a.8b0e9"]]},{"id":"caf56472.ea8f9","type":"smooth","z":"f5f1b719.8a699","name":"SD","property":"payload","action":"sd","count":"5","round":"2","mult":"single","x":720,"y":4000,"wires":[["c3b01af4.d06188"]]},{"id":"3859792c.f7813e","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"6271eae2.2d3f34","order":7,"width":0,"height":0,"label":"Bodenfeuchtigkeit","chartType":"line","legend":"false","xformat":"HH:mm","interpolate":"bezier","nodata":"display this text before valid data arrives","dot":false,"ymin":"","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"604800","cutout":"20","useOneColor":false,"colors":["#1f77b4","#000000","#000000","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1160,"y":3840,"wires":[[],[]]},{"id":"c3b01af4.d06188","type":"ui_text","z":"f5f1b719.8a699","group":"6271eae2.2d3f34","order":10,"width":"3","height":"1","name":"","label":"SD ±","format":"{{msg.payload}} %","layout":"row-left","x":1120,"y":4000,"wires":[]},{"id":"6e50a964.4f28e","type":"mqtt in","z":"f5f1b719.8a699","name":"Wassertank:Schalter","topic":"garten/water","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":150,"y":4360,"wires":[["65ec4661.00f988","4af88e69.f71d68","fd99276.3c84ed8"]]},{"id":"1354c040.93fbc8","type":"switch","z":"f5f1b719.8a699","name":"schalter auf >0 V","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"3","vt":"str"},{"t":"lte","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":540,"y":4260,"wires":[["b6254aee.0f6e48"],["838f1247.8abe2"]]},{"id":"f4aa11b4.3514b8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"3","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1880,"y":4220,"wires":[["c121ecab.3a95e8"]]},{"id":"c121ecab.3a95e8","type":"function","z":"f5f1b719.8a699","name":"Wassertank ist leer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Der Wassertank ist leer.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2070,"y":4220,"wires":[["dd12e85b.989bc8"]]},{"id":"6f3be8ab.10d328","type":"switch","z":"f5f1b719.8a699","name":"trocken <= 40 %","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"40","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1680,"y":3900,"wires":[["7ae098b7.b018c8"]]},{"id":"7ae098b7.b018c8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"3","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1870,"y":3900,"wires":[["bfb41d14.5152b8"]]},{"id":"bfb41d14.5152b8","type":"function","z":"f5f1b719.8a699","name":"die Erde ist trocken!","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Erde ist trocken.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2070,"y":3900,"wires":[["dd12e85b.989bc8"]]},{"id":"68a6b01b.1f87f","type":"ui_slider","z":"343e6461.3afb5c","name":"","label":"Pumpdauer [min]","tooltip":"Minuten","group":"c144a1c.f64b76","order":4,"width":0,"height":0,"passthru":false,"outs":"end","topic":"","min":0,"max":"2","step":"0.1","x":4110,"y":160,"wires":[["6a5c8a65.97a8bc"]]},{"id":"30628496.a431a4","type":"function","z":"343e6461.3afb5c","name":"minutes to milliseconds","func":"msg.payload = (msg.payload * 60000);\nreturn msg;","outputs":1,"noerr":0,"x":4670,"y":580,"wires":[["26ab31af.75da6e"]]},{"id":"9a0bc34d.dc8b4","type":"ui_text","z":"f5f1b719.8a699","group":"c144a1c.f64b76","order":2,"width":0,"height":0,"name":"","label":"Der Tank ist","format":"{{msg.topic}}.","layout":"row-left","x":1140,"y":4260,"wires":[]},{"id":"b6254aee.0f6e48","type":"change","z":"f5f1b719.8a699","name":"leer","rules":[{"t":"set","p":"topic","pt":"msg","to":"fast leer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4220,"wires":[["9a0bc34d.dc8b4","f4aa11b4.3514b8"]]},{"id":"838f1247.8abe2","type":"change","z":"f5f1b719.8a699","name":"gefüllt","rules":[{"t":"set","p":"topic","pt":"msg","to":"noch gefüllt","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4280,"wires":[["9a0bc34d.dc8b4"]]},{"id":"65ec4661.00f988","type":"smooth","z":"f5f1b719.8a699","name":"","property":"payload","action":"mean","count":"2","round":"","mult":"single","x":330,"y":4300,"wires":[["1354c040.93fbc8","3f418608.f1b122"]]},{"id":"3f70f05.c556c1","type":"debug","z":"f5f1b719.8a699","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1600,"y":4520,"wires":[]},{"id":"6e8c65f4.50e8a4","type":"switch","z":"343e6461.3afb5c","name":">0 min","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":4450,"y":260,"wires":[["78156c62.f8aa2c","fdb9c913.142f88","30628496.a431a4"]]},{"id":"e80827e8.b606d","type":"ui_button","z":"343e6461.3afb5c","name":"","group":"c144a1c.f64b76","order":5,"width":0,"height":0,"passthru":true,"label":"pumpe Wasser [10 L/min]","tooltip":"pumpt jetzt eingestellte Menge","color":"","bgcolor":"","icon":"fa-tint","payload":"slider","payloadType":"flow","topic":"","x":4130,"y":260,"wires":[["6e8c65f4.50e8a4"]]},{"id":"6a5c8a65.97a8bc","type":"change","z":"343e6461.3afb5c","name":"","rules":[{"t":"set","p":"slider","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4420,"y":160,"wires":[[]]},{"id":"78156c62.f8aa2c","type":"Message Counter","z":"343e6461.3afb5c","name":"","units":"hours","interval":"24","alignToClock":true,"generator":"internal","x":4650,"y":300,"wires":[["1906e503.7f0afb"],[]]},{"id":"3dd8d301.da1fd4","type":"chatbot-telegram-receive","z":"343e6461.3afb5c","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","x":3990,"y":360,"wires":[["f62a6700.c1884"]]},{"id":"f62a6700.c1884","type":"chatbot-command","z":"343e6461.3afb5c","name":"","command":"/pump","x":4090,"y":320,"wires":[["3994ce40.3d3362"]]},{"id":"3994ce40.3d3362","type":"function","z":"343e6461.3afb5c","name":"Abgabe von 1.5 L via Telegram","func":"msg.menge = 0.15;\n\ndelete msg.originalMessage;\ndelete msg.payload;\ndelete msg.chat;\ndelete msg.api;\ndelete msg.client;\nreturn msg;","outputs":1,"noerr":0,"x":4290,"y":360,"wires":[["74227df9.437ce4"]]},{"id":"c39fd9eb.f3767","type":"interval-length","z":"f5f1b719.8a699","format":"human","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"msgTimeout":"300","minimumunit":"secs","maximumunit":"msecs","windowunit":"msecs","msgTimeoutUnit":"secs","startup":true,"msgField":"payload","repeatTimeout":true,"name":"","x":1400,"y":4560,"wires":[["3f70f05.c556c1"],["ad107615.087368"]]},{"id":"ad107615.087368","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"3","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1880,"y":4560,"wires":[["cc75d547.bf94c"]]},{"id":"cc75d547.bf94c","type":"function","z":"f5f1b719.8a699","name":"no connection","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Der ESP32 im Keller hat keine Verbindung. Er sendete seit über 2.5 Minuten keine Nachricht mehr.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2060,"y":4560,"wires":[["dd12e85b.989bc8"]]},{"id":"1906e503.7f0afb","type":"ui_text","z":"343e6461.3afb5c","group":"c144a1c.f64b76","order":6,"width":0,"height":0,"name":"","label":"Es wurde schon ","format":"{{msg.payload}}-mal geklickt.","layout":"row-left","x":4880,"y":300,"wires":[]},{"id":"e84c7a34.f8cde","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":320,"y":3900,"wires":[["b0852747.0b8178","cc07bd7.d14e24"]]},{"id":"4a7c500e.8aaf98","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":750,"y":3020,"wires":[["2fcfae8e.4db572"]]},{"id":"6e78fe64.1af5a","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":3280,"wires":[["b5e36680.3627f8","85caf771.e0e18"]]},{"id":"19c87b6a.15c6cd","type":"ui_toast","z":"343e6461.3afb5c","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"pumpe aktiviert","x":4880,"y":260,"wires":[]},{"id":"fdb9c913.142f88","type":"change","z":"343e6461.3afb5c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Pumpe aktiviert {{flow.slider}}","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":4640,"y":260,"wires":[["19c87b6a.15c6cd"]]},{"id":"2d2e23b6.64e84c","type":"persist in","z":"1f0f525d.8043ce","name":"wetter-morgen","storageNode":"ca579866.668a8","x":660,"y":200,"wires":[]},{"id":"a83c1060.6c2bd","type":"mqtt in","z":"343e6461.3afb5c","name":"","topic":"garten/pump","qos":"0","broker":"","x":3250,"y":20,"wires":[["cd146344.4dd9c","953f7a76.6608f","533aec25.9c78fc"]]},{"id":"cd146344.4dd9c","type":"debug","z":"343e6461.3afb5c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":3290,"y":80,"wires":[]},{"id":"953f7a76.6608f","type":"function","z":"343e6461.3afb5c","name":"milliseconds to minutes","func":"msg.payload = (msg.payload / 60000);\nreturn msg;","outputs":1,"noerr":0,"x":3670,"y":20,"wires":[["360fd106.ab692e"]]},{"id":"28e67e2e.24f54a","type":"ui_chart","z":"343e6461.3afb5c","name":"","group":"c144a1c.f64b76","order":7,"width":0,"height":0,"label":"Pumpzeit [min]","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":true,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":4100,"y":20,"wires":[[],[]]},{"id":"6ac8e690.290cd8","type":"chatbot-conversation","z":"343e6461.3afb5c","name":"","chatId":"173173012","transport":"telegram","store":"","x":3980,"y":440,"wires":[["75ff2ab1.d86e0c"]]},{"id":"75ff2ab1.d86e0c","type":"chatbot-telegram-send","z":"343e6461.3afb5c","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","track":false,"passThrough":false,"outputs":0,"x":3990,"y":400,"wires":[]},{"id":"533aec25.9c78fc","type":"function","z":"343e6461.3afb5c","name":"Telegram: Pumpe läuft","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Pumpe läuft für jetzt \" + msg.payload/60000 +\" Minuten. Sie fördert also \"+(msg.payload*10)+\" Liter.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":3590,"y":80,"wires":[["6ac8e690.290cd8"]]},{"id":"360fd106.ab692e","type":"delay","z":"343e6461.3afb5c","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":3900,"y":20,"wires":[["28e67e2e.24f54a"]]},{"id":"f1845f91.61567","type":"change","z":"1f0f525d.8043ce","name":"get from global.regen24h","rules":[{"t":"set","p":"payload","pt":"msg","to":"regen24h","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":910,"y":280,"wires":[["66a18271.a98d84"]]},{"id":"37588b80.8266a4","type":"function","z":"1f0f525d.8043ce","name":"sendet Regenwarnung-jetzt","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Es regnet jetzt!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1380,"y":360,"wires":[["b69aec68.c6dde"]]},{"id":"bcf5b24.8037dd","type":"delay","z":"1f0f525d.8043ce","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":670,"y":280,"wires":[["f1845f91.61567"]]},{"id":"13349315.845fad","type":"smooth","z":"f5f1b719.8a699","name":"","property":"payload","action":"mean","count":"5","round":"","mult":"single","x":730,"y":3920,"wires":[["97119660.2a5958","3859792c.f7813e","67e27976.3ad7c8","6f3be8ab.10d328"]]},{"id":"97119660.2a5958","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"soilmoist","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1410,"y":3920,"wires":[[]]},{"id":"cc07bd7.d14e24","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"c144a1c.f64b76","order":9,"width":0,"height":0,"label":"Bodenfeuchte (Rohdaten)","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1180,"y":3780,"wires":[[],[]]},{"id":"3f418608.f1b122","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"wassertank","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1420,"y":4280,"wires":[[]]},{"id":"4af88e69.f71d68","type":"change","z":"f5f1b719.8a699","name":"max","rules":[{"t":"set","p":"topic","pt":"msg","to":"max","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4360,"wires":[["6c710491.5d8eb4"]]},{"id":"fd99276.3c84ed8","type":"change","z":"f5f1b719.8a699","name":"min","rules":[{"t":"set","p":"topic","pt":"msg","to":"min","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":4400,"wires":[["6c710491.5d8eb4"]]},{"id":"6c710491.5d8eb4","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"c144a1c.f64b76","order":10,"width":0,"height":0,"label":"Wasserstand (Rohdaten)","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"604800","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":1180,"y":4380,"wires":[[],[]]},{"id":"18e5e8a4.f233bf","type":"comment","z":"343e6461.3afb5c","name":"Regen: ja/nein","info":"","x":700,"y":240,"wires":[]},{"id":"d2b98732.2a3d98","type":"comment","z":"343e6461.3afb5c","name":"Tank voll/leer","info":"","x":1910,"y":340,"wires":[]},{"id":"6e503585.626684","type":"inject","z":"343e6461.3afb5c","name":"","topic":"waterlevel","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2090,"y":260,"wires":[["ecf30b74.484ce"]]},{"id":"218c5ef1.86d8fa","type":"inject","z":"343e6461.3afb5c","name":"","topic":"waterlevel","payload":"250","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2100,"y":220,"wires":[["ecf30b74.484ce"]]},{"id":"ecf30b74.484ce","type":"switch","z":"343e6461.3afb5c","name":">0","property":"waterlevel","propertyType":"msg","rules":[{"t":"neq","v":"0","vt":"str"},{"t":"eq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":2250,"y":380,"wires":[["e3fdac0b.c35b48","b96d54b5.aae228"],["1fbf1e10.2c0e6a"]]},{"id":"542f45e1.52cd64","type":"change","z":"343e6461.3afb5c","name":"Wassertank","rules":[{"t":"set","p":"waterlevel","pt":"msg","to":"wassertank","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1950,"y":380,"wires":[["ecf30b74.484ce"]]},{"id":"1fbf1e10.2c0e6a","type":"change","z":"343e6461.3afb5c","name":"waterlevel = true","rules":[{"t":"set","p":"waterlevel","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2430,"y":440,"wires":[["9a3971dd.1a3cc","4187d9e7.752008"]]},{"id":"dc3e7770.ed9d7","type":"comment","z":"343e6461.3afb5c","name":"Boden feucht/trocken","info":"","x":1940,"y":700,"wires":[]},{"id":"c7326611.9bd218","type":"switch","z":"343e6461.3afb5c","name":"Moist <60%","property":"payload","propertyType":"msg","rules":[{"t":"lt","v":"60","vt":"str"},{"t":"gt","v":"60","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":2250,"y":740,"wires":[["9cc33bd5.09b208","70e1da4d.0405c4"],["793e18f4.23938","ba779541.eefe9"]]},{"id":"311f9217.881a5e","type":"change","z":"343e6461.3afb5c","name":"Bodenfeuchte","rules":[{"t":"set","p":"payload","pt":"msg","to":"soilmoist","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1960,"y":740,"wires":[["c7326611.9bd218"]]},{"id":"625cab7d.4bd2ec","type":"inject","z":"343e6461.3afb5c","name":"","topic":"Soilmoist","payload":"15","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2090,"y":820,"wires":[["c7326611.9bd218"]]},{"id":"4013e464.a5b1e4","type":"inject","z":"343e6461.3afb5c","name":"","topic":"Soilmoist","payload":"65","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2090,"y":860,"wires":[["c7326611.9bd218"]]},{"id":"9cc33bd5.09b208","type":"change","z":"343e6461.3afb5c","name":"dry = true","rules":[{"t":"set","p":"dry","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2400,"y":700,"wires":[["84c2473.e430f38","4466563b.09e55"]]},{"id":"ccf40ed.073007","type":"function","z":"343e6461.3afb5c","name":"Tank:voll UND Boden:trocken","func":"context.data = context.data || new Object();\n\nswitch (msg.topic) {\n    case \"wassertank\":\n        context.data.wassertank = msg.payload;\n        msg = null;\n        break;\n\n    case \"soilmoist\":\n        context.data.soilmoist = msg.payload;\n        msg = null;\n        break;    \n        \n    default:\n        msg = null;\n    \tbreak;\n\n}\n\nif(context.data.wassertank != null && context.data.soilmoist != null) {\n\tmsg2 = new Object();\n    msg2 = context.data;\n    context.data=null;\n\treturn msg2;\n} else return msg;","outputs":1,"noerr":0,"x":3210,"y":580,"wires":[["cca4e4e4.d82fc"]]},{"id":"9a3971dd.1a3cc","type":"function","z":"343e6461.3afb5c","name":"Task1:Wassertank = voll","func":"msg.topic=\"wassertank\";\nmsg.payload=\"voll\"\nreturn msg;","outputs":1,"noerr":0,"x":2810,"y":440,"wires":[["ccf40ed.073007","15aa7c6e.e3211c"]]},{"id":"84c2473.e430f38","type":"function","z":"343e6461.3afb5c","name":"Task2:Boden=trocken","func":"msg.topic=\"soilmoist\";\nmsg.payload=\"trocken\"\nreturn msg;","outputs":1,"noerr":0,"x":2800,"y":700,"wires":[["ccf40ed.073007","15aa7c6e.e3211c"]]},{"id":"82e07e66.7e16a","type":"comment","z":"343e6461.3afb5c","name":"Tank voll UND Boden trocken","info":"","x":3150,"y":520,"wires":[]},{"id":"4466563b.09e55","type":"debug","z":"343e6461.3afb5c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2590,"y":640,"wires":[]},{"id":"15aa7c6e.e3211c","type":"debug","z":"343e6461.3afb5c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2950,"y":580,"wires":[]},{"id":"afe63a32.94633","type":"change","z":"343e6461.3afb5c","name":"set unkown values","rules":[{"t":"set","p":"waterlevel","pt":"msg","to":"?","tot":"str"},{"t":"set","p":"dry","pt":"msg","to":"?","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1750,"y":560,"wires":[["542f45e1.52cd64","311f9217.881a5e","e29cb7f9.eed858"]]},{"id":"e29cb7f9.eed858","type":"debug","z":"343e6461.3afb5c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1990,"y":560,"wires":[]},{"id":"cca4e4e4.d82fc","type":"change","z":"343e6461.3afb5c","name":"","rules":[{"t":"set","p":"pump","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3460,"y":580,"wires":[["99446495.cc0f28","efffda63.3b8f08"]]},{"id":"e3fdac0b.c35b48","type":"switch","z":"343e6461.3afb5c","name":"waterlevel = false","property":"waterlevel","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":2430,"y":320,"wires":[["892fe1aa.1cd1f8"]]},{"id":"892fe1aa.1cd1f8","type":"change","z":"343e6461.3afb5c","name":"push to global.nowater","rules":[{"t":"set","p":"waterlevel","pt":"global","to":"waterlevel","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2450,"y":280,"wires":[[]]},{"id":"9efcb8b9.ecfac8","type":"change","z":"343e6461.3afb5c","name":"push to global.feuchteerde","rules":[{"t":"set","p":"feuchteerde","pt":"global","to":"dry","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2460,"y":940,"wires":[[]]},{"id":"4187d9e7.752008","type":"debug","z":"343e6461.3afb5c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2590,"y":500,"wires":[]},{"id":"44fbb47b.6924fc","type":"switch","z":"343e6461.3afb5c","name":"0 03:00","property":"payload[0].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"},{"t":"neq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":380,"y":360,"wires":[["12b85f0.9758fa1"],["ac7af930.23da28"]]},{"id":"199eb71c.a7b2b9","type":"debug","z":"343e6461.3afb5c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":410,"y":300,"wires":[]},{"id":"87d3132c.8692b8","type":"persist out","z":"343e6461.3afb5c","name":"wetter-morgen","storageNode":"ca579866.668a8","x":160,"y":500,"wires":[["199eb71c.a7b2b9","44fbb47b.6924fc","f214d3ca.6224f","fdcb0217.01e05","267213d9.6b2d3c","2cb0c4ec.4bb7fc","6112ad74.03d414","c01f5c4e.ad845","2763fed0.3112d2"]]},{"id":"f214d3ca.6224f","type":"switch","z":"343e6461.3afb5c","name":"1 06:00","property":"payload[1].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"},{"t":"neq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":380,"y":400,"wires":[["12b85f0.9758fa1"],["ac7af930.23da28"]]},{"id":"fdcb0217.01e05","type":"switch","z":"343e6461.3afb5c","name":"2 09:00","property":"payload[2].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"},{"t":"neq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":380,"y":440,"wires":[["12b85f0.9758fa1"],["ac7af930.23da28"]]},{"id":"267213d9.6b2d3c","type":"switch","z":"343e6461.3afb5c","name":"3 12:00","property":"payload[3].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"},{"t":"neq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":380,"y":480,"wires":[["12b85f0.9758fa1"],["ac7af930.23da28"]]},{"id":"2cb0c4ec.4bb7fc","type":"switch","z":"343e6461.3afb5c","name":"4 15:00","property":"payload[4].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"},{"t":"neq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":380,"y":520,"wires":[["12b85f0.9758fa1"],["ac7af930.23da28"]]},{"id":"6112ad74.03d414","type":"switch","z":"343e6461.3afb5c","name":"5 18:00","property":"payload[5].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"},{"t":"neq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":380,"y":560,"wires":[["12b85f0.9758fa1"],["ac7af930.23da28"]]},{"id":"c01f5c4e.ad845","type":"switch","z":"343e6461.3afb5c","name":"6 21:00","property":"payload[6].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"},{"t":"neq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":380,"y":600,"wires":[["12b85f0.9758fa1"],["ac7af930.23da28"]]},{"id":"2763fed0.3112d2","type":"switch","z":"343e6461.3afb5c","name":"7 24:00","property":"payload[7].weather[0].main","propertyType":"msg","rules":[{"t":"eq","v":"Rain","vt":"str"},{"t":"neq","v":"Rain","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":380,"y":640,"wires":[["12b85f0.9758fa1"],["ac7af930.23da28"]]},{"id":"6f3383cb.3570dc","type":"inject","z":"343e6461.3afb5c","name":"täglich um 18:30","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"26 18 * * *","once":false,"onceDelay":0.1,"x":130,"y":460,"wires":[["87d3132c.8692b8"]]},{"id":"12b85f0.9758fa1","type":"function","z":"343e6461.3afb5c","name":"rain=true","func":"msg.rain = true;\n\ndelete msg.payload;\ndelete msg.topic;\ndelete msg.location;\ndelete msg.data;\ndelete msg.title;\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":440,"wires":[["a19e606d.d6087"]]},{"id":"ac7af930.23da28","type":"function","z":"343e6461.3afb5c","name":"rain=false","func":"msg.rain = false;\n\ndelete msg.payload;\ndelete msg.topic;\ndelete msg.location;\ndelete msg.data;\ndelete msg.title;\nreturn msg;","outputs":1,"noerr":0,"x":690,"y":560,"wires":[["44b34251.dd6a7c"]]},{"id":"a19e606d.d6087","type":"Message Counter","z":"343e6461.3afb5c","name":"","units":"seconds","interval":"10","alignToClock":true,"generator":"internal","x":870,"y":440,"wires":[["9f678df4.122ed8"],[]]},{"id":"9f678df4.122ed8","type":"switch","z":"343e6461.3afb5c","name":"mehr als 1x Regen/Tag","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1150,"y":360,"wires":[["5fbd29be.2b0448"]]},{"id":"44b34251.dd6a7c","type":"Message Counter","z":"343e6461.3afb5c","name":"","units":"seconds","interval":"10","alignToClock":true,"generator":"internal","x":870,"y":560,"wires":[["9ecfb2e1.41c8c8"],[]]},{"id":"9ecfb2e1.41c8c8","type":"switch","z":"343e6461.3afb5c","name":"weniger als 3x Regen/Tag","property":"payload","propertyType":"msg","rules":[{"t":"btwn","v":"6","vt":"num","v2":"8","v2t":"num"}],"checkall":"true","repair":false,"outputs":1,"x":1160,"y":560,"wires":[["59d6169a.84b1c"]]},{"id":"f1255a8c.cf8368","type":"inject","z":"343e6461.3afb5c","name":"","topic":"","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":700,"wires":[["9ecfb2e1.41c8c8"]]},{"id":"3da5cd6.a76b9b2","type":"inject","z":"343e6461.3afb5c","name":"","topic":"","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":740,"wires":[["9ecfb2e1.41c8c8"]]},{"id":"ca44bd22.c64a6","type":"inject","z":"343e6461.3afb5c","name":"","topic":"","payload":"2","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":780,"wires":[["9ecfb2e1.41c8c8"]]},{"id":"3a8a9ffe.998318","type":"inject","z":"343e6461.3afb5c","name":"","topic":"","payload":"3","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":820,"wires":[["9ecfb2e1.41c8c8"]]},{"id":"606a61b7.809578","type":"inject","z":"343e6461.3afb5c","name":"","topic":"","payload":"4","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":860,"wires":[["9ecfb2e1.41c8c8"]]},{"id":"2c273ef3.aac172","type":"inject","z":"343e6461.3afb5c","name":"","topic":"","payload":"5","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":900,"wires":[["9ecfb2e1.41c8c8"]]},{"id":"15bcf0be.ca8b5f","type":"inject","z":"343e6461.3afb5c","name":"","topic":"","payload":"6","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":940,"wires":[["9ecfb2e1.41c8c8"]]},{"id":"7ebfca5b.f099bc","type":"inject","z":"343e6461.3afb5c","name":"","topic":"","payload":"7","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":980,"wires":[["9ecfb2e1.41c8c8"]]},{"id":"998b56c.e0056a8","type":"inject","z":"343e6461.3afb5c","name":"","topic":"","payload":"8","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":810,"y":1020,"wires":[["9ecfb2e1.41c8c8"]]},{"id":"59d6169a.84b1c","type":"function","z":"343e6461.3afb5c","name":"write msg.rain to false","func":"msg.rain = false;\n\ndelete msg.payload;\ndelete msg.topic;\ndelete msg.interval;\ndelete msg.units;\ndelete msg.generator;\ndelete msg.alignToClock;\ndelete msg.totalMessageCount;\ndelete msg.isReset;\nreturn msg;","outputs":1,"noerr":0,"x":1470,"y":560,"wires":[["afe63a32.94633"]]},{"id":"75c73ee.56029c","type":"change","z":"343e6461.3afb5c","name":"push to global.regen24h","rules":[{"t":"set","p":"regen24h","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1160,"y":440,"wires":[[]]},{"id":"5fbd29be.2b0448","type":"function","z":"343e6461.3afb5c","name":"heute wird es regnen","func":"msg.payload = 'Heute wird es regnen!';\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":400,"wires":[["75c73ee.56029c"]]},{"id":"6387dc08.16ecec","type":"comment","z":"343e6461.3afb5c","name":"to Telegram","info":"","x":1070,"y":320,"wires":[]},{"id":"e216abbe.0415d","type":"comment","z":"343e6461.3afb5c","name":"24h Wetterdienst abfrage von 03:00-24 Uhr","info":"","x":270,"y":240,"wires":[]},{"id":"793e18f4.23938","type":"switch","z":"343e6461.3afb5c","name":"dry = false","property":"dry","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":2410,"y":900,"wires":[["9efcb8b9.ecfac8"]]},{"id":"b96d54b5.aae228","type":"function","z":"343e6461.3afb5c","name":"Telegram: Tank leer; kein Wasser","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Wäre der Tank nicht leer, würde die Pumpe jetzt laufen.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":3620,"y":380,"wires":[["6ac8e690.290cd8"]]},{"id":"ba779541.eefe9","type":"function","z":"343e6461.3afb5c","name":"Telegram: Erde feucht; kein Wasser","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Wäre die Erde nicht so feucht (\"+ msg.payload + \" %), würde die Pumpe jetzt laufen.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":3630,"y":740,"wires":[["6ac8e690.290cd8"]]},{"id":"99446495.cc0f28","type":"function","z":"343e6461.3afb5c","name":"Telegram: Pumpe wird ausgelöst","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Kein Regen heute, der Tank ist nicht leer und das Beet ist trocken. Das Beet wird gewässert.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":3620,"y":460,"wires":[["6ac8e690.290cd8"]]},{"id":"242942a.2e43e3e","type":"change","z":"343e6461.3afb5c","name":"push to flow.pumptime","rules":[{"t":"set","p":"pumptime","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4440,"y":100,"wires":[[]]},{"id":"1e6dbed8.48c429","type":"ui_dropdown","z":"343e6461.3afb5c","name":"","label":"Standardfördermenge","tooltip":"","place":"","group":"c144a1c.f64b76","order":1,"width":0,"height":0,"passthru":true,"options":[{"label":"0 L","value":"0.0","type":"str"},{"label":"2 L","value":"0.2","type":"str"},{"label":"4 L","value":"0.4","type":"str"},{"label":"5 L","value":"0.5","type":"str"},{"label":"6 L","value":"0.6","type":"str"},{"label":"8 L","value":"0.8","type":"str"},{"label":"10 L","value":"1","type":"str"}],"payload":"","topic":"","x":4120,"y":100,"wires":[["242942a.2e43e3e"]]},{"id":"efffda63.3b8f08","type":"change","z":"343e6461.3afb5c","name":"get from flow.pumptime","rules":[{"t":"set","p":"payload","pt":"msg","to":"pumptime","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":4010,"y":580,"wires":[["4826f924.073c4","3da65cd8.bc19dc"]]},{"id":"4826f924.073c4","type":"debug","z":"343e6461.3afb5c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":4190,"y":640,"wires":[]},{"id":"d6b0473e.d962d","type":"debug","z":"f5f1b719.8a699","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":330,"y":4100,"wires":[]},{"id":"10820ff3.07f218","type":"debug","z":"f5f1b719.8a699","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":610,"y":4100,"wires":[]},{"id":"9aad0fef.c71028","type":"smooth","z":"f5f1b719.8a699","name":"max","property":"payload","action":"max","count":"1000","round":"2","mult":"single","x":445.5,"y":3497.2499389648438,"wires":[["937efc3b.897b88"]]},{"id":"937efc3b.897b88","type":"ui_text","z":"f5f1b719.8a699","group":"86b1550c.1f3dd8","order":3,"width":"3","height":"1","name":"","label":"max: ","format":"{{msg.payload}} °C","layout":"row-left","x":920,"y":3500,"wires":[]},{"id":"ed64e42f.a56058","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":3360,"wires":[["7d5065a9.792c54"]]},{"id":"39780b4c.d1dae4","type":"smooth","z":"f5f1b719.8a699","name":"","property":"payload","action":"mean","count":"5","round":"2","mult":"single","x":430,"y":3360,"wires":[["ed64e42f.a56058"]]},{"id":"43677c1c.6b7bbc","type":"comment","z":"f5f1b719.8a699","name":"UV-Messung","info":"","x":70,"y":3580,"wires":[]},{"id":"ea2c110f.049d28","type":"comment","z":"f5f1b719.8a699","name":"Bodenfeuchte","info":"","x":60,"y":3780,"wires":[]},{"id":"d38b37f7.684528","type":"comment","z":"f5f1b719.8a699","name":"Wassertank","info":"","x":60,"y":4180,"wires":[]},{"id":"c2118add.ea8ce8","type":"comment","z":"f5f1b719.8a699","name":"ESP noch verbunden?","info":"","x":1340,"y":4500,"wires":[]},{"id":"efa22c63.4de0b8","type":"smooth","z":"f5f1b719.8a699","name":"max","property":"payload","action":"max","count":"1000","round":"2","mult":"single","x":440,"y":3140,"wires":[["e22a49d5.1c738"]]},{"id":"e22a49d5.1c738","type":"ui_text","z":"f5f1b719.8a699","group":"6271eae2.2d3f34","order":3,"width":"3","height":"1","name":"","label":"max: ","format":"{{msg.payload}} °C","layout":"row-left","x":920,"y":3120,"wires":[]},{"id":"342fafd.a17cc5","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Keller","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":3020,"wires":[["b95875c1.90e74"]]},{"id":"3da65cd8.bc19dc","type":"switch","z":"343e6461.3afb5c","name":">0 min","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0.1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":4430,"y":500,"wires":[["30628496.a431a4"]]},{"id":"b7b24053.d4d148","type":"inject","z":"343e6461.3afb5c","name":"standardfördermenge","topic":"","payload":"0.5","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":3900,"y":100,"wires":[["1e6dbed8.48c429"]]},{"id":"d0a59f9.e80c6e","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"aussentempgarten","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":3320,"wires":[[]]},{"id":"a609899.58d4df8","type":"change","z":"1f0f525d.8043ce","name":"global aussentemp","rules":[{"t":"set","p":"payload","pt":"msg","to":"aussentempgarten","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1190,"y":760,"wires":[["f9d90c30.e7b5d"]]},{"id":"f9d90c30.e7b5d","type":"change","z":"1f0f525d.8043ce","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Garten","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1400,"y":760,"wires":[[]]},{"id":"ba29832b.bd1e18","type":"change","z":"57b8c30b.db8ba4","d":true,"name":"get global.soilmoist","rules":[{"t":"set","p":"payload","pt":"msg","to":"soilmoist","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":580,"wires":[["d884a897.8e765"]]},{"id":"d884a897.8e765","type":"function","z":"57b8c30b.db8ba4","d":true,"name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Bodenfeuchte beträgt \" + msg.payload +\" %.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1210,"y":580,"wires":[["41d616e6.9b9ec8"]]},{"id":"b69aec68.c6dde","type":"delay","z":"1f0f525d.8043ce","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"hour","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1590,"y":320,"wires":[["25265fc7.59d84"]]},{"id":"ab4a6f7d.ddfbe8","type":"chatbot-telegram-receive","z":"201f6d0a.e307ca","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","x":110,"y":500,"wires":[["f9c7515d.902008","3d68d547.a461ca"]]},{"id":"bffaa6ea.0c6a1","type":"chatbot-telegram-send","z":"201f6d0a.e307ca","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","track":false,"passThrough":false,"outputs":0,"x":2250,"y":620,"wires":[]},{"id":"d81f4744.2f7b1","type":"chatbot-parse","z":"f3ebc49a.29a038","name":"","parseType":"number-integer","parseVariable":"string","x":440,"y":140,"wires":[["7c8a8278.e8f1fc"],["f4521ea5.5081c8"]]},{"id":"f4521ea5.5081c8","type":"chatbot-listen","z":"f3ebc49a.29a038","name":"Beet giessen","showdebug":true,"rules":["wasser","pumpe","bewässere","gieße","giessen"],"outputs":5,"x":430,"y":40,"wires":[["49b98848.36685","f3bf1ae2.d67908"],["49b98848.36685","f3bf1ae2.d67908"],["49b98848.36685","f3bf1ae2.d67908"],["49b98848.36685","f3bf1ae2.d67908"],["49b98848.36685","f3bf1ae2.d67908"]]},{"id":"7c8a8278.e8f1fc","type":"function","z":"f3ebc49a.29a038","name":"Task1:Menge = voll","func":"msg.topic=\"Menge\";\ndelete msg.originalMessage;\ndelete msg.chat;\ndelete msg.api;\ndelete msg.client;\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":140,"wires":[["dd023efb.9a9008"]]},{"id":"1dc1c638.6b4fba","type":"function","z":"f3ebc49a.29a038","name":"Task2:Gießen","func":"delete msg.originalMessage;\ndelete msg.payload;\n\nmsg.topic=\"giessen\";\nmsg.payload ='ja';\n\nreturn msg;","outputs":1,"noerr":0,"x":900,"y":100,"wires":[["dd023efb.9a9008"]]},{"id":"dd023efb.9a9008","type":"function","z":"f3ebc49a.29a038","name":"Tank:voll UND Boden:trocken","func":"context.data = context.data || new Object();\n\nswitch (msg.topic) {\n    case \"giessen\":\n        context.data.giessen = msg.payload;\n        msg = null;\n        break;\n\n    case \"Menge\":\n        context.data.Menge = msg.payload;\n        msg = null;\n        break;    \n        \n    default:\n        msg = null;\n    \tbreak;\n\n}\n\nif(context.data.giessen != null && context.data.Menge != null) {\n\tmsg2 = new Object();\n    msg2 = context.data;\n    context.data=null;\n\treturn msg2;\n} else return msg;","outputs":1,"noerr":0,"x":1180,"y":120,"wires":[["cdd07a.f0101788"]]},{"id":"59719fec.b6c66","type":"function","z":"f3ebc49a.29a038","name":"Telegram: okay","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Okay, \"+msg.payload+\" Liter werden gleich gepumpt!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1720,"y":80,"wires":[[]]},{"id":"cdd07a.f0101788","type":"change","z":"f3ebc49a.29a038","name":"","rules":[{"t":"move","p":"Menge","pt":"msg","to":"payload","tot":"msg"},{"t":"delete","p":"giessen","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1140,"y":160,"wires":[["b1272523.6207c8"]]},{"id":"b1272523.6207c8","type":"switch","z":"f3ebc49a.29a038","name":"","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1290,"y":160,"wires":[["6eea812e.168598"]]},{"id":"6eea812e.168598","type":"switch","z":"f3ebc49a.29a038","name":"","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"20","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1410,"y":160,"wires":[["59719fec.b6c66","975ec679.54a43"]]},{"id":"49b98848.36685","type":"function","z":"f3ebc49a.29a038","name":"Telegram: Wieviel Wasser?","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Wieviel Liter Wasser soll ich pumpen?\"} };\nreturn msg;","outputs":1,"noerr":0,"x":660,"y":40,"wires":[["1dc1c638.6b4fba"]]},{"id":"74227df9.437ce4","type":"change","z":"343e6461.3afb5c","name":"","rules":[{"t":"move","p":"menge","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":4330,"y":400,"wires":[["3da65cd8.bc19dc"]]},{"id":"4c35d08d.9742b8","type":"function","z":"201f6d0a.e307ca","name":"minutes to milliseconds","func":"msg.payload = (msg.payload * 60000);\ndelete msg.originalMessage;\ndelete msg.chat;\ndelete msg.api;\ndelete msg.api;\nreturn msg;","outputs":1,"noerr":0,"x":1810,"y":360,"wires":[["d22a9c8b.d44978","c8fd7537.513a8"]]},{"id":"d22a9c8b.d44978","type":"debug","z":"201f6d0a.e307ca","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":2030,"y":360,"wires":[]},{"id":"c8fd7537.513a8","type":"mqtt out","z":"201f6d0a.e307ca","name":"","topic":"garten/pump","qos":"","retain":"","broker":"","x":2050,"y":420,"wires":[]},{"id":"3c42134a.bb2ca4","type":"chatbot-listen","z":"eac9d098.6aa758","name":"Wie kalt ist es draußen?","showdebug":false,"rules":["kalt","draussen","draußen","wie","Grad","Celsius","warm","temperatur","garten"],"outputs":9,"x":250,"y":300,"wires":[["4ecdc066.cd19b"],["4ecdc066.cd19b"],["4ecdc066.cd19b"],["4ecdc066.cd19b"],["4ecdc066.cd19b"],["4ecdc066.cd19b"],["4ecdc066.cd19b"],["4ecdc066.cd19b"],["4ecdc066.cd19b"]]},{"id":"4ecdc066.cd19b","type":"function","z":"eac9d098.6aa758","name":"Telegram: Aussentemp","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Außentemperatur beträgt \"+global.aussentemp.garten+\" °C (gemessen im Garten). Der Wetterbericht sagt \"+global.aussentemp.owm+\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":300,"wires":[["5309c6ed.05f448"]]},{"id":"f4cdba25.8966f8","type":"change","z":"1f0f525d.8043ce","name":"global aussentemp","rules":[{"t":"set","p":"aussentempowm","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":760,"wires":[[]]},{"id":"d6dabbfb.2e106","type":"chatbot-conversation","z":"201f6d0a.e307ca","name":"","chatId":"173173012","transport":"telegram","store":"","x":2060,"y":620,"wires":[["bffaa6ea.0c6a1"]]},{"id":"f3bf1ae2.d67908","type":"debug","z":"f3ebc49a.29a038","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":640,"y":260,"wires":[]},{"id":"975ec679.54a43","type":"function","z":"f3ebc49a.29a038","name":"Liter to Minutes","func":"msg.payload = (msg.payload/10)\nreturn msg;","outputs":1,"noerr":0,"x":1660,"y":160,"wires":[[]]},{"id":"5309c6ed.05f448","type":"debug","z":"eac9d098.6aa758","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":680,"y":400,"wires":[]},{"id":"f9c7515d.902008","type":"chatbot-parse","z":"201f6d0a.e307ca","name":"","parseType":"number-integer","parseVariable":"string","x":320,"y":340,"wires":[["13d2e45c.993174"],[]]},{"id":"3d68d547.a461ca","type":"chatbot-listen","z":"201f6d0a.e307ca","name":"Beet giessen","showdebug":true,"rules":["wasser","pumpe","bewässere","gieße","giessen"],"outputs":5,"x":310,"y":240,"wires":[["80cb1cae.04058","935be657.284ba8"],["80cb1cae.04058","935be657.284ba8"],["80cb1cae.04058","935be657.284ba8"],["80cb1cae.04058","935be657.284ba8"],["80cb1cae.04058","935be657.284ba8"]]},{"id":"13d2e45c.993174","type":"function","z":"201f6d0a.e307ca","name":"Task1:Menge = voll","func":"msg.topic=\"Menge\";\ndelete msg.originalMessage;\ndelete msg.chat;\ndelete msg.api;\ndelete msg.client;\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":340,"wires":[["b9cef702.ec9e2"]]},{"id":"fbdbc24a.bb6df","type":"function","z":"201f6d0a.e307ca","name":"Task2:Gießen","func":"delete msg.originalMessage;\ndelete msg.payload;\n\nmsg.topic=\"giessen\";\nmsg.payload ='ja';\n\nreturn msg;","outputs":1,"noerr":0,"x":780,"y":300,"wires":[["b9cef702.ec9e2"]]},{"id":"b9cef702.ec9e2","type":"function","z":"201f6d0a.e307ca","name":"Tank:voll UND Boden:trocken","func":"context.data = context.data || new Object();\n\nswitch (msg.topic) {\n    case \"giessen\":\n        context.data.giessen = msg.payload;\n        msg = null;\n        break;\n\n    case \"Menge\":\n        context.data.Menge = msg.payload;\n        msg = null;\n        break;    \n        \n    default:\n        msg = null;\n    \tbreak;\n\n}\n\nif(context.data.giessen != null && context.data.Menge != null) {\n\tmsg2 = new Object();\n    msg2 = context.data;\n    context.data=null;\n\treturn msg2;\n} else return msg;","outputs":1,"noerr":0,"x":1060,"y":320,"wires":[["de3cca98.b858e8"]]},{"id":"24cd82af.ea941e","type":"function","z":"201f6d0a.e307ca","name":"Telegram: okay","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Okay, \"+msg.payload+\" Liter werden gleich gepumpt!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1600,"y":280,"wires":[["d6dabbfb.2e106"]]},{"id":"de3cca98.b858e8","type":"change","z":"201f6d0a.e307ca","name":"","rules":[{"t":"move","p":"Menge","pt":"msg","to":"payload","tot":"msg"},{"t":"delete","p":"giessen","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":360,"wires":[["2517bace.17842e"]]},{"id":"2517bace.17842e","type":"switch","z":"201f6d0a.e307ca","name":"","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"0","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1170,"y":360,"wires":[["104afdbe.b74fda"]]},{"id":"104afdbe.b74fda","type":"switch","z":"201f6d0a.e307ca","name":"","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"20","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1290,"y":360,"wires":[["24cd82af.ea941e","77506442.8450bc"]]},{"id":"80cb1cae.04058","type":"function","z":"201f6d0a.e307ca","name":"Telegram: Wieviel Wasser?","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Wieviel Liter Wasser soll ich pumpen?\"} };\nreturn msg;","outputs":1,"noerr":0,"x":540,"y":240,"wires":[["fbdbc24a.bb6df","d6dabbfb.2e106"]]},{"id":"935be657.284ba8","type":"debug","z":"201f6d0a.e307ca","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":470,"y":140,"wires":[]},{"id":"77506442.8450bc","type":"function","z":"201f6d0a.e307ca","name":"Liter to Minutes","func":"msg.payload = (msg.payload/10)\nreturn msg;","outputs":1,"noerr":0,"x":1540,"y":360,"wires":[["4c35d08d.9742b8"]]},{"id":"96c78a22.33fa38","type":"function","z":"201f6d0a.e307ca","name":"Telegram: Aussentemp","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Außentemperatur beträgt \"+global.aussentempgarten+\" °C (gemessen im Garten). Der Wetterbericht sagt \"+global.aussentempowm+\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":650,"y":660,"wires":[["40c9ab23.d6c61c","d6dabbfb.2e106"]]},{"id":"40c9ab23.d6c61c","type":"debug","z":"201f6d0a.e307ca","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":800,"y":760,"wires":[]},{"id":"96794680.2366f","type":"inject","z":"201f6d0a.e307ca","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":220,"y":640,"wires":[["c7a4f796.aeb528"]]},{"id":"c7a4f796.aeb528","type":"change","z":"201f6d0a.e307ca","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"aussentempgarten","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":740,"wires":[["96c78a22.33fa38","40c9ab23.d6c61c"]]},{"id":"70e1da4d.0405c4","type":"function","z":"343e6461.3afb5c","name":"Telegram: Erde trocken; Wasser","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Die Erde ist so trocken (\"+ msg.payload + \" %), dass die Pumpe laufen kann.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":3610,"y":700,"wires":[["6ac8e690.290cd8"]]},{"id":"ba32d889.1a7348","type":"mqtt in","z":"f5f1b719.8a699","name":"BKA-Wagen3","topic":"/WiFi/ESPRouter_1cbbf7","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":120,"y":4240,"wires":[["70cc6eac.86c34"]]},{"id":"70cc6eac.86c34","type":"debug","z":"f5f1b719.8a699","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":540,"y":4240,"wires":[]},{"id":"50cfdad3.f3e39c","type":"mqtt in","z":"f5f1b719.8a699","name":"BKA-Wagen3","topic":"/WiFi/ESPRouter_1cbbf7/system","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":120,"y":4320,"wires":[["70cc6eac.86c34"]]},{"id":"c7db7c5f.a5f1b8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":420,"y":100,"wires":[["695add7e.adc6b4","dddaa120.0dfa18","5a4ce1fc.b1b5d8"]]},{"id":"7da6b3c9.69e204","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":420,"y":180,"wires":[["cf9c9828.620e4","4a83eaaf.415cac"]]},{"id":"862fe844.56afc","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":400,"y":400,"wires":[["260c3ad0.a7c5e6","284c639d.8dcdfc","1f184d3.6f3f2b3"]]},{"id":"ebd94bcb.d58a9","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":400,"y":480,"wires":[["7192075c.c064","6816395d.aa53f"]]},{"id":"39d7d648.4cd68a","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":380,"y":720,"wires":[["3117a341.dcfccc","c68ff96d.f5ac18","aa9da2c8.2a582"]]},{"id":"e94fa0ba.32b758","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":380,"y":800,"wires":[["e1fb34fd.540c9","47ebb1f9.faffa8"]]},{"id":"c8695dfb.0f8838","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":380,"y":1020,"wires":[["50922815.b97028","1f3cdec1.3273b9","d2bc22c.283b4e"]]},{"id":"f249ccdb.85a3c8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":380,"y":1100,"wires":[["ebf7c520.a6f2d8","5cf007bd.dd9e58"]]},{"id":"284c639d.8dcdfc","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":500,"wires":[["53e468c2.30c85"]]},{"id":"d717b9b2.694cc","type":"switch","z":"f5f1b719.8a699","name":"Temp > 40 C","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"40","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":496.25,"wires":[["79ce5e0c.57d278"]]},{"id":"52b8c0fb.c6b1b","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1900,"y":497.5,"wires":[["dd12e85b.989bc8"]]},{"id":"53e468c2.30c85","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1411.2501220703125,"y":498.75,"wires":[["d717b9b2.694cc"]]},{"id":"79ce5e0c.57d278","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1741.25,"y":497.5,"wires":[["52b8c0fb.c6b1b","4ac66ea.62be79"]]},{"id":"c68ff96d.f5ac18","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":840,"wires":[["cf78811d.2e0ca8"]]},{"id":"b4968778.d2e248","type":"switch","z":"f5f1b719.8a699","name":"Temp > 40 C","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"40","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":836.25,"wires":[["5e26d01c.8c16a8"]]},{"id":"3629b189.ef7816","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1900,"y":837.5,"wires":[["dd12e85b.989bc8"]]},{"id":"cf78811d.2e0ca8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1411.2501220703125,"y":838.75,"wires":[["b4968778.d2e248"]]},{"id":"5e26d01c.8c16a8","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1741.25,"y":837.5,"wires":[["3629b189.ef7816","4bca0125.ae1798"]]},{"id":"1f3cdec1.3273b9","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Schlafzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":1160,"wires":[["11676dc2.3fa742"]]},{"id":"b4619ea8.d30ca8","type":"switch","z":"f5f1b719.8a699","name":"Temp > 40 C","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"40","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":1156.25,"wires":[["10da3329.ab0e05"]]},{"id":"b4cb0166.4c01c8","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1900,"y":1157.5,"wires":[["dd12e85b.989bc8"]]},{"id":"11676dc2.3fa742","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1411.2501220703125,"y":1158.75,"wires":[["b4619ea8.d30ca8"]]},{"id":"10da3329.ab0e05","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1741.25,"y":1157.5,"wires":[["b4cb0166.4c01c8","c40c919e.829228"]]},{"id":"dddaa120.0dfa18","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Küche","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":220,"wires":[["9b0cf4f.e5a1088"]]},{"id":"391594ed.77d3ec","type":"switch","z":"f5f1b719.8a699","name":"Temp > 40 C","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"40","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":216.25,"wires":[["22ddab06.5be5ac"]]},{"id":"e8082401.3a4848","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1900,"y":217.5,"wires":[["dd12e85b.989bc8"]]},{"id":"9b0cf4f.e5a1088","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1411.2501220703125,"y":218.75,"wires":[["391594ed.77d3ec"]]},{"id":"22ddab06.5be5ac","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1741.25,"y":217.5,"wires":[["e8082401.3a4848","6611571b.8c339"]]},{"id":"eefc574e.0460e8","type":"inject","z":"f5f1b719.8a699","name":"","topic":"","payload":"100","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1220,"y":340,"wires":[["dddaa120.0dfa18"]]},{"id":"e7a1dd8f.eece68","type":"inject","z":"f5f1b719.8a699","name":"","topic":"","payload":"10","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1220,"y":300,"wires":[["d0bae4f4.e08fe"]]},{"id":"3e473c2a.20ad8c","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1890,"y":420,"wires":[["dd12e85b.989bc8"]]},{"id":"eb5fbb6.b4cab48","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1888.8887939453125,"y":760.5555419921875,"wires":[["dd12e85b.989bc8"]]},{"id":"bab29d18.4dfb48","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1890,"y":1080,"wires":[["dd12e85b.989bc8"]]},{"id":"81ba8ae9.9a9528","type":"comment","z":"f5f1b719.8a699","name":"AußenTemp-Messung in Lübeck erfolgt über OWM","info":"","x":1840,"y":2680,"wires":[]},{"id":"4583dcab.7983f4","type":"change","z":"f5f1b719.8a699","name":"set Payload to global.AußentemperaturOWM","rules":[{"t":"set","p":"payload","pt":"msg","to":"aussentempowm","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1820,"y":2800,"wires":[["c8e822e.a475d6","79a20da7.783d04"]]},{"id":"49caede5.5135f4","type":"inject","z":"f5f1b719.8a699","name":"alle 30min prüfen","topic":"","payload":"","payloadType":"date","repeat":"1800","crontab":"","once":false,"onceDelay":"","x":1520,"y":2800,"wires":[["4583dcab.7983f4"]]},{"id":"9c2b32ae.7b77a8","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/keller/temp","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":90,"y":2240,"wires":[["2dd42b41.7565b4"]]},{"id":"692aa471.581b1c","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/keller/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":90,"y":2280,"wires":[["cdbce53f.178e2"]]},{"id":"259d7135.bf68ce","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Keller","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":2280,"wires":[["4f5ab8a4.d6fee8"]]},{"id":"85e56c0a.28527","type":"switch","z":"f5f1b719.8a699","name":"Humid > 65 %","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"65","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1588.7501220703125,"y":2277.5,"wires":[["88cebbd.935df48"]]},{"id":"c9be6b49.82677","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte im \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1898.7501220703125,"y":2276.25,"wires":[["dd12e85b.989bc8"]]},{"id":"4f5ab8a4.d6fee8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1408.7501220703125,"y":2278.75,"wires":[["85e56c0a.28527"]]},{"id":"e49a912f.5627d8","type":"comment","z":"f5f1b719.8a699","name":"Keller","info":"","x":70,"y":2120,"wires":[]},{"id":"865e514c.31f88","type":"smooth","z":"f5f1b719.8a699","name":"max","property":"payload","action":"max","count":"3600","round":"2","mult":"single","reduce":true,"x":660,"y":2340,"wires":[["d3ec17f5.aceee8","7d9ea932.d0b108"]]},{"id":"88cebbd.935df48","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740.0001220703125,"y":2276.25,"wires":[["c9be6b49.82677","31cd49a6.2e9efe"]]},{"id":"cce22d00.72da","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Keller","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":2240,"wires":[["d51cf04b.232438"]]},{"id":"23a1598d.e29336","type":"switch","z":"f5f1b719.8a699","name":"Temp < 15°C","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"15","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":2238.75,"wires":[["59f09f4a.76dd98"]]},{"id":"d51cf04b.232438","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1410.0001220703125,"y":2240,"wires":[["23a1598d.e29336"]]},{"id":"59f09f4a.76dd98","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740,"y":2240,"wires":[["48739fb6.39ea4","3b3ab007.6b14c8"]]},{"id":"8d44d0c0.eee52","type":"ui_text","z":"f5f1b719.8a699","group":"2ff68391.9d889c","order":6,"width":"6","height":"2","name":"","label":"Optimal: <br> T = 10-15 °C <br>  rel. Feuchte = 50-65 % ","format":"","layout":"row-spread","x":610,"y":2140,"wires":[]},{"id":"d3ec17f5.aceee8","type":"ui_text","z":"f5f1b719.8a699","group":"2ff68391.9d889c","order":3,"width":0,"height":0,"name":"","label":"max. gemessene Luftfeuchte","format":"{{msg.payload}} %","layout":"row-left","x":930,"y":2340,"wires":[]},{"id":"a75ea812.e126d8","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"2ff68391.9d889c","order":1,"width":0,"height":0,"label":"Temperatur","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#ff9595","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":880,"y":2180,"wires":[[],[]]},{"id":"da5655d9.a8e518","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"2ff68391.9d889c","order":2,"width":0,"height":0,"label":"relative Luftfeuchte","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#aec7e8","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":900,"y":2260,"wires":[[],[]]},{"id":"38f9bb6d.55eb34","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"2ff68391.9d889c","order":4,"width":"3","height":"3","gtype":"gage","title":"Temperatur","label":"","format":"{{value}} °C","min":0,"max":"30","colors":["#00b500","#e6e600","#ca3838"],"seg1":"22","seg2":"25","x":880,"y":2220,"wires":[]},{"id":"439726dc.00616","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"2ff68391.9d889c","order":5,"width":"3","height":"3","gtype":"gage","title":"rel. Luftfeuchte","label":"","format":"{{value}} %","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"65","seg2":"75","x":890,"y":2300,"wires":[]},{"id":"e222ec27.32dcc8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":420,"y":2180,"wires":[["38f9bb6d.55eb34","59b20e52.35176","2a72ddf3.ce957a"]]},{"id":"2e6b5c62.8466cc","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":420,"y":2260,"wires":[["439726dc.00616","d002207c.88523"]]},{"id":"59b20e52.35176","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Keller","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":2320,"wires":[["b5e3c076.295208"]]},{"id":"79178198.d80288","type":"switch","z":"f5f1b719.8a699","name":"Temp > 40 C","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"40","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":2316.25,"wires":[["c8a251eb.b08228"]]},{"id":"e824b9f8.4c13d","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1900,"y":2317.5,"wires":[["dd12e85b.989bc8"]]},{"id":"b5e3c076.295208","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1411.2501220703125,"y":2318.75,"wires":[["79178198.d80288"]]},{"id":"c8a251eb.b08228","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1741.25,"y":2317.5,"wires":[["e824b9f8.4c13d","bff32b35.6c13f8"]]},{"id":"48739fb6.39ea4","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1890,"y":2240,"wires":[["dd12e85b.989bc8"]]},{"id":"7a3feaf5.5dc894","type":"change","z":"1f0f525d.8043ce","name":"global aussenhumid","rules":[{"t":"set","p":"aussenhumidowm","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":720,"wires":[[]]},{"id":"5401d44c.7b3d4c","type":"change","z":"9d2b39e8.bae118","name":"LuftfeuchteOWM","rules":[{"t":"set","p":"payload","pt":"msg","to":"aussenhumidowm","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":80,"wires":[["59aea9a7.da277"]]},{"id":"555439ac.a6379","type":"mqtt in","z":"9d2b39e8.bae118","name":"","topic":"/kueche/temp","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":270,"y":920,"wires":[["d4b70eab.ef25b","9648e169.433cf8"]]},{"id":"e8c7bda9.54837","type":"mqtt in","z":"9d2b39e8.bae118","name":"","topic":"/kueche/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":280,"y":260,"wires":[["61a9c369.dc945c","8341555e.f34c48"]]},{"id":"fbe79ecf.610538","type":"mqtt in","z":"9d2b39e8.bae118","name":"","topic":"/bad/temp","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":260,"y":1000,"wires":[["d4b70eab.ef25b","ce279c96.5f164"]]},{"id":"376529fa.c93c16","type":"mqtt in","z":"9d2b39e8.bae118","name":"","topic":"/bad/humid","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":260,"y":340,"wires":[["61a9c369.dc945c","e230f139.7b9c68"]]},{"id":"6036f71a.0ca43","type":"mqtt in","z":"9d2b39e8.bae118","name":"","topic":"/wz/temp","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":260,"y":1080,"wires":[["d4b70eab.ef25b","fa9ca71d.b923f8"]]},{"id":"292d4f9a.057e5","type":"mqtt in","z":"9d2b39e8.bae118","name":"","topic":"/wz/humid","qos":"0","datatype":"auto","broker":"7568a405.c7c94c","x":260,"y":420,"wires":[["61a9c369.dc945c","45970076.a87768"]]},{"id":"54c48acb.3f20d4","type":"mqtt in","z":"9d2b39e8.bae118","name":"","topic":"/sz/temp","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":260,"y":1160,"wires":[["d4b70eab.ef25b","3ff7a789.98b69"]]},{"id":"1ef5d627.62e472","type":"mqtt in","z":"9d2b39e8.bae118","name":"","topic":"/sz/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":260,"y":500,"wires":[["61a9c369.dc945c","dd7e0ded.4c8848"]]},{"id":"224a3d10.613322","type":"mqtt in","z":"9d2b39e8.bae118","name":"","topic":"/keller/temp","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":270,"y":1240,"wires":[["d4b70eab.ef25b","71feb0da.13aa3"]]},{"id":"ec10d678.070268","type":"mqtt in","z":"9d2b39e8.bae118","name":"","topic":"/keller/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":270,"y":580,"wires":[["61a9c369.dc945c","db848dc3.8dbb"]]},{"id":"61a9c369.dc945c","type":"debug","z":"9d2b39e8.bae118","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":110,"y":440,"wires":[]},{"id":"b12af6de.d8e128","type":"comment","z":"9d2b39e8.bae118","name":"OpenWeatherMap: Humidity","info":"","x":200,"y":40,"wires":[]},{"id":"8158a3aa.ced6a","type":"comment","z":"9d2b39e8.bae118","name":"MQTT-Sensoren: Humidity","info":"","x":170,"y":200,"wires":[]},{"id":"610396e0.e7a34","type":"debug","z":"9d2b39e8.bae118","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":450,"y":40,"wires":[]},{"id":"4a83eaaf.415cac","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":690,"y":180,"wires":[["41c2ce21.9d8d98","2841b87.c660bc8"]]},{"id":"5a4ce1fc.b1b5d8","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":690,"y":100,"wires":[["35e26095.299228","d0bae4f4.e08fe"]]},{"id":"6816395d.aa53f","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":480,"wires":[["dd87bdcf.369808","6a1bebb1.e26744"]]},{"id":"1f184d3.6f3f2b3","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":400,"wires":[["51f5e029.c79c28","f2058b64.b99058"]]},{"id":"47ebb1f9.faffa8","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":800,"wires":[["9fdfbc42.2257f8","cfa7cab8.12e84"]]},{"id":"aa9da2c8.2a582","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":720,"wires":[["468cb6ae.fc8548","bc1104df.093f08"]]},{"id":"5cf007bd.dd9e58","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":1100,"wires":[["f6965e02.3e1c68","dc02f98f.cb7348"]]},{"id":"d2bc22c.283b4e","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":1020,"wires":[["c10cba24.9cac8","a8669902.52ec38"]]},{"id":"d002207c.88523","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":680,"y":2260,"wires":[["da5655d9.a8e518","259d7135.bf68ce"]]},{"id":"2a72ddf3.ce957a","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":680,"y":2180,"wires":[["a75ea812.e126d8","cce22d00.72da"]]},{"id":"1a75fcb4.1dd86b","type":"comment","z":"1f0f525d.8043ce","name":"Kein Thermometer in HL installiert","info":"","x":1670,"y":740,"wires":[]},{"id":"67f9cffc.5edfa","type":"ui_text","z":"f5f1b719.8a699","group":"18b81b1b.70b245","order":3,"width":"0","height":"0","name":"","label":"gemessen um","format":"{{msg.payload}} Uhr","layout":"row-left","x":890,"y":300,"wires":[]},{"id":"863fc35c.729ca8","type":"function","z":"f5f1b719.8a699","name":"to payload","func":"msg.payload=msg.mytime;\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":300,"wires":[["67f9cffc.5edfa"]]},{"id":"3235ef51.ed8328","type":"simpletime","z":"f5f1b719.8a699","name":"","x":500,"y":300,"wires":[["863fc35c.729ca8"]]},{"id":"9694550a.a14b5","type":"ui_text","z":"f5f1b719.8a699","group":"137ca620.959b52","order":3,"width":"0","height":"0","name":"","label":"gemessen um","format":"{{msg.payload}} Uhr","layout":"row-left","x":890,"y":600,"wires":[]},{"id":"8e0e9f1c.e205","type":"function","z":"f5f1b719.8a699","name":"to payload","func":"msg.payload=msg.mytime;\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":600,"wires":[["9694550a.a14b5"]]},{"id":"79ad0f38.6835a","type":"simpletime","z":"f5f1b719.8a699","name":"","x":500,"y":600,"wires":[["8e0e9f1c.e205"]]},{"id":"815f5ebb.3b0148","type":"ui_text","z":"f5f1b719.8a699","group":"19c026cc.d12109","order":3,"width":"0","height":"0","name":"","label":"gemessen um","format":"{{msg.payload}} Uhr","layout":"row-left","x":890,"y":920,"wires":[]},{"id":"6e4ad0e0.b10668","type":"function","z":"f5f1b719.8a699","name":"to payload","func":"msg.payload=msg.mytime;\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":920,"wires":[["815f5ebb.3b0148"]]},{"id":"8e4d43ff.0dd998","type":"simpletime","z":"f5f1b719.8a699","name":"","x":500,"y":920,"wires":[["6e4ad0e0.b10668"]]},{"id":"9104b189.21fe3","type":"ui_text","z":"f5f1b719.8a699","group":"cd0c507e.ece488","order":3,"width":"0","height":"0","name":"","label":"gemessen um","format":"{{msg.payload}} Uhr","layout":"row-left","x":890,"y":1220,"wires":[]},{"id":"2da79ed.2016262","type":"function","z":"f5f1b719.8a699","name":"to payload","func":"msg.payload=msg.mytime;\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":1220,"wires":[["9104b189.21fe3"]]},{"id":"99fa3f7b.781208","type":"simpletime","z":"f5f1b719.8a699","name":"","x":500,"y":1220,"wires":[["2da79ed.2016262"]]},{"id":"9f4f9b39.dd9c9","type":"ui_text","z":"f5f1b719.8a699","group":"2ff68391.9d889c","order":3,"width":"0","height":"0","name":"","label":"gemessen um","format":"{{msg.payload}} Uhr","layout":"row-left","x":890,"y":2380,"wires":[]},{"id":"48d2ce0b.a84c08","type":"function","z":"f5f1b719.8a699","name":"to payload","func":"msg.payload=msg.mytime;\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":2380,"wires":[["9f4f9b39.dd9c9"]]},{"id":"7d9ea932.d0b108","type":"simpletime","z":"f5f1b719.8a699","name":"","x":500,"y":2380,"wires":[["48d2ce0b.a84c08"]]},{"id":"2dd42b41.7565b4","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":2240,"wires":[["e222ec27.32dcc8"]]},{"id":"cdbce53f.178e2","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":2280,"wires":[["2e6b5c62.8466cc","865e514c.31f88"]]},{"id":"833a03b4.65dee8","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":1100,"wires":[["f249ccdb.85a3c8","6123f9ad.77ed5"]]},{"id":"1a438924.40ef17","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":1060,"wires":[["c8695dfb.0f8838"]]},{"id":"700e4722.cac198","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":760,"wires":[["39d7d648.4cd68a"]]},{"id":"a965aa1c.385f","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":800,"wires":[["e94fa0ba.32b758","12afb6f3.343f91"]]},{"id":"8095735.eb9009","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":400,"wires":[["862fe844.56afc"]]},{"id":"f01952e5.7a9b3","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":230,"y":480,"wires":[["ebd94bcb.d58a9","5425f0a.0de099"]]},{"id":"2ee016cd.efc56a","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":100,"wires":[["c7db7c5f.a5f1b8"]]},{"id":"b2b5d29c.acb1c8","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":180,"wires":[["7da6b3c9.69e204","41bb6163.914e2"]]},{"id":"ff79458a.f0fc58","type":"ui_text_input","z":"a73e6298.8dcc88","name":"","label":"password","tooltip":"enter password","group":"f52cc8f2.2a5f98","order":5,"width":"3","height":"1","passthru":true,"mode":"password","delay":"0","topic":"","x":100,"y":1500,"wires":[["dbead02d.772778"]]},{"id":"dbead02d.772778","type":"switch","z":"a73e6298.8dcc88","name":"correct?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Rubus","vt":"str"},{"t":"neq","v":"Rubus","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":100,"y":1540,"wires":[["a614d33a.8cf078"],["d29af54.5b99288"]]},{"id":"a614d33a.8cf078","type":"function","z":"a73e6298.8dcc88","name":"enabled","func":"msg.payload=msg.enabled;\nmsg.enabled=true;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":1540,"wires":[["90399033.a96188","363a17fb.c92898","b5ccc691.969f38","b5ebd77.25abda8"]]},{"id":"c38fc0b3.360038","type":"inject","z":"a73e6298.8dcc88","name":"30sec","topic":"","payload":"","payloadType":"date","repeat":"30","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":1380,"wires":[["980d163b.69f6"]]},{"id":"980d163b.69f6","type":"function","z":"a73e6298.8dcc88","name":"disabled","func":"msg.payload=msg.enabled;\nmsg.enabled=false;\nreturn msg;","outputs":1,"noerr":0,"x":100,"y":1420,"wires":[["90399033.a96188","b5ccc691.969f38","b5ebd77.25abda8"]]},{"id":"2bf6f903.3beb56","type":"ui_toast","z":"a73e6298.8dcc88","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"korrekt","name":"","x":830,"y":1580,"wires":[]},{"id":"afd97e3c.b82348","type":"switch","z":"dced8749.bff1b8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"5","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1090,"y":540,"wires":[["51fdaa4.4e463d4"]]},{"id":"51fdaa4.4e463d4","type":"function","z":"dced8749.bff1b8","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Lass es sein!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1320,"y":540,"wires":[["9d5acf14.249608"]]},{"id":"363a17fb.c92898","type":"function","z":"a73e6298.8dcc88","name":"msg","func":"msg.payload=\"Du hast 30 sekunden um den Button zu klicken.\";\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":1580,"wires":[["2bf6f903.3beb56"]]},{"id":"43e963b7.ec33cc","type":"ui_toast","z":"a73e6298.8dcc88","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"falsch","name":"","x":830,"y":1620,"wires":[]},{"id":"d29af54.5b99288","type":"function","z":"a73e6298.8dcc88","name":"msg","func":"msg.payload=\"You shall not pass!\";\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":1620,"wires":[["43e963b7.ec33cc"]]},{"id":"8da263ce.2bca3","type":"debug","z":"f5f1b719.8a699","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":160,"y":260,"wires":[]},{"id":"175f7bd6.27d1bc","type":"join","z":"9d2b39e8.bae118","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":260,"wires":[["2cf4600d.87299"]]},{"id":"719d1fb2.a34e4","type":"debug","z":"9d2b39e8.bae118","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1090,"y":200,"wires":[]},{"id":"2cf4600d.87299","type":"function","z":"9d2b39e8.bae118","name":"kueche","func":"// this is passed a payload which is an object with\n// properties outside_temp and inside_temp\nif (msg.payload.outside_humid > msg.payload.kueche_humid) {\n    msg.payload = 0;\n} else\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":1000,"y":260,"wires":[["719d1fb2.a34e4","fb472651.889148"]]},{"id":"8341555e.f34c48","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":260,"wires":[["9d4f175d.e68d5"]]},{"id":"59aea9a7.da277","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":80,"wires":[["cd777aa8.ffdb48","610396e0.e7a34"]]},{"id":"a38f1ec2.9eb6c8","type":"inject","z":"9d2b39e8.bae118","name":"","topic":"outside_humid","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":120,"wires":[["5401d44c.7b3d4c"]]},{"id":"9d4f175d.e68d5","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"kueche_humid\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":260,"wires":[["175f7bd6.27d1bc"]]},{"id":"cd777aa8.ffdb48","type":"function","z":"9d2b39e8.bae118","name":"set topic","func":"msg.topic=\"outside_humid\";\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":80,"wires":[["175f7bd6.27d1bc","b313b249.56b788","5bcb8e9e.d6e7c8","1aada9eb.07c6be","c2526566.1fd718"]]},{"id":"e230f139.7b9c68","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":340,"wires":[["42b6373a.610278"]]},{"id":"42b6373a.610278","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"bad_humid\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":340,"wires":[["b313b249.56b788"]]},{"id":"45970076.a87768","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":420,"wires":[["ddff275d.bde7b8"]]},{"id":"ddff275d.bde7b8","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"wz_humid\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":420,"wires":[["5bcb8e9e.d6e7c8"]]},{"id":"dd7e0ded.4c8848","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":500,"wires":[["ce15fbc1.ba33a"]]},{"id":"ce15fbc1.ba33a","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"sz_humid\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":500,"wires":[["1aada9eb.07c6be"]]},{"id":"db848dc3.8dbb","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":580,"wires":[["6af070fa.8176f8"]]},{"id":"6af070fa.8176f8","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"keller_humid\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":580,"wires":[["c2526566.1fd718"]]},{"id":"b313b249.56b788","type":"join","z":"9d2b39e8.bae118","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":340,"wires":[["c9f9175c.8b1508"]]},{"id":"c9f9175c.8b1508","type":"function","z":"9d2b39e8.bae118","name":"bad","func":"// this is passed a payload which is an object with\n// properties outside_temp and inside_temp\nif (msg.payload.outside_humid > msg.payload.bad_humid) {\n    msg.payload = 0;\n} else\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":340,"wires":[["b87cfe60.68016"]]},{"id":"5bcb8e9e.d6e7c8","type":"join","z":"9d2b39e8.bae118","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":420,"wires":[["24590807.bc164"]]},{"id":"24590807.bc164","type":"function","z":"9d2b39e8.bae118","name":"wz","func":"// this is passed a payload which is an object with\n// properties outside_temp and inside_temp\nif (msg.payload.outside_humid > msg.payload.wz_humid) {\n    msg.payload = 0;\n} else\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":420,"wires":[["cb8647f6.6f5fd8"]]},{"id":"1aada9eb.07c6be","type":"join","z":"9d2b39e8.bae118","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":500,"wires":[["f0de693a.14729"]]},{"id":"f0de693a.14729","type":"function","z":"9d2b39e8.bae118","name":"sz","func":"// this is passed a payload which is an object with\n// properties outside_temp and inside_temp\nif (msg.payload.outside_humid > msg.payload.sz_humid) {\n    msg.payload = 0;\n} else\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":500,"wires":[["62503551.39195c"]]},{"id":"c2526566.1fd718","type":"join","z":"9d2b39e8.bae118","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":580,"wires":[["2c5b1088.b6795"]]},{"id":"2c5b1088.b6795","type":"function","z":"9d2b39e8.bae118","name":"keller","func":"// this is passed a payload which is an object with\n// properties outside_temp and inside_temp\nif (msg.payload.outside_humid > msg.payload.keller_humid) {\n    msg.payload = 0;\n} else\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":580,"wires":[["a278dcb4.6f51e8"]]},{"id":"d4b70eab.ef25b","type":"debug","z":"9d2b39e8.bae118","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":110,"y":1080,"wires":[]},{"id":"6499ad48.77189c","type":"join","z":"9d2b39e8.bae118","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":920,"wires":[["e0d0ee9c.cc5cb8"]]},{"id":"e0d0ee9c.cc5cb8","type":"function","z":"9d2b39e8.bae118","name":"kueche","func":"// this is passed a payload which is an object with\n// properties outside_temp and inside_temp\nif (msg.payload.outside_temp > msg.payload.kueche_temp) {\n    msg.payload = 0;\n} else\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":999,"y":921,"wires":[["7c15e0fc.dd9b3"]]},{"id":"9648e169.433cf8","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":920,"wires":[["806e09b.b600ff8"]]},{"id":"806e09b.b600ff8","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"kueche_temp\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":920,"wires":[["6499ad48.77189c"]]},{"id":"ce279c96.5f164","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1000,"wires":[["f364b8b8.10313"]]},{"id":"f364b8b8.10313","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"bad_temp\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":1000,"wires":[["c8d52bc.fc48258"]]},{"id":"fa9ca71d.b923f8","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1080,"wires":[["aad92251.4cd178"]]},{"id":"aad92251.4cd178","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"wz_temp\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":1080,"wires":[["f63bfa2d.10bdf8"]]},{"id":"3ff7a789.98b69","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1160,"wires":[["6de8999a.d22bf8"]]},{"id":"6de8999a.d22bf8","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"sz_temp\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":1160,"wires":[["10fe63bf.3d5c04"]]},{"id":"71feb0da.13aa3","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1240,"wires":[["19b5be37.e4fffa"]]},{"id":"19b5be37.e4fffa","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"keller_temp\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":1240,"wires":[["8f12346d.735328"]]},{"id":"c8d52bc.fc48258","type":"join","z":"9d2b39e8.bae118","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":1000,"wires":[["21fc9a4d.defd26"]]},{"id":"21fc9a4d.defd26","type":"function","z":"9d2b39e8.bae118","name":"bad","func":"// this is passed a payload which is an object with\n// properties outside_temp and inside_temp\nif (msg.payload.outside_temp > msg.payload.bad_temp) {\n    msg.payload = 0;\n} else\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":989,"y":1001,"wires":[["5946f269.db787c"]]},{"id":"f63bfa2d.10bdf8","type":"join","z":"9d2b39e8.bae118","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":1080,"wires":[["ee6f5b43.37f8c"]]},{"id":"ee6f5b43.37f8c","type":"function","z":"9d2b39e8.bae118","name":"wz","func":"// this is passed a payload which is an object with\n// properties outside_temp and inside_temp\nif (msg.payload.outside_humid > msg.payload.wz_temp) {\n    msg.payload = 0;\n} else\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":989,"y":1081,"wires":[["5d2bac1b.7c678c"]]},{"id":"10fe63bf.3d5c04","type":"join","z":"9d2b39e8.bae118","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":1160,"wires":[["82dc0414.b952f8"]]},{"id":"82dc0414.b952f8","type":"function","z":"9d2b39e8.bae118","name":"sz","func":"// this is passed a payload which is an object with\n// properties outside_temp and inside_temp\nif (msg.payload.outside_humid > msg.payload.sz_temp) {\n    msg.payload = 0;\n} else\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":989,"y":1161,"wires":[["56a743c4.9f379c"]]},{"id":"8f12346d.735328","type":"join","z":"9d2b39e8.bae118","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":870,"y":1240,"wires":[["24ba7869.6d4a9"]]},{"id":"24ba7869.6d4a9","type":"function","z":"9d2b39e8.bae118","name":"keller","func":"// this is passed a payload which is an object with\n// properties outside_temp and inside_temp\nif (msg.payload.outside_humid > msg.payload.keller_temp) {\n    msg.payload = 0;\n} else\n{\n    msg.payload = 1;\n}\nreturn msg;","outputs":1,"noerr":0,"x":989,"y":1241,"wires":[["fcfa5986.ef3908"]]},{"id":"58e15c16.eb333c","type":"change","z":"9d2b39e8.bae118","name":"TemperaturOWM","rules":[{"t":"set","p":"payload","pt":"msg","to":"aussentempowm","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":760,"wires":[["2ba1411e.e65806"]]},{"id":"6eab6292.2b159c","type":"inject","z":"9d2b39e8.bae118","name":"","topic":"outside_temp","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":240,"y":800,"wires":[["58e15c16.eb333c"]]},{"id":"2ba1411e.e65806","type":"change","z":"9d2b39e8.bae118","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":760,"wires":[["2eef8dcd.58aed2","2f280408.bbde7c"]]},{"id":"30eca10.8d2246","type":"comment","z":"9d2b39e8.bae118","name":"OpenWeatherMap: Temperatur","info":"","x":190,"y":720,"wires":[]},{"id":"47d60072.510b68","type":"comment","z":"9d2b39e8.bae118","name":"MQTT-Sensoren: Temperatur","info":"","x":180,"y":880,"wires":[]},{"id":"2eef8dcd.58aed2","type":"debug","z":"9d2b39e8.bae118","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":470,"y":720,"wires":[]},{"id":"2f280408.bbde7c","type":"function","z":"9d2b39e8.bae118","name":"","func":"msg.topic=\"outside_temp\";\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":760,"wires":[["6499ad48.77189c","c8d52bc.fc48258","f63bfa2d.10bdf8","10fe63bf.3d5c04","8f12346d.735328"]]},{"id":"fb472651.889148","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":260,"wires":[["47eb96c5.9ab9e8"],["47eb96c5.9ab9e8"]]},{"id":"cafbf1a9.e3c03","type":"ui_text","z":"9d2b39e8.bae118","group":"18b81b1b.70b245","order":7,"width":0,"height":0,"name":"","label":"Lüften sinnvoll?","format":"{{msg.payload}}","layout":"row-left","x":2400,"y":580,"wires":[]},{"id":"bacd0d05.a40488","type":"function","z":"9d2b39e8.bae118","name":"no","func":"msg  = {payload: '<i class=\"fa fa-thumbs-down\" aria-hidden=\"true\"></i>'};\nreturn msg;\n","outputs":1,"noerr":0,"x":2230,"y":560,"wires":[["cafbf1a9.e3c03"]]},{"id":"cedea10b.6e387","type":"function","z":"9d2b39e8.bae118","name":"yes","func":"msg  = {payload: '<i class=\"fa fa-thumbs-up\" aria-hidden=\"true\"></i>'};\nreturn msg;\n","outputs":1,"noerr":0,"x":2230,"y":600,"wires":[["cafbf1a9.e3c03"]]},{"id":"96566533.646e1","type":"ui_text","z":"9d2b39e8.bae118","group":"137ca620.959b52","order":7,"width":0,"height":0,"name":"","label":"Lüften sinnvoll?","format":"{{msg.payload}}","layout":"row-left","x":2400,"y":660,"wires":[]},{"id":"4b4eccb4.76b184","type":"function","z":"9d2b39e8.bae118","name":"no","func":"msg  = {payload: '<i class=\"fa fa-thumbs-down\" aria-hidden=\"true\"></i>'};\nreturn msg;\n","outputs":1,"noerr":0,"x":2230,"y":640,"wires":[["96566533.646e1"]]},{"id":"4f173bc6.a6fbe4","type":"function","z":"9d2b39e8.bae118","name":"yes","func":"msg  = {payload: '<i class=\"fa fa-thumbs-up\" aria-hidden=\"true\"></i>'};\nreturn msg;\n","outputs":1,"noerr":0,"x":2230,"y":680,"wires":[["96566533.646e1"]]},{"id":"4db2bcaf.c22e54","type":"ui_text","z":"9d2b39e8.bae118","group":"19c026cc.d12109","order":7,"width":0,"height":0,"name":"","label":"Lüften sinnvoll?","format":"{{msg.payload}}","layout":"row-left","x":2400,"y":740,"wires":[]},{"id":"1e50e74f.cb9a91","type":"function","z":"9d2b39e8.bae118","name":"no","func":"msg  = {payload: '<i class=\"fa fa-thumbs-down\" aria-hidden=\"true\"></i>'};\nreturn msg;\n","outputs":1,"noerr":0,"x":2230,"y":720,"wires":[["4db2bcaf.c22e54"]]},{"id":"33378a8b.fa615e","type":"function","z":"9d2b39e8.bae118","name":"yes","func":"msg  = {payload: '<i class=\"fa fa-thumbs-up\" aria-hidden=\"true\"></i>'};\nreturn msg;\n","outputs":1,"noerr":0,"x":2230,"y":760,"wires":[["4db2bcaf.c22e54"]]},{"id":"fb21477f.4f4448","type":"ui_text","z":"9d2b39e8.bae118","group":"cd0c507e.ece488","order":7,"width":0,"height":0,"name":"","label":"Lüften sinnvoll?","format":"{{msg.payload}}","layout":"row-left","x":2400,"y":820,"wires":[]},{"id":"7e2ccbe2.32edd4","type":"function","z":"9d2b39e8.bae118","name":"no","func":"msg  = {payload: '<i class=\"fa fa-thumbs-down\" aria-hidden=\"true\"></i>'};\nreturn msg;\n","outputs":1,"noerr":0,"x":2230,"y":800,"wires":[["fb21477f.4f4448"]]},{"id":"c111413e.440c8","type":"function","z":"9d2b39e8.bae118","name":"yes","func":"msg  = {payload: '<i class=\"fa fa-thumbs-up\" aria-hidden=\"true\"></i>'};\nreturn msg;\n","outputs":1,"noerr":0,"x":2230,"y":840,"wires":[["fb21477f.4f4448"]]},{"id":"54e6f5de.ab36ec","type":"ui_text","z":"9d2b39e8.bae118","group":"2ff68391.9d889c","order":7,"width":0,"height":0,"name":"","label":"Lüften sinnvoll?","format":"{{msg.payload}}","layout":"row-left","x":2400,"y":900,"wires":[]},{"id":"f61af106.1799c","type":"function","z":"9d2b39e8.bae118","name":"no","func":"msg  = {payload: '<i class=\"fa fa-thumbs-down\" aria-hidden=\"true\"></i>'};\nreturn msg;\n","outputs":1,"noerr":0,"x":2230,"y":880,"wires":[["54e6f5de.ab36ec"]]},{"id":"10ef4d37.ccd60b","type":"function","z":"9d2b39e8.bae118","name":"yes","func":"msg  = {payload: '<i class=\"fa fa-thumbs-up\" aria-hidden=\"true\"></i>'};\nreturn msg;\n","outputs":1,"noerr":0,"x":2230,"y":920,"wires":[["54e6f5de.ab36ec"]]},{"id":"b87cfe60.68016","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":340,"wires":[["e1087bc.3229e88"],["e1087bc.3229e88"]]},{"id":"cb8647f6.6f5fd8","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":420,"wires":[["ea333997.1f3d8"],["ea333997.1f3d8"]]},{"id":"62503551.39195c","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":500,"wires":[["9c13f8e5.6d9668"],["9c13f8e5.6d9668"]]},{"id":"a278dcb4.6f51e8","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":580,"wires":[["75be07fa.9bd65"],["75be07fa.9bd65"]]},{"id":"d913aec1.3f17a8","type":"function","z":"9d2b39e8.bae118","name":"humid UND temp; inside<outside","func":"context.data = context.data || new Object();\n\nswitch (msg.topic) {\n    case \"humid\":\n        context.data.humid = msg.payload;\n        msg = null;\n        break;\n\n    case \"temp\":\n        context.data.temp = msg.payload;\n        msg = null;\n        break;    \n        \n    default:\n        msg = null;\n    \tbreak;\n\n}\n\nif(context.data.humid != null && context.data.temp != null) {\n\tmsg2 = new Object();\n    msg2 = context.data;\n    context.data=null;\n\treturn msg2;\n} else return msg;","outputs":1,"noerr":0,"x":1820,"y":1440,"wires":[[]]},{"id":"9b3fafd0.c933f8","type":"function","z":"9d2b39e8.bae118","name":"Task1:humid","func":"msg.topic=\"humid\";\nreturn msg;","outputs":1,"noerr":0,"x":1550,"y":1420,"wires":[["d913aec1.3f17a8"]]},{"id":"2d000412.3bfe64","type":"function","z":"9d2b39e8.bae118","name":"Task2: temp","func":"msg.topic=\"temp\";\nreturn msg;","outputs":1,"noerr":0,"x":1550,"y":1460,"wires":[["d913aec1.3f17a8"]]},{"id":"7c15e0fc.dd9b3","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":920,"wires":[["f973134d.49e098"],["f973134d.49e098"]]},{"id":"5946f269.db787c","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":1000,"wires":[["7f06998b.884dd"],["7f06998b.884dd"]]},{"id":"5d2bac1b.7c678c","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":1080,"wires":[["bb19d60.54d9228"],["bb19d60.54d9228"]]},{"id":"56a743c4.9f379c","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":1160,"wires":[["ae2ce12f.67f988"],["ae2ce12f.67f988"]]},{"id":"fcfa5986.ef3908","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1150,"y":1240,"wires":[["54674222.e3aa0c"],["54674222.e3aa0c"]]},{"id":"c5a92b47.54ee1","type":"inject","z":"9d2b39e8.bae118","name":"","topic":"humid","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1510,"y":60,"wires":[["3ea92ed5.e2f3fa"]]},{"id":"87f11975.910188","type":"inject","z":"9d2b39e8.bae118","name":"","topic":"humid","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1510,"y":100,"wires":[["3ea92ed5.e2f3fa"]]},{"id":"1dfe68ac.55369f","type":"inject","z":"9d2b39e8.bae118","name":"","topic":"temp","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1510,"y":140,"wires":[["3ea92ed5.e2f3fa"]]},{"id":"626aeb22.105314","type":"inject","z":"9d2b39e8.bae118","name":"","topic":"temp","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1510,"y":180,"wires":[["3ea92ed5.e2f3fa"]]},{"id":"f023ccbf.98f9b","type":"function","z":"9d2b39e8.bae118","name":"humid UND temp; inside>outside","func":"context.data = context.data || new Object();\n\nswitch (msg.topic) {\n    case \"humid\":\n        context.data.humid = msg.payload;\n        msg = null;\n        break;\n\n    case \"temp\":\n        context.data.temp = msg.payload;\n        msg = null;\n        break;    \n        \n    default:\n        msg = null;\n    \tbreak;\n\n}\n\nif(context.data.humid != null && context.data.temp != null) {\n\tmsg2 = new Object();\n    msg2 = context.data;\n    context.data=null;\n\treturn msg2;\n} else return msg;","outputs":1,"noerr":0,"x":1820,"y":1560,"wires":[[]]},{"id":"1eb34527.03915b","type":"function","z":"9d2b39e8.bae118","name":"Task1:humid","func":"msg.topic=\"humid\";\nreturn msg;","outputs":1,"noerr":0,"x":1550,"y":1540,"wires":[["f023ccbf.98f9b"]]},{"id":"8f9d3682.2237a8","type":"function","z":"9d2b39e8.bae118","name":"Task2: temp","func":"msg.topic=\"temp\";\nreturn msg;","outputs":1,"noerr":0,"x":1550,"y":1580,"wires":[["f023ccbf.98f9b"]]},{"id":"bd1aa2f5.6d2c6","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1270,"y":1440,"wires":[["9b3fafd0.c933f8"],["1eb34527.03915b"]]},{"id":"702a6467.eedb5c","type":"switch","z":"9d2b39e8.bae118","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1270,"y":1560,"wires":[["2d000412.3bfe64"],["8f9d3682.2237a8"]]},{"id":"57566e09.0b5cd","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die Bodentemperatur beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":240,"wires":[["9ce34855.9a0e38"]]},{"id":"f350a310.565be","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die Außentemperatur beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":260,"wires":[["9ce34855.9a0e38"]]},{"id":"9ce34855.9a0e38","type":"chatbot-conversation","z":"57b8c30b.db8ba4","name":"Francesco:Conversation","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"122774981","userId":"","transport":"telegram","store":"","x":1930,"y":340,"wires":[["30159a70.1b72be"]]},{"id":"20ec1f3b.eac0f","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur im Keller beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":280,"wires":[["9ce34855.9a0e38"]]},{"id":"8e6c9f71.19eab","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur im Keller beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":300,"wires":[["9ce34855.9a0e38"]]},{"id":"f587c36.c42794","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur im Wohnzimmer beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":320,"wires":[["9ce34855.9a0e38"]]},{"id":"a6cede9d.b02cb","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur in der Küche beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1620,"y":360,"wires":[["9ce34855.9a0e38"]]},{"id":"ead0d8d6.c9acb","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die relative Luftfeuchtigkeit im Wohnzimmer beträgt \" + msg.payload +\" %.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":340,"wires":[["9ce34855.9a0e38"]]},{"id":"d404b3a1.4d658","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die relative Luftfeuchtigkeit in der Küche beträgt \" + msg.payload +\" %.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":380,"wires":[["9ce34855.9a0e38"]]},{"id":"548e22ac.56d894","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur im Bad beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":400,"wires":[["9ce34855.9a0e38"]]},{"id":"4ffc971a.b338f","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die relative Luftfeuchtigkeit im Bad beträgt \" + msg.payload +\" %.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":420,"wires":[["9ce34855.9a0e38"]]},{"id":"64b659f5.18b3d8","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die Temperatur im Schlafzimmer beträgt \" + msg.payload +\" °C.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":440,"wires":[["9ce34855.9a0e38"]]},{"id":"8387218e.3f2c2","type":"function","z":"57b8c30b.db8ba4","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Die relative Luftfeuchtigkeit im Schlafzimmer beträgt \" + msg.payload +\" %.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1610,"y":460,"wires":[["9ce34855.9a0e38"]]},{"id":"29c2414d.413ace","type":"chatbot-conversation","z":"f5f1b719.8a699","name":"Francesco:Conversation","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"122774981","userId":"","transport":"telegram","store":"","x":2970,"y":260,"wires":[["7136f5d6.ca8d04"]]},{"id":"6d57a09a.71852","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":100,"wires":[["29c2414d.413ace"]]},{"id":"98d5c03b.6eb1c","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":80,"wires":[["29c2414d.413ace"]]},{"id":"6611571b.8c339","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":120,"wires":[["29c2414d.413ace"]]},{"id":"5dbbc812.8efdc8","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":180,"wires":[["29c2414d.413ace"]]},{"id":"6bb94dc0.05a974","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2740,"y":160,"wires":[["29c2414d.413ace"]]},{"id":"4ac66ea.62be79","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":200,"wires":[["29c2414d.413ace"]]},{"id":"7585607a.9d58a","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":260,"wires":[["29c2414d.413ace"]]},{"id":"fe694f02.39ae5","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2740,"y":240,"wires":[["29c2414d.413ace"]]},{"id":"4bca0125.ae1798","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":280,"wires":[["29c2414d.413ace"]]},{"id":"c9ca0d16.49e86","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":340,"wires":[["29c2414d.413ace"]]},{"id":"2088cae0.03013e","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2740,"y":320,"wires":[["29c2414d.413ace"]]},{"id":"c40c919e.829228","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":360,"wires":[["29c2414d.413ace"]]},{"id":"31cd49a6.2e9efe","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":420,"wires":[["29c2414d.413ace"]]},{"id":"3b3ab007.6b14c8","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2740,"y":400,"wires":[["29c2414d.413ace"]]},{"id":"bff32b35.6c13f8","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":440,"wires":[["29c2414d.413ace"]]},{"id":"7f62a16b.37ab1","type":"function","z":"2a05f905.b219ae","name":"humid UND temp; inside<outside = NO","func":"context.data = context.data || new Object();\n\nswitch (msg.topic) {\n    case \"humid\":\n        context.data.humid = msg.payload;\n        msg = null;\n        break;\n\n    case \"temp\":\n        context.data.temp = msg.payload;\n        msg = null;\n        break;    \n        \n    default:\n        msg = null;\n    \tbreak;\n\n}\n\nif(context.data.humid != null && context.data.temp != null) {\n\tmsg2 = new Object();\n    msg2 = context.data;\n    context.data=null;\n\treturn msg2;\n} else return msg;","outputs":1,"noerr":0,"x":1070,"y":340,"wires":[[]]},{"id":"261996b3.d78072","type":"function","z":"2a05f905.b219ae","name":"Task1:humid","func":"msg.topic=\"humid\";\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":320,"wires":[["7f62a16b.37ab1"]]},{"id":"535c968e.ee7ba8","type":"function","z":"2a05f905.b219ae","name":"Task2: temp","func":"msg.topic=\"temp\";\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":360,"wires":[["7f62a16b.37ab1"]]},{"id":"822248af.fb19d8","type":"function","z":"2a05f905.b219ae","name":"humid UND temp; inside>outside = YES","func":"context.data = context.data || new Object();\n\nswitch (msg.topic) {\n    case \"humid\":\n        context.data.humid = msg.payload;\n        msg = null;\n        break;\n\n    case \"temp\":\n        context.data.temp = msg.payload;\n        msg = null;\n        break;    \n        \n    default:\n        msg = null;\n    \tbreak;\n\n}\n\nif(context.data.humid != null && context.data.temp != null) {\n\tmsg2 = new Object();\n    msg2 = context.data;\n    context.data=null;\n\treturn msg2;\n} else return msg;","outputs":1,"noerr":0,"x":1080,"y":460,"wires":[[]]},{"id":"73069706.2a1fe8","type":"function","z":"2a05f905.b219ae","name":"Task1:humid","func":"msg.topic=\"humid\";\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":440,"wires":[["822248af.fb19d8"]]},{"id":"89718760.8181c8","type":"function","z":"2a05f905.b219ae","name":"Task2: temp","func":"msg.topic=\"temp\";\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":480,"wires":[["822248af.fb19d8"]]},{"id":"8f1a89f6.76329","type":"switch","z":"2a05f905.b219ae","name":"humid","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":520,"y":320,"wires":[["261996b3.d78072"],["73069706.2a1fe8"]]},{"id":"76c58d90.ca33ec","type":"switch","z":"2a05f905.b219ae","name":"temp","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":520,"y":460,"wires":[["535c968e.ee7ba8"],["89718760.8181c8"]]},{"id":"ed115edb.3a34d","type":"switch","z":"2a05f905.b219ae","name":"teile nach topic: 'humid' & 'temp'","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"humid","vt":"str"},{"t":"eq","v":"temp","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":260,"y":380,"wires":[["8f1a89f6.76329"],["76c58d90.ca33ec"]]},{"id":"3ea92ed5.e2f3fa","type":"subflow:2a05f905.b219ae","z":"9d2b39e8.bae118","name":"","env":[],"x":1670,"y":580,"wires":[["fd78abeb.c77a4","bacd0d05.a40488"],["67b739f4.f0e03","cedea10b.6e387","7515417d.d4adf8"]],"outputLabels":["NO","YES"]},{"id":"fd78abeb.c77a4","type":"debug","z":"9d2b39e8.bae118","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1870,"y":60,"wires":[]},{"id":"67b739f4.f0e03","type":"debug","z":"9d2b39e8.bae118","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1870,"y":100,"wires":[]},{"id":"47eb96c5.9ab9e8","type":"function","z":"9d2b39e8.bae118","name":"Task1:humid","func":"msg.topic=\"humid\";\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":260,"wires":[["3ea92ed5.e2f3fa"]]},{"id":"f973134d.49e098","type":"function","z":"9d2b39e8.bae118","name":"Task2: temp","func":"msg.topic=\"temp\";\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":919,"wires":[["3ea92ed5.e2f3fa"]]},{"id":"50c4ae8d.fcdf9","type":"subflow:2a05f905.b219ae","z":"9d2b39e8.bae118","name":"","env":[],"x":1670,"y":660,"wires":[["4b4eccb4.76b184"],["4f173bc6.a6fbe4","d8ec5ff4.f380f"]],"outputLabels":["NO","YES"]},{"id":"e1087bc.3229e88","type":"function","z":"9d2b39e8.bae118","name":"Task1:humid","func":"msg.topic=\"humid\";\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":340,"wires":[["50c4ae8d.fcdf9"]]},{"id":"954fb3d0.293018","type":"subflow:2a05f905.b219ae","z":"9d2b39e8.bae118","name":"","env":[],"x":1670,"y":740,"wires":[["1e50e74f.cb9a91"],["33378a8b.fa615e","a2f0e717.5851a8"]],"outputLabels":["NO","YES"]},{"id":"ea333997.1f3d8","type":"function","z":"9d2b39e8.bae118","name":"Task1:humid","func":"msg.topic=\"humid\";\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":420,"wires":[["954fb3d0.293018"]]},{"id":"3d1067cd.8aa858","type":"subflow:2a05f905.b219ae","z":"9d2b39e8.bae118","name":"","env":[],"x":1670,"y":820,"wires":[["7e2ccbe2.32edd4"],["c111413e.440c8","c5fdd011.b8747"]],"outputLabels":["NO","YES"]},{"id":"9c13f8e5.6d9668","type":"function","z":"9d2b39e8.bae118","name":"Task1:humid","func":"msg.topic=\"humid\";\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":500,"wires":[["3d1067cd.8aa858"]]},{"id":"825cd909.a09e58","type":"subflow:2a05f905.b219ae","z":"9d2b39e8.bae118","name":"","env":[],"x":1670,"y":900,"wires":[["f61af106.1799c"],["10ef4d37.ccd60b","8d2082c4.b15b38"]],"outputLabels":["NO","YES"]},{"id":"75be07fa.9bd65","type":"function","z":"9d2b39e8.bae118","name":"Task1:humid","func":"msg.topic=\"humid\";\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":580,"wires":[["825cd909.a09e58"]]},{"id":"7f06998b.884dd","type":"function","z":"9d2b39e8.bae118","name":"Task2: temp","func":"msg.topic=\"temp\";\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":999,"wires":[["50c4ae8d.fcdf9"]]},{"id":"bb19d60.54d9228","type":"function","z":"9d2b39e8.bae118","name":"Task2: temp","func":"msg.topic=\"temp\";\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":1079,"wires":[["954fb3d0.293018"]]},{"id":"ae2ce12f.67f988","type":"function","z":"9d2b39e8.bae118","name":"Task2: temp","func":"msg.topic=\"temp\";\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":1159,"wires":[["3d1067cd.8aa858"]]},{"id":"54674222.e3aa0c","type":"function","z":"9d2b39e8.bae118","name":"Task2: temp","func":"msg.topic=\"temp\";\nreturn msg;","outputs":1,"noerr":0,"x":1310,"y":1239,"wires":[["825cd909.a09e58"]]},{"id":"df233d64.06d268","type":"function","z":"dced8749.bff1b8","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Limit erreicht!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1320,"y":580,"wires":[["9d5acf14.249608"]]},{"id":"38fb62e1.8f301e","type":"switch","z":"dced8749.bff1b8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"6","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1090,"y":580,"wires":[["df233d64.06d268"]]},{"id":"94d2d5b.af432a8","type":"debug","z":"dced8749.bff1b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1130,"y":60,"wires":[]},{"id":"63171519.2a3f64","type":"inject","z":"dced8749.bff1b8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":660,"y":460,"wires":[["2bae3868.bdcc9","343b3a2f.2af23e"]]},{"id":"32d5ceb5.bec54a","type":"function","z":"dced8749.bff1b8","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Idiot\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1320,"y":500,"wires":[[]]},{"id":"686315c5.f66184","type":"switch","z":"dced8749.bff1b8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1090,"y":500,"wires":[["32d5ceb5.bec54a"]]},{"id":"90c2defe.031ec8","type":"chatbot-conversation","z":"9d2b39e8.bae118","name":"","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"173173012","userId":"","transport":"telegram","store":"","x":2940,"y":1200,"wires":[["88fda220.cc7c6"]]},{"id":"88fda220.cc7c6","type":"chatbot-telegram-send","z":"9d2b39e8.bae118","d":true,"bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","track":false,"passThrough":false,"outputs":0,"x":3050,"y":1280,"wires":[]},{"id":"7515417d.d4adf8","type":"change","z":"9d2b39e8.bae118","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Küche","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2080,"y":1120,"wires":[["73ab1592.f7091c"]]},{"id":"d8ec5ff4.f380f","type":"change","z":"9d2b39e8.bae118","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2080,"y":1160,"wires":[["7ac0ec1a.ee65e4"]]},{"id":"a2f0e717.5851a8","type":"change","z":"9d2b39e8.bae118","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Wohnzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2080,"y":1200,"wires":[["52e1a734.4884a8"]]},{"id":"c5fdd011.b8747","type":"change","z":"9d2b39e8.bae118","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Schlafzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2080,"y":1240,"wires":[["a5f9c8bf.f12fa"]]},{"id":"8d2082c4.b15b38","type":"change","z":"9d2b39e8.bae118","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Keller","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2080,"y":1280,"wires":[["f80ea8ac.9b366"]]},{"id":"dfbcdce0.83f3d8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"day","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":480,"y":260,"wires":[["3235ef51.ed8328"]]},{"id":"b366d860.00597","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"day","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":520,"y":580,"wires":[["79ad0f38.6835a"]]},{"id":"423aa167.6cb2e","type":"function","z":"9d2b39e8.bae118","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Es ist jetzt sinnvoll die \" + msg.topic +\" zu lüften.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2660,"y":1120,"wires":[["90c2defe.031ec8"]]},{"id":"df3547c2.264a58","type":"function","z":"9d2b39e8.bae118","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Es ist jetzt sinnvoll das \" + msg.topic +\" zu lüften.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2660,"y":1160,"wires":[["90c2defe.031ec8"]]},{"id":"e6d179fc.41d8a","type":"function","z":"9d2b39e8.bae118","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Es ist jetzt sinnvoll das \" + msg.topic +\" zu lüften.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2660,"y":1200,"wires":[["90c2defe.031ec8"]]},{"id":"f1ebab39.b9e4b","type":"function","z":"9d2b39e8.bae118","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Es ist jetzt sinnvoll das \" + msg.topic +\" zu lüften.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2660,"y":1240,"wires":[["90c2defe.031ec8"]]},{"id":"bd50029.06c3e8","type":"function","z":"9d2b39e8.bae118","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Es ist jetzt sinnvoll den \" + msg.topic +\" zu lüften.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2660,"y":1280,"wires":[["90c2defe.031ec8"]]},{"id":"73ab1592.f7091c","type":"delay","z":"9d2b39e8.bae118","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":2330,"y":1120,"wires":[["423aa167.6cb2e","c8d45128.7bf1b8"]]},{"id":"7ac0ec1a.ee65e4","type":"delay","z":"9d2b39e8.bae118","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":2330,"y":1160,"wires":[["df3547c2.264a58","2626b7d0.fb52e"]]},{"id":"52e1a734.4884a8","type":"delay","z":"9d2b39e8.bae118","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":2330,"y":1200,"wires":[["e6d179fc.41d8a","30719a4.4a1fd66"]]},{"id":"a5f9c8bf.f12fa","type":"delay","z":"9d2b39e8.bae118","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":2330,"y":1240,"wires":[["f1ebab39.b9e4b","f756a202.b03ff"]]},{"id":"f80ea8ac.9b366","type":"delay","z":"9d2b39e8.bae118","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":2330,"y":1280,"wires":[["bd50029.06c3e8","4a12e270.9cbdcc"]]},{"id":"f222068a.67b7c","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/sz-h/temp","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":80,"y":1420,"wires":[["549bed03.cf76a4"]]},{"id":"83739c5d.a1d63","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/sz/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":80,"y":1460,"wires":[["9c43d524.63fa28"]]},{"id":"d6d48a4e.916308","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Schlafzimmer2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":1480,"wires":[["448c68f5.1ce158"]]},{"id":"e3e29908.054bc8","type":"switch","z":"f5f1b719.8a699","name":"Humid > 65 %","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"65","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1588.7501220703125,"y":1477.5,"wires":[["1583e161.26ee8f"]]},{"id":"a4e5a6be.7d2978","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte im \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1898.7501220703125,"y":1476.25,"wires":[["dd12e85b.989bc8"]]},{"id":"448c68f5.1ce158","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1408.7501220703125,"y":1478.75,"wires":[["e3e29908.054bc8"]]},{"id":"bf6d7c50.525f5","type":"comment","z":"f5f1b719.8a699","name":"Schlafzimmer2","info":"","x":100,"y":1320,"wires":[]},{"id":"fec8f03a.b36828","type":"smooth","z":"f5f1b719.8a699","name":"max","property":"payload","action":"max","count":"3600","round":"2","mult":"single","reduce":true,"x":660,"y":1540,"wires":[["8b93e2bb.18ee38","35db13b.d6cb5ec"]]},{"id":"1583e161.26ee8f","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740.0001220703125,"y":1476.25,"wires":[["a4e5a6be.7d2978"]]},{"id":"ab5f9520.63b64","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Schlafzimmer2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":1440,"wires":[["28684f9e.6791f"]]},{"id":"43c1d3a4.ba9b14","type":"switch","z":"f5f1b719.8a699","name":"Temp < 17°C","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"17","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":1438.75,"wires":[["7145ef3c.b2b52"]]},{"id":"28684f9e.6791f","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1410.0001220703125,"y":1440,"wires":[["43c1d3a4.ba9b14"]]},{"id":"7145ef3c.b2b52","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740,"y":1440,"wires":[["31b36b61.dbd404"]]},{"id":"59375d1b.374e4c","type":"ui_text","z":"f5f1b719.8a699","group":"d91657b7.4e111","order":6,"width":"6","height":"2","name":"","label":"Optimal: <br> T = 16-18 °C <br>  rel. Feuchte = 40-60 % ","format":"","layout":"row-spread","x":610,"y":1340,"wires":[]},{"id":"8b93e2bb.18ee38","type":"ui_text","z":"f5f1b719.8a699","group":"d91657b7.4e111","order":3,"width":0,"height":0,"name":"","label":"max. gemessene Luftfeuchte","format":"{{msg.payload}} %","layout":"row-left","x":920,"y":1540,"wires":[]},{"id":"9d680e66.6aa5b8","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"d91657b7.4e111","order":1,"width":0,"height":0,"label":"Temperatur","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#ff9595","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":880,"y":1380,"wires":[[],[]]},{"id":"77a7fa1a.c70bac","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"d91657b7.4e111","order":2,"width":0,"height":0,"label":"relative Luftfeuchte","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#aec7e8","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":900,"y":1460,"wires":[[],[]]},{"id":"a92879e0.891ab8","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"d91657b7.4e111","order":4,"width":"3","height":"3","gtype":"gage","title":"Temperatur","label":"","format":"{{value}} °C","min":0,"max":"30","colors":["#00b500","#e6e600","#ca3838"],"seg1":"22","seg2":"25","x":880,"y":1420,"wires":[]},{"id":"34eb69d4.773c86","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"d91657b7.4e111","order":5,"width":"3","height":"3","gtype":"gage","title":"rel. Luftfeuchte","label":"","format":"{{value}} %","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"65","seg2":"75","x":890,"y":1500,"wires":[]},{"id":"9c5afe9e.730128","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":380,"y":1380,"wires":[["a92879e0.891ab8","d6835e8a.3cb65","455b72c6.ce375c"]]},{"id":"403a6a16.db16e4","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":380,"y":1460,"wires":[["34eb69d4.773c86","c91b71be.723808"]]},{"id":"d6835e8a.3cb65","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Schlafzimmer2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1230,"y":1520,"wires":[["968b0c3c.24bfe"]]},{"id":"9db0df9d.1a5f3","type":"switch","z":"f5f1b719.8a699","name":"Temp > 40 C","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"40","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":1516.25,"wires":[["ac15328d.f748c"]]},{"id":"508a196.4573c68","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1900,"y":1517.5,"wires":[["dd12e85b.989bc8"]]},{"id":"968b0c3c.24bfe","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1411.2501220703125,"y":1518.75,"wires":[["9db0df9d.1a5f3"]]},{"id":"ac15328d.f748c","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1741.25,"y":1517.5,"wires":[["508a196.4573c68"]]},{"id":"31b36b61.dbd404","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1890,"y":1440,"wires":[["dd12e85b.989bc8"]]},{"id":"c91b71be.723808","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":1460,"wires":[["77a7fa1a.c70bac","d6d48a4e.916308"]]},{"id":"455b72c6.ce375c","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":1380,"wires":[["9d680e66.6aa5b8","ab5f9520.63b64"]]},{"id":"5c9a7fcd.32c778","type":"ui_text","z":"f5f1b719.8a699","group":"d91657b7.4e111","order":3,"width":"0","height":"0","name":"","label":"gemessen um","format":"{{msg.payload}} Uhr","layout":"row-left","x":890,"y":1580,"wires":[]},{"id":"791765de.8a3484","type":"function","z":"f5f1b719.8a699","name":"to payload","func":"msg.payload=msg.mytime;\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":1580,"wires":[["5c9a7fcd.32c778"]]},{"id":"35db13b.d6cb5ec","type":"simpletime","z":"f5f1b719.8a699","name":"","x":500,"y":1580,"wires":[["791765de.8a3484"]]},{"id":"9c43d524.63fa28","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":1460,"wires":[["403a6a16.db16e4","fec8f03a.b36828","8fc970e8.547a48"]]},{"id":"549bed03.cf76a4","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":1420,"wires":[["9c5afe9e.730128","8fc970e8.547a48"]]},{"id":"6a16d39.024a42c","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/sz-w/temp","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":80,"y":1800,"wires":[["c7ab0ff.01295f","8fc970e8.547a48"]]},{"id":"31ba67d6.66ab7","type":"mqtt in","z":"f5f1b719.8a699","name":"","topic":"/sz-w/humid","qos":"2","datatype":"auto","broker":"7568a405.c7c94c","x":90,"y":1840,"wires":[["87eb0c.0f8e74f8"]]},{"id":"c5f9335a.3980a8","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Schlafzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":1860,"wires":[["c80ca351.5f6bb8"]]},{"id":"34f21058.8e6848","type":"switch","z":"f5f1b719.8a699","name":"Humid > 65 %","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"65","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1588.7501220703125,"y":1857.5,"wires":[["c20ea4bd.848ec"]]},{"id":"12ae966c.cc82ca","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte im \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1898.7501220703125,"y":1856.25,"wires":[["dd12e85b.989bc8"]]},{"id":"c80ca351.5f6bb8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1408.7501220703125,"y":1858.75,"wires":[["34f21058.8e6848"]]},{"id":"d970b4c.d559fc8","type":"comment","z":"f5f1b719.8a699","name":"Schlafzimmer3","info":"","x":100,"y":1700,"wires":[]},{"id":"ad214f01.ec34b","type":"smooth","z":"f5f1b719.8a699","name":"max","property":"payload","action":"max","count":"3600","round":"2","mult":"single","reduce":true,"x":660,"y":1920,"wires":[["c325cbd5.ad13c8","32a07d81.347aea"]]},{"id":"c20ea4bd.848ec","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740.0001220703125,"y":1856.25,"wires":[["12ae966c.cc82ca","3f54277.41d6a58"]]},{"id":"974f598b.7fbe","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Schlafzimmer","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":1820,"wires":[["44a236f0.7f88b8"]]},{"id":"35c3c706.9c3518","type":"switch","z":"f5f1b719.8a699","name":"Temp < 17°C","property":"payload","propertyType":"msg","rules":[{"t":"lte","v":"17","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":1818.75,"wires":[["5496ed25.005b24"]]},{"id":"44a236f0.7f88b8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1410.0001220703125,"y":1820,"wires":[["35c3c706.9c3518"]]},{"id":"5496ed25.005b24","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1740,"y":1820,"wires":[["5cf30291.e4bb5c","b6de733b.0ece48"]]},{"id":"8a7ab618.25cee8","type":"ui_text","z":"f5f1b719.8a699","group":"155f41a1.44729e","order":6,"width":"6","height":"2","name":"","label":"Optimal: <br> T = 16-18 °C <br>  rel. Feuchte = 40-60 % ","format":"","layout":"row-spread","x":610,"y":1720,"wires":[]},{"id":"c325cbd5.ad13c8","type":"ui_text","z":"f5f1b719.8a699","group":"155f41a1.44729e","order":3,"width":0,"height":0,"name":"","label":"max. gemessene Luftfeuchte","format":"{{msg.payload}} %","layout":"row-left","x":930,"y":1920,"wires":[]},{"id":"2ccc7c8d.56d59c","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"155f41a1.44729e","order":1,"width":0,"height":0,"label":"Temperatur","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#ff9595","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":880,"y":1760,"wires":[[],[]]},{"id":"44169bda.067504","type":"ui_chart","z":"f5f1b719.8a699","name":"","group":"155f41a1.44729e","order":2,"width":0,"height":0,"label":"relative Luftfeuchte","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"bezier","nodata":"warte auf Daten","dot":false,"ymin":"","ymax":"","removeOlder":"1","removeOlderPoints":"","removeOlderUnit":"86400","cutout":0,"useOneColor":false,"colors":["#aec7e8","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":900,"y":1840,"wires":[[],[]]},{"id":"5c312ab5.fedd6c","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"155f41a1.44729e","order":4,"width":"3","height":"3","gtype":"gage","title":"Temperatur","label":"","format":"{{value}} °C","min":0,"max":"30","colors":["#00b500","#e6e600","#ca3838"],"seg1":"22","seg2":"25","x":880,"y":1800,"wires":[]},{"id":"22a4800d.a0353","type":"ui_gauge","z":"f5f1b719.8a699","name":"","group":"155f41a1.44729e","order":5,"width":"3","height":"3","gtype":"gage","title":"rel. Luftfeuchte","label":"","format":"{{value}} %","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"65","seg2":"75","x":890,"y":1880,"wires":[]},{"id":"2501d429.f0a2b4","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":380,"y":1760,"wires":[["5c312ab5.fedd6c","d14279c7.dcfef8","7490c668.e83dd8"]]},{"id":"a1eee6f.6ebb218","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"2","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":380,"y":1840,"wires":[["22a4800d.a0353","932982f.95d55"]]},{"id":"d14279c7.dcfef8","type":"change","z":"f5f1b719.8a699","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"Bad","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":1900,"wires":[["eb97323c.0075b8"]]},{"id":"10e5b308.656f05","type":"switch","z":"f5f1b719.8a699","name":"Temp > 40 C","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"40","vt":"str"}],"checkall":"false","repair":false,"outputs":1,"x":1580.0001220703125,"y":1896.25,"wires":[["294fe7e8.1c433"]]},{"id":"7bcaef32.44846","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1900,"y":1897.5,"wires":[["dd12e85b.989bc8"]]},{"id":"eb97323c.0075b8","type":"delay","z":"f5f1b719.8a699","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"30","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1411.2501220703125,"y":1898.75,"wires":[["10e5b308.656f05"]]},{"id":"294fe7e8.1c433","type":"change","z":"f5f1b719.8a699","name":". to ,","rules":[{"t":"change","p":"payload","pt":"msg","from":".","fromt":"str","to":",","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1741.25,"y":1897.5,"wires":[["7bcaef32.44846","f65b49bb.af87e"]]},{"id":"5cf30291.e4bb5c","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 173173012,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":1890,"y":1820,"wires":[["dd12e85b.989bc8"]]},{"id":"932982f.95d55","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":1840,"wires":[["44169bda.067504","c5f9335a.3980a8"]]},{"id":"7490c668.e83dd8","type":"switch","z":"f5f1b719.8a699","name":"Messfehler-Filter","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"-10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":700,"y":1760,"wires":[["2ccc7c8d.56d59c","974f598b.7fbe"]]},{"id":"32ca18eb.21c8d8","type":"ui_text","z":"f5f1b719.8a699","group":"155f41a1.44729e","order":3,"width":"0","height":"0","name":"","label":"gemessen um","format":"{{msg.payload}} Uhr","layout":"row-left","x":890,"y":1960,"wires":[]},{"id":"f288897d.45af8","type":"function","z":"f5f1b719.8a699","name":"to payload","func":"msg.payload=msg.mytime;\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":1960,"wires":[["32ca18eb.21c8d8"]]},{"id":"32a07d81.347aea","type":"simpletime","z":"f5f1b719.8a699","name":"","x":500,"y":1960,"wires":[["f288897d.45af8"]]},{"id":"87eb0c.0f8e74f8","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":1840,"wires":[["a1eee6f.6ebb218","ad214f01.ec34b","8fc970e8.547a48"]]},{"id":"c7ab0ff.01295f","type":"change","z":"f5f1b719.8a699","name":"num","rules":[{"t":"set","p":"payload","pt":"msg","to":"$number(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":1800,"wires":[["2501d429.f0a2b4"]]},{"id":"8fc970e8.547a48","type":"debug","z":"f5f1b719.8a699","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":290,"y":1700,"wires":[]},{"id":"3f54277.41d6a58","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Humid","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Luftfeuchte im \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" %.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2750,"y":520,"wires":[["29c2414d.413ace"]]},{"id":"f65b49bb.af87e","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Feuer","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"FEUER!!! Die Temperatur im \"+ msg.topic + \" beträgt mehr als \" + msg.payload + \" °C.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2751.2498779296875,"y":561.25,"wires":[["29c2414d.413ace"]]},{"id":"b6de733b.0ece48","type":"function","z":"f5f1b719.8a699","name":"Nachricht: Temp","func":"var msg1 = {\"topic\": msg.topic,\n\"payload\": {\"chatId\" : 122774981,\n\"type\" : 'message',\n\"content\" : \"Achtung! Die Temperatur in der \"+ msg.topic + \" beträgt momentan \" + msg.payload + \" °C. Du solltest die Fenster schließen und die Heizung anmachen.\"} };\nreturn msg1;","outputs":1,"noerr":0,"x":2741.2498779296875,"y":483.75,"wires":[["29c2414d.413ace"]]},{"id":"e0c57061.c33848","type":"chatbot-conversation","z":"9d2b39e8.bae118","name":"","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"122774981","userId":"","transport":"telegram","store":"","x":2910,"y":1500,"wires":[["88fda220.cc7c6"]]},{"id":"c8d45128.7bf1b8","type":"function","z":"9d2b39e8.bae118","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Es ist jetzt sinnvoll die \" + msg.topic +\" zu lüften.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2630,"y":1420,"wires":[["e0c57061.c33848"]]},{"id":"2626b7d0.fb52e","type":"function","z":"9d2b39e8.bae118","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Es ist jetzt sinnvoll das \" + msg.topic +\" zu lüften.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2630,"y":1460,"wires":[["e0c57061.c33848"]]},{"id":"30719a4.4a1fd66","type":"function","z":"9d2b39e8.bae118","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Es ist jetzt sinnvoll das \" + msg.topic +\" zu lüften.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2630,"y":1500,"wires":[["e0c57061.c33848"]]},{"id":"f756a202.b03ff","type":"function","z":"9d2b39e8.bae118","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Es ist jetzt sinnvoll das \" + msg.topic +\" zu lüften.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2630,"y":1540,"wires":[["e0c57061.c33848"]]},{"id":"4a12e270.9cbdcc","type":"function","z":"9d2b39e8.bae118","name":"Sende Payload als Nachricht","func":"var msg = {\n\"payload\": {\"chatId\" : 122774981,\n    \"type\" : 'message',\n    \"content\" : \"Es ist jetzt sinnvoll den \" + msg.topic +\" zu lüften.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2630,"y":1580,"wires":[["e0c57061.c33848"]]},{"id":"4ecfac38.ad53d4","type":"inject","z":"c570f763.a864f","name":"","topic":"körpertemperatur_messen","payload":"","payloadType":"date","repeat":"","crontab":"00 20 * * *","once":false,"onceDelay":0.1,"x":190,"y":180,"wires":[[]]},{"id":"4e292bb3.c08c74","type":"chatbot-telegram-receive","z":"c570f763.a864f","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","x":1350,"y":260,"wires":[["4ff5559d.f76f1c"]]},{"id":"64973536.470994","type":"chatbot-conversation","z":"c570f763.a864f","name":"","botDevelopment":"45531229.75243c","botProduction":"45531229.75243c","chatId":"173173012","userId":"","transport":"telegram","store":"","x":1080,"y":220,"wires":[["ef2f50bc.44a618"]]},{"id":"ef2f50bc.44a618","type":"chatbot-telegram-send","z":"c570f763.a864f","bot":"a08a3d24.93c3d","botProduction":"a08a3d24.93c3d","track":false,"passThrough":false,"outputs":0,"x":1090,"y":260,"wires":[]},{"id":"eee20584.34b908","type":"function","z":"c570f763.a864f","name":"sendet Anzahl+Intervall","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Bitte messe deine Körpertemperatur und sende mir die Nachkommastellen zurück.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":830,"y":160,"wires":[[]]},{"id":"a16ecc07.7988d","type":"ui_gauge","z":"c570f763.a864f","name":"","order":0,"width":0,"height":0,"gtype":"gage","title":"gauge","label":"units","format":"{{value}}","min":0,"max":10,"colors":["#00B500","#E6E600","#CA3838"],"seg1":"","seg2":"","x":1830,"y":140,"wires":[]},{"id":"ed6c5c21.d52a5","type":"ui_chart","z":"c570f763.a864f","name":"","order":0,"width":0,"height":0,"label":"chart","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1F77B4","#AEC7E8","#FF7F0E","#2CA02C","#98DF8A","#D62728","#FF9896","#9467BD","#C5B0D5"],"useOldStyle":false,"outputs":2,"x":1850,"y":240,"wires":[[],[]]},{"id":"4ff5559d.f76f1c","type":"chatbot-listen","z":"c570f763.a864f","name":"it's a number?","showdebug":true,"rules":["[number]",".","[number]"],"outputs":3,"x":1640,"y":140,"wires":[["72da1ea1.0400e8","a16ecc07.7988d","ed6c5c21.d52a5","fddada9e.854158"],[],[]]},{"id":"72da1ea1.0400e8","type":"debug","z":"c570f763.a864f","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1830,"y":40,"wires":[]},{"id":"6fa4a0b6.0c6408","type":"function","z":"c570f763.a864f","name":"send Message","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : msg.payload} };\nreturn msg;","outputs":1,"noerr":0,"x":1960,"y":80,"wires":[[]]},{"id":"cc95935a.97daf8","type":"inject","z":"c570f763.a864f","name":"","topic":"","payload":"123","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1290,"y":80,"wires":[["4ff5559d.f76f1c"]]},{"id":"a728edb2.d74b2","type":"inject","z":"c570f763.a864f","name":"","topic":"","payload":"abz","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1290,"y":120,"wires":[["4ff5559d.f76f1c"]]},{"id":"fddada9e.854158","type":"persist in","z":"c570f763.a864f","name":"Körpertemperatur","storageNode":"99a4f592.3a9cf8","x":1900,"y":380,"wires":[]},{"id":"7e6e8689.2b8b3","type":"debug","z":"dced8749.bff1b8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":340,"y":400,"wires":[]},{"id":"2fe174dd.8d1914","type":"telegram receiver","z":"8f4a1c25.fc2518","name":"","bot":"d581c716.9df25","saveDataDir":"","filterCommands":false,"x":100,"y":120,"wires":[["6abbb45a.64147c","9d6a9c19.80a69","b0da6c4.ed59c9","664b489f.0406a"],[]]},{"id":"6abbb45a.64147c","type":"debug","z":"8f4a1c25.fc2518","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":130,"y":80,"wires":[]},{"id":"944683a4.5129e8","type":"function","z":"8f4a1c25.fc2518","name":"+ 1","func":"msg.increment = 1;\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":120,"wires":[["922fe7e.05c3918","e917db51.15986","f426f38.950609","bf616e1.1faff1","e69b372e.09eb3"]]},{"id":"4e546266.74c584","type":"function","z":"8f4a1c25.fc2518","name":"reset","func":"msg.reset = true;\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":200,"wires":[["922fe7e.05c3918"]]},{"id":"83521281.c75158","type":"function","z":"8f4a1c25.fc2518","name":"- 1","func":"msg.decrement = 1;\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":160,"wires":[["922fe7e.05c3918"]]},{"id":"922fe7e.05c3918","type":"counter","z":"8f4a1c25.fc2518","name":"","init":"0","step":1,"lower":null,"upper":null,"mode":"increment","outputs":2,"x":660,"y":160,"wires":[["2748ab1d.2dd70c","112a5e1e.b8a9b2","56975898.677058","43f53fe4.82e0d","deff1db3.c1fbb","5f547149.aa67d8","3bb5e4bd.8ab8f4","e2a5b482.c5d32","db96987a.a57d88"],[]]},{"id":"4563b29a.d5430c","type":"inject","z":"8f4a1c25.fc2518","name":"reset um 04:30 Uhr","topic":"reset","payload":"","payloadType":"date","repeat":"","crontab":"30 04 * * *","once":false,"onceDelay":0.1,"x":320,"y":200,"wires":[["4e546266.74c584"]]},{"id":"7af91e32.0fb59","type":"inject","z":"8f4a1c25.fc2518","name":"minus 1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":160,"wires":[["83521281.c75158"]]},{"id":"e917db51.15986","type":"interval-length","z":"8f4a1c25.fc2518","format":"human","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","startup":false,"name":"","x":680,"y":120,"wires":[["6aecf37a.9e127c"],[]]},{"id":"51be9186.ba204","type":"telegram sender","z":"8f4a1c25.fc2518","name":"","bot":"d581c716.9df25","x":1790,"y":220,"wires":[["ee7c8852.709698"]]},{"id":"9d6a9c19.80a69","type":"switch","z":"8f4a1c25.fc2518","name":"Kippe","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"/Kippe","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":370,"y":120,"wires":[["944683a4.5129e8"]]},{"id":"12d6cada.283bf5","type":"function","z":"8f4a1c25.fc2518","name":"hat Laura lieb","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Hallo, Laura! Ich habe dich lieb!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1430,"y":220,"wires":[["51be9186.ba204","c00406b9.e339"]]},{"id":"8a860120.84e528","type":"inject","z":"8f4a1c25.fc2518","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1280,"y":220,"wires":[["12d6cada.283bf5"]]},{"id":"ee7c8852.709698","type":"debug","z":"8f4a1c25.fc2518","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1970,"y":220,"wires":[]},{"id":"b3d6b54e.162b28","type":"persist out","z":"8f4a1c25.fc2518","name":"Kippen","storageNode":"7aadcf9c.6f8078","x":1970,"y":180,"wires":[["ee7c8852.709698"]]},{"id":"a28f5d2c.d9d1b","type":"persist in","z":"8f4a1c25.fc2518","name":"Kippen","storageNode":"13c257eb.aa9228","x":1410,"y":100,"wires":[]},{"id":"86f7dcaf.31819","type":"telegram receiver","z":"8f4a1c25.fc2518","name":"","bot":"beb6c874.52d368","saveDataDir":"telegrambot/","filterCommands":false,"x":120,"y":1280,"wires":[["4038651e.07c7f4","129b0833.fa6c","5860e0f7.861468","50fe951e.9681bc"],[]]},{"id":"4038651e.07c7f4","type":"debug","z":"8f4a1c25.fc2518","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":170,"y":1240,"wires":[]},{"id":"e7750907.c1e4e","type":"telegram sender","z":"8f4a1c25.fc2518","name":"","bot":"beb6c874.52d368","x":1790,"y":1360,"wires":[["52016ca6.984b5c"]]},{"id":"52016ca6.984b5c","type":"debug","z":"8f4a1c25.fc2518","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1850,"y":1320,"wires":[]},{"id":"c7f9b5ce.4b5248","type":"function","z":"8f4a1c25.fc2518","name":"+ 1","func":"msg.increment = 1;\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":2340,"wires":[["ee80d95a.5a039","dc86fc07.38dcf","4271c3d0.570fd4"]]},{"id":"92e3f77c.832748","type":"function","z":"8f4a1c25.fc2518","name":"reset","func":"msg.reset = true;\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":2420,"wires":[["ee80d95a.5a039"]]},{"id":"c3749cec.372928","type":"function","z":"8f4a1c25.fc2518","name":"- 1","func":"msg.decrement = 1;\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":2380,"wires":[["ee80d95a.5a039"]]},{"id":"ee80d95a.5a039","type":"counter","z":"8f4a1c25.fc2518","name":"","init":"0","step":1,"lower":null,"upper":null,"mode":"increment","outputs":2,"x":560,"y":2380,"wires":[["f6906768.6d2098","d2df3447.69a348"],[]]},{"id":"917a08f2.bfc348","type":"inject","z":"8f4a1c25.fc2518","name":"reset um 04:30 Uhr","topic":"reset","payload":"","payloadType":"date","repeat":"","crontab":"30 04 * * *","once":false,"onceDelay":0.1,"x":220,"y":2420,"wires":[["92e3f77c.832748"]]},{"id":"f3813e4b.c02478","type":"inject","z":"8f4a1c25.fc2518","name":"minus 1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":2380,"wires":[["c3749cec.372928"]]},{"id":"dc86fc07.38dcf","type":"interval-length","z":"8f4a1c25.fc2518","format":"human","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"msgTimeout":"","minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","reset":false,"startup":false,"msgField":"payload","timestampField":"timestamp","repeatTimeout":false,"name":"","x":580,"y":2340,"wires":[["20f2b43.4e75b4c"],[]]},{"id":"fec305ba.b8d558","type":"function","z":"8f4a1c25.fc2518","name":"sendet Anzahl+Intervall","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Du hast heute schon \" + msg.payload.num.num +\" Zigaretten geraucht.\" + \"Vor \" + msg.payload.time.time +\" war deine letzte.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":2360,"wires":[["1d6851ec.eb94a6"]]},{"id":"1d6851ec.eb94a6","type":"debug","z":"8f4a1c25.fc2518","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1770,"y":2400,"wires":[]},{"id":"20f2b43.4e75b4c","type":"change","z":"8f4a1c25.fc2518","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"time","tot":"str"},{"t":"move","p":"payload","pt":"msg","to":"payload.time","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":903.8125,"y":2332.1875,"wires":[["e35b37cc.e54448","2272252b.6377f2"]]},{"id":"f6906768.6d2098","type":"change","z":"8f4a1c25.fc2518","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload.num","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"num","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":2380,"wires":[["8d008678.e421a8","2272252b.6377f2"]]},{"id":"950bc5c8.a8e","type":"inject","z":"8f4a1c25.fc2518","name":"Kippe","topic":"","payload":"/kippe","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":2340,"wires":[["c7f9b5ce.4b5248"]]},{"id":"e35b37cc.e54448","type":"debug","z":"8f4a1c25.fc2518","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":870,"y":2260,"wires":[]},{"id":"68d7fe65.66d28","type":"debug","z":"8f4a1c25.fc2518","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1210,"y":2260,"wires":[]},{"id":"8d008678.e421a8","type":"debug","z":"8f4a1c25.fc2518","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1050,"y":2480,"wires":[]},{"id":"d2df3447.69a348","type":"debug","z":"8f4a1c25.fc2518","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":710,"y":2500,"wires":[]},{"id":"2272252b.6377f2","type":"join","z":"8f4a1c25.fc2518","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1090,"y":2360,"wires":[["68d7fe65.66d28","69edaea2.02bbc8"]]},{"id":"69edaea2.02bbc8","type":"delay","z":"8f4a1c25.fc2518","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1280,"y":2360,"wires":[["fec305ba.b8d558"]]},{"id":"61ac95d6.881b14","type":"function","z":"8f4a1c25.fc2518","name":"+ 1","func":"msg.increment = 1;\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":1280,"wires":[["b4b61dcd.b1c49","1fc3c751.d3fce9","5e3bcd42.ed4da4","d98807d5.2b73","f70e2804.fbc218"]]},{"id":"64bcc5af.393e7c","type":"function","z":"8f4a1c25.fc2518","name":"reset","func":"msg.reset = true;\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":1360,"wires":[["b4b61dcd.b1c49"]]},{"id":"d019d2b9.39ca8","type":"function","z":"8f4a1c25.fc2518","name":"- 1","func":"msg.decrement = 1;\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":1320,"wires":[["b4b61dcd.b1c49"]]},{"id":"b4b61dcd.b1c49","type":"counter","z":"8f4a1c25.fc2518","name":"","init":"0","step":1,"lower":null,"upper":null,"mode":"increment","outputs":2,"x":680,"y":1320,"wires":[["dc6db58d.567aa","b8c15f19.a5e9d8","cf2bdf7c.ed53c","6044a140.3c0aa8","40346d6e.73e2b4","1cc1802e.1412e","e7b094ec.82a0a8","243e363f.441bd2","3c802efd.6b111a"],[]]},{"id":"1fc3c751.d3fce9","type":"interval-length","z":"8f4a1c25.fc2518","format":"human","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"msgTimeout":"","minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","reset":false,"startup":false,"msgField":"payload","timestampField":"timestamp","repeatTimeout":false,"name":"","x":700,"y":1280,"wires":[["eec19846.d957e"],[]]},{"id":"467caf58.890f88","type":"function","z":"8f4a1c25.fc2518","name":"sendet Anzahl+Intervall","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Du hast heute schon \" + msg.payload.num.num +\" Zigaretten geraucht.\" + \" Vor \" + msg.payload.time.time +\" war deine letzte.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1300,"wires":[["e7750907.c1e4e"]]},{"id":"eec19846.d957e","type":"change","z":"8f4a1c25.fc2518","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"time","tot":"str"},{"t":"move","p":"payload","pt":"msg","to":"payload.time","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":1280,"wires":[["90c8c765.701d2"]]},{"id":"dc6db58d.567aa","type":"change","z":"8f4a1c25.fc2518","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload.num","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"num","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":896.1875,"y":1327.8125,"wires":[["90c8c765.701d2"]]},{"id":"90c8c765.701d2","type":"join","z":"8f4a1c25.fc2518","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1070,"y":1300,"wires":[["6d162a1e.fc0a0c"]]},{"id":"6d162a1e.fc0a0c","type":"delay","z":"8f4a1c25.fc2518","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1240,"y":1300,"wires":[["467caf58.890f88"]]},{"id":"129b0833.fa6c","type":"switch","z":"8f4a1c25.fc2518","name":"Kippe","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"/kippe","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":390,"y":1280,"wires":[["61ac95d6.881b14"]]},{"id":"36b3d5e0.3ead62","type":"comment","z":"8f4a1c25.fc2518","name":"Lauras Kippen_Bot","info":"","x":100,"y":40,"wires":[]},{"id":"6aecf37a.9e127c","type":"change","z":"8f4a1c25.fc2518","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"time","tot":"str"},{"t":"move","p":"payload","pt":"msg","to":"payload.time","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":120,"wires":[["7b378c45.40aecc"]]},{"id":"2748ab1d.2dd70c","type":"change","z":"8f4a1c25.fc2518","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload.num","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"num","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":876.1875,"y":167.8125,"wires":[["7b378c45.40aecc"]]},{"id":"7b378c45.40aecc","type":"join","z":"8f4a1c25.fc2518","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1050,"y":140,"wires":[["c20f20e4.285bc"]]},{"id":"c20f20e4.285bc","type":"delay","z":"8f4a1c25.fc2518","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1220,"y":140,"wires":[["a6ae5cb.ff8efa","a28f5d2c.d9d1b"]]},{"id":"a6ae5cb.ff8efa","type":"function","z":"8f4a1c25.fc2518","name":"sendet Anzahl+Intervall","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Du hast heute schon \" + msg.payload.num.num +\" Zigaretten geraucht.\" + \" Vor \" + msg.payload.time.time +\" war deine letzte.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":140,"wires":[["51be9186.ba204"]]},{"id":"ca3b3631.dc2c8","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Noooooo! Erste Kippe am Tag. :o\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1400,"wires":[["e7750907.c1e4e"]]},{"id":"b8c15f19.a5e9d8","type":"switch","z":"8f4a1c25.fc2518","name":"1.Kippe","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":880,"y":1400,"wires":[["ca3b3631.dc2c8"]]},{"id":"c2467175.5a7a48","type":"inject","z":"8f4a1c25.fc2518","name":"reset um 04:30 Uhr","topic":"reset","payload":"","payloadType":"date","repeat":"","crontab":"30 04 * * *","once":false,"onceDelay":0.1,"x":340,"y":1360,"wires":[["64bcc5af.393e7c"]]},{"id":"777faa78.f497c4","type":"inject","z":"8f4a1c25.fc2518","name":"minus 1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":390,"y":1320,"wires":[["d019d2b9.39ca8"]]},{"id":"faf5e15e.3bbeb8","type":"debug","z":"8f4a1c25.fc2518","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":750,"y":2160,"wires":[]},{"id":"4271c3d0.570fd4","type":"interval-length","z":"8f4a1c25.fc2518","format":"mills","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"msgTimeout":"","minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","reset":false,"startup":false,"msgField":"payload","timestampField":"timestamp","repeatTimeout":false,"name":"","x":580,"y":2260,"wires":[["165d5b8c.3df65c"],[]]},{"id":"165d5b8c.3df65c","type":"switch","z":"8f4a1c25.fc2518","name":"weniger als 2h","property":"payload","propertyType":"msg","rules":[{"t":"lt","v":"72000000","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":560,"y":2200,"wires":[["bdcb039e.26ec78"]]},{"id":"bdcb039e.26ec78","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Das waren keine zwei Stunden. Versuche es länger!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":2160,"wires":[["faf5e15e.3bbeb8"]]},{"id":"5e3bcd42.ed4da4","type":"interval-length","z":"8f4a1c25.fc2518","format":"mills","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"msgTimeout":"","minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","reset":false,"startup":false,"msgField":"payload","timestampField":"timestamp","repeatTimeout":false,"name":"","x":700,"y":1800,"wires":[["cb37d109.7fa2b8"],[]]},{"id":"cb37d109.7fa2b8","type":"switch","z":"8f4a1c25.fc2518","name":"< 2h","property":"payload","propertyType":"msg","rules":[{"t":"btwn","v":"3600000","vt":"num","v2":"7200000","v2t":"num"}],"checkall":"true","repair":false,"outputs":1,"x":870,"y":1800,"wires":[["8e4c10c8.0e627"]]},{"id":"8e4c10c8.0e627","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Das waren keine zwei Stunden Pause. Versuche es länger!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1800,"wires":[["e7750907.c1e4e"]]},{"id":"421b4139.ff1c9","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Puuh, schon fünf Kippen heute!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1480,"wires":[["e7750907.c1e4e","32c323ee.f025f4"]]},{"id":"cf2bdf7c.ed53c","type":"switch","z":"8f4a1c25.fc2518","name":"5.Kippen","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"5","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":880,"y":1480,"wires":[["421b4139.ff1c9"]]},{"id":"faa1a652.871078","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Und jetzt noch eine? :(\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1520,"wires":[["e7750907.c1e4e"]]},{"id":"6044a140.3c0aa8","type":"switch","z":"8f4a1c25.fc2518","name":"6.Kippen","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"6","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":880,"y":1520,"wires":[["faa1a652.871078"]]},{"id":"3dc58237.fb6e6e","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"... :'(\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1560,"wires":[["e7750907.c1e4e"]]},{"id":"40346d6e.73e2b4","type":"switch","z":"8f4a1c25.fc2518","name":"8.Kippen","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"8","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":880,"y":1560,"wires":[["3dc58237.fb6e6e"]]},{"id":"e6e8aca7.771f4","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Porco dio! Porca madonna! 10 Kippen sind echt genug für heute!!11elf\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1600,"wires":[["e7750907.c1e4e"]]},{"id":"1cc1802e.1412e","type":"switch","z":"8f4a1c25.fc2518","name":"10 Kippen","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":880,"y":1600,"wires":[["e6e8aca7.771f4"]]},{"id":"d98807d5.2b73","type":"interval-length","z":"8f4a1c25.fc2518","format":"mills","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"msgTimeout":"","minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","reset":false,"startup":false,"msgField":"payload","timestampField":"timestamp","repeatTimeout":false,"name":"","x":700,"y":1760,"wires":[["a2f0aec9.645c7"],[]]},{"id":"a2f0aec9.645c7","type":"switch","z":"8f4a1c25.fc2518","name":"< 1h","property":"payload","propertyType":"msg","rules":[{"t":"lt","v":"3600000","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":870,"y":1760,"wires":[["f04b7550.1018b"]]},{"id":"f04b7550.1018b","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Jetzt hast du noch eine Kippe in der letzten Stunde geraucht? :o\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1760,"wires":[["e7750907.c1e4e"]]},{"id":"e7b094ec.82a0a8","type":"switch","z":"8f4a1c25.fc2518","name":"3.Kippe","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"3","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":880,"y":1440,"wires":[["81dc8c97.aa0938"]]},{"id":"81dc8c97.aa0938","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Alle guten Dinge sind drei... und damit genug\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1440,"wires":[["e7750907.c1e4e"]]},{"id":"243e363f.441bd2","type":"switch","z":"8f4a1c25.fc2518","name":">10 Kippen","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":890,"y":1640,"wires":[["f97b304.43a815"]]},{"id":"f97b304.43a815","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \":(\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1640,"wires":[["e7750907.c1e4e","ec2801bd.209f5"]]},{"id":"ce839a66.0412","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Du machst Jesus traurig... :(\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1680,"wires":[["e7750907.c1e4e"]]},{"id":"3c802efd.6b111a","type":"switch","z":"8f4a1c25.fc2518","name":">11 Kippen","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"11","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":890,"y":1680,"wires":[["b32bb10a.e737a"]]},{"id":"b32bb10a.e737a","type":"delay","z":"8f4a1c25.fc2518","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"15","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1210,"y":1680,"wires":[["ce839a66.0412"]]},{"id":"f70e2804.fbc218","type":"interval-length","z":"8f4a1c25.fc2518","format":"mills","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"msgTimeout":"","minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","reset":false,"startup":false,"msgField":"payload","timestampField":"timestamp","repeatTimeout":false,"name":"","x":700,"y":1860,"wires":[["be5a7267.902f8"],[]]},{"id":"be5a7267.902f8","type":"switch","z":"8f4a1c25.fc2518","name":"> 2h","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"7200000","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":870,"y":1860,"wires":[["c6928a35.fa7a9"]]},{"id":"c6928a35.fa7a9","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Wow! Über zwei Stunden! Du bist gut! Und jetzt noch größere Pausen!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1860,"wires":[["e7750907.c1e4e","8ebfd547.dcc7d"]]},{"id":"420018d6.769798","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Hi. Dies hier ist der Kippenbot. Er zählt deine Zigaretten mit, sobald du den Befehl /Kippe schickst, und gibt dir die vergangene Zeit seit der letzten Kippe zurück. Wenn du zu schnell oder zu viel rauchst, machst du Jesus unglücklich. Liebe Grüße JB\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1520,"y":1220,"wires":[["e7750907.c1e4e"]]},{"id":"5860e0f7.861468","type":"switch","z":"8f4a1c25.fc2518","name":"start","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"/start","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":870,"y":1220,"wires":[["420018d6.769798"]]},{"id":"e8ad4bbf.87b9b","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Noooooo! Erste Kippe am Tag. :o\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":340,"wires":[["51be9186.ba204"]]},{"id":"112a5e1e.b8a9b2","type":"switch","z":"8f4a1c25.fc2518","name":"1.Kippe","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":820,"y":340,"wires":[["e8ad4bbf.87b9b"]]},{"id":"bf616e1.1faff1","type":"interval-length","z":"8f4a1c25.fc2518","format":"mills","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"msgTimeout":"","minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","reset":false,"startup":false,"msgField":"payload","timestampField":"timestamp","repeatTimeout":false,"name":"","x":640,"y":740,"wires":[["eae63d26.8e6bd"],[]]},{"id":"eae63d26.8e6bd","type":"switch","z":"8f4a1c25.fc2518","name":"< 2h","property":"payload","propertyType":"msg","rules":[{"t":"btwn","v":"3600000","vt":"num","v2":"7200000","v2t":"num"}],"checkall":"true","repair":false,"outputs":1,"x":810,"y":740,"wires":[["ab5a296b.b9f898"]]},{"id":"ab5a296b.b9f898","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Das waren keine zwei Stunden Pause. Versuche es länger!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":740,"wires":[["51be9186.ba204"]]},{"id":"55af5271.22d69c","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Puuh, schon fünf Kippen heute!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":420,"wires":[["51be9186.ba204","ffd59772.e18a28"]]},{"id":"43f53fe4.82e0d","type":"switch","z":"8f4a1c25.fc2518","name":"5.Kippen","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"5","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":820,"y":420,"wires":[["55af5271.22d69c"]]},{"id":"26a64a49.9bb9a6","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Und jetzt noch eine? :(\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":460,"wires":[["51be9186.ba204"]]},{"id":"deff1db3.c1fbb","type":"switch","z":"8f4a1c25.fc2518","name":"6.Kippen","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"6","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":820,"y":460,"wires":[["26a64a49.9bb9a6"]]},{"id":"56710159.426be","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"... :'(\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":500,"wires":[["51be9186.ba204"]]},{"id":"5f547149.aa67d8","type":"switch","z":"8f4a1c25.fc2518","name":"8.Kippen","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"8","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":820,"y":500,"wires":[["56710159.426be"]]},{"id":"35a9b015.d82ec8","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Porco dio! Porca madonna! 10 Kippen sind echt genug für heute!!11elf\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":540,"wires":[["51be9186.ba204"]]},{"id":"3bb5e4bd.8ab8f4","type":"switch","z":"8f4a1c25.fc2518","name":"10 Kippen","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":820,"y":540,"wires":[["35a9b015.d82ec8"]]},{"id":"f426f38.950609","type":"interval-length","z":"8f4a1c25.fc2518","format":"mills","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"msgTimeout":"","minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","reset":false,"startup":false,"msgField":"payload","timestampField":"timestamp","repeatTimeout":false,"name":"","x":640,"y":700,"wires":[["7700687f.001198"],[]]},{"id":"7700687f.001198","type":"switch","z":"8f4a1c25.fc2518","name":"< 1h","property":"payload","propertyType":"msg","rules":[{"t":"lt","v":"3600000","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":810,"y":700,"wires":[["d51364f.df58618"]]},{"id":"d51364f.df58618","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Jetzt hast du noch eine Kippe in der letzten Stunde geraucht? :o\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":700,"wires":[["51be9186.ba204"]]},{"id":"56975898.677058","type":"switch","z":"8f4a1c25.fc2518","name":"3.Kippe","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"3","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":820,"y":380,"wires":[["82028916.1f156"]]},{"id":"82028916.1f156","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Alle guten Dinge sind drei... und damit genug\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":380,"wires":[["51be9186.ba204"]]},{"id":"e2a5b482.c5d32","type":"switch","z":"8f4a1c25.fc2518","name":">10 Kippen","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"10","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":830,"y":580,"wires":[["d841cee6.7ebbd"]]},{"id":"d841cee6.7ebbd","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \":(\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":580,"wires":[["51be9186.ba204","13d4796e.a240a7"]]},{"id":"351979b5.b10f2e","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Du machst Jesus traurig... :(\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":620,"wires":[["51be9186.ba204"]]},{"id":"db96987a.a57d88","type":"switch","z":"8f4a1c25.fc2518","name":">11 Kippen","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"11","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":830,"y":620,"wires":[["26cd6ad.d2f2516"]]},{"id":"26cd6ad.d2f2516","type":"delay","z":"8f4a1c25.fc2518","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"15","rateUnits":"minute","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1150,"y":620,"wires":[["351979b5.b10f2e"]]},{"id":"e69b372e.09eb3","type":"interval-length","z":"8f4a1c25.fc2518","format":"mills","bytopic":false,"minimum":"","maximum":"","window":"","timeout":false,"msgTimeout":"","minimumunit":"msecs","maximumunit":"msecs","windowunit":"msecs","reset":false,"startup":false,"msgField":"payload","timestampField":"timestamp","repeatTimeout":false,"name":"","x":640,"y":800,"wires":[["3e813dee.e35c1a"],[]]},{"id":"3e813dee.e35c1a","type":"switch","z":"8f4a1c25.fc2518","name":"> 2h","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"7200000","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":810,"y":800,"wires":[["3f1d25f7.167da2"]]},{"id":"3f1d25f7.167da2","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 988343062,\n    \"type\" : 'message',\n    \"content\" : \"Wow! Über zwei Stunden! Du bist gut! Und jetzt noch größere Pausen!\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":800,"wires":[["51be9186.ba204","9b613c1.9e621c"]]},{"id":"b0da6c4.ed59c9","type":"switch","z":"8f4a1c25.fc2518","name":"start","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"/start","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":850,"y":40,"wires":[["c84d0f99.9860e"]]},{"id":"c84d0f99.9860e","type":"function","z":"8f4a1c25.fc2518","name":"sendet Beschwerde","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Hi. Dies hier ist der Kippenbot. Er zählt deine Zigaretten mit, sobald du den Befehl /Kippe schickst, und gibt dir die vergangene Zeit seit der letzten Kippe zurück. Wenn du zu schnell oder zu viel rauchst, machst du Jesus unglücklich. Liebe Grüße JB\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1460,"y":40,"wires":[["51be9186.ba204"]]},{"id":"664b489f.0406a","type":"switch","z":"8f4a1c25.fc2518","name":"Kippe","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"/kippe","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":370,"y":60,"wires":[["944683a4.5129e8"]]},{"id":"50fe951e.9681bc","type":"switch","z":"8f4a1c25.fc2518","name":"Kippe","property":"payload.content","propertyType":"msg","rules":[{"t":"eq","v":"/Kippe","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":390,"y":1240,"wires":[["61ac95d6.881b14"]]},{"id":"37ade71c.d8cf38","type":"comment","z":"8f4a1c25.fc2518","name":"Multikippenbot","info":"","x":90,"y":1180,"wires":[]},{"id":"5a0b8de5.fab73c","type":"function","z":"dced8749.bff1b8","name":"sendet Anzahl+Intervall","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Du hast heute schon \" + msg.payload.num.num +\" Zigaretten geraucht.\" + \" Vor \" + msg.payload.time.time +\" war deine letzte.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1480,"y":1220,"wires":[[]]},{"id":"94022371.5d4028","type":"change","z":"dced8749.bff1b8","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"time","tot":"str"},{"t":"move","p":"payload","pt":"msg","to":"payload.time","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":1200,"wires":[["4e14a897.714628"]]},{"id":"29fad459.4aea3c","type":"change","z":"dced8749.bff1b8","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload.num","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"num","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":856.1875,"y":1247.8125,"wires":[["4e14a897.714628"]]},{"id":"4e14a897.714628","type":"join","z":"dced8749.bff1b8","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1030,"y":1220,"wires":[["57f8dbee.55eda4"]]},{"id":"57f8dbee.55eda4","type":"delay","z":"dced8749.bff1b8","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1200,"y":1220,"wires":[["5a0b8de5.fab73c"]]},{"id":"51078c80.3ecafc","type":"function","z":"dced8749.bff1b8","name":"sendet Anzahl+Intervall","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \"Du hast heute schon \" + msg.payload.num.num +\" Zigaretten geraucht.\" + \" Vor \" + msg.payload.time.time +\" war deine letzte.\"} };\nreturn msg;","outputs":1,"noerr":0,"x":1760,"y":280,"wires":[["9d5acf14.249608"]]},{"id":"e2d9210d.b1c71","type":"change","z":"dced8749.bff1b8","name":"","rules":[{"t":"set","p":"topic","pt":"msg","to":"time","tot":"str"},{"t":"move","p":"payload","pt":"msg","to":"payload.time","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1140,"y":260,"wires":[["7a968fc3.4b8dd8"]]},{"id":"d316a91b.87e2d8","type":"change","z":"dced8749.bff1b8","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload.num","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"num","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1136.1875,"y":307.8125,"wires":[["7a968fc3.4b8dd8"]]},{"id":"7a968fc3.4b8dd8","type":"join","z":"dced8749.bff1b8","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":true,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1310,"y":280,"wires":[["27e3333f.f27904"]]},{"id":"27e3333f.f27904","type":"delay","z":"dced8749.bff1b8","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":1480,"y":280,"wires":[["51078c80.3ecafc"]]},{"id":"8ebfd547.dcc7d","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo","func":"msg.payload.content = \"AgACAgIAAxkDAAIBc16zC3DxN0FuEoTj3F9yYJzt_4r-AAK9rTEb4viZSXAa5tgxqWX3nsrDki4AAwEAAwIAA20AA5epAQABGQQ\";\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":1750,"y":1860,"wires":[["e7750907.c1e4e"]]},{"id":"9b613c1.9e621c","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo7","func":"msg.payload.content = 'file7.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":1710,"y":800,"wires":[["51be9186.ba204"]]},{"id":"13d4796e.a240a7","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo5","func":"msg.payload.content = 'file5.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":1710,"y":580,"wires":[["51be9186.ba204"]]},{"id":"ec2801bd.209f5","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo4","func":"msg.payload.content = \"AgACAgIAAxkDAAIBeV6zDMUXIdiw8PJy5TZLFeaYf4HmAAL1rTEb4viZSSWd9Ng95I0TwaG6ki4AAwEAAwIAA20AA8SrAQABGQQ\";\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":1750,"y":1640,"wires":[["e7750907.c1e4e"]]},{"id":"ffd59772.e18a28","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo3","func":"msg.payload.content = 'file3.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":1710,"y":420,"wires":[["51be9186.ba204"]]},{"id":"32c323ee.f025f4","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo","func":"msg.payload.content = \"AgACAgIAAxkDAAIBdV6zC72XAfZPqvme7AK8TcOpS4c_AAL_rTEbxICQSVO0rA8d2UZvMTN6kS4AAwEAAwIAA20AAzvdAgABGQQ\";\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":1750,"y":1480,"wires":[["e7750907.c1e4e"]]},{"id":"9d658db8.e13a88","type":"inject","z":"8f4a1c25.fc2518","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2360,"y":1580,"wires":[["395732aa.45ed56"]]},{"id":"9a4fd810.d6912","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo","func":"msg.payload.content = 'file1.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":2650,"y":1580,"wires":[["e7750907.c1e4e"]]},{"id":"bae0ee7a.4ab2c8","type":"inject","z":"8f4a1c25.fc2518","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2360,"y":1620,"wires":[["91a9fa82.21baf"]]},{"id":"c3094f62.d579b8","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo","func":"msg.payload.content = 'file2.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":2650,"y":1620,"wires":[["e7750907.c1e4e"]]},{"id":"4a90893b.29bbf","type":"inject","z":"8f4a1c25.fc2518","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2360,"y":1660,"wires":[["a67ee50a.688738"]]},{"id":"436634ad.f4ab34","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo","func":"msg.payload.content = 'file3.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":2650,"y":1660,"wires":[["e7750907.c1e4e"]]},{"id":"dbc79179.cc89e8","type":"inject","z":"8f4a1c25.fc2518","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2360,"y":1700,"wires":[["57867313.9f732c"]]},{"id":"f12dcb7a.7f7a4","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo","func":"msg.payload.content = 'file4.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":2650,"y":1700,"wires":[["e7750907.c1e4e"]]},{"id":"56bc5213.b8e9fc","type":"inject","z":"8f4a1c25.fc2518","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2360,"y":1740,"wires":[["2b74310a.a66f06"]]},{"id":"a9661cd6.632e18","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo5","func":"msg.payload.content = 'file5.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":2650,"y":1740,"wires":[["e7750907.c1e4e"]]},{"id":"5a89cf34.2ac9d8","type":"inject","z":"8f4a1c25.fc2518","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2360,"y":1780,"wires":[["4ae99ebf.6bc9c"]]},{"id":"3be2d8bb.bcb46","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo6","func":"msg.payload.content = 'file6.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":2650,"y":1780,"wires":[["e7750907.c1e4e"]]},{"id":"3afe71fa.fbb4a6","type":"inject","z":"8f4a1c25.fc2518","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2360,"y":1820,"wires":[["92fcb7e3.462518"]]},{"id":"1a8ae576.adc9cb","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo","func":"msg.payload.content = 'file7.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":2650,"y":1820,"wires":[["e7750907.c1e4e"]]},{"id":"dd04e141.a3c1d8","type":"inject","z":"8f4a1c25.fc2518","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":2360,"y":1860,"wires":[["a4ceba06.cdd43"]]},{"id":"fd0d0210.64e55","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo8","func":"msg.payload.content = 'file8.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":2650,"y":1860,"wires":[["e7750907.c1e4e"]]},{"id":"395732aa.45ed56","type":"function","z":"8f4a1c25.fc2518","name":"msg","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \".\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2510,"y":1580,"wires":[["9a4fd810.d6912"]]},{"id":"91a9fa82.21baf","type":"function","z":"8f4a1c25.fc2518","name":"msg","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \".\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2510,"y":1620,"wires":[["c3094f62.d579b8"]]},{"id":"a67ee50a.688738","type":"function","z":"8f4a1c25.fc2518","name":"msg","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \".\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2510,"y":1660,"wires":[["436634ad.f4ab34"]]},{"id":"57867313.9f732c","type":"function","z":"8f4a1c25.fc2518","name":"msg","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \".\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2510,"y":1700,"wires":[["f12dcb7a.7f7a4"]]},{"id":"2b74310a.a66f06","type":"function","z":"8f4a1c25.fc2518","name":"msg","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \".\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2510,"y":1740,"wires":[["a9661cd6.632e18"]]},{"id":"4ae99ebf.6bc9c","type":"function","z":"8f4a1c25.fc2518","name":"msg","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \".\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2510,"y":1780,"wires":[["3be2d8bb.bcb46"]]},{"id":"92fcb7e3.462518","type":"function","z":"8f4a1c25.fc2518","name":"msg","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \".\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2510,"y":1820,"wires":[["1a8ae576.adc9cb"]]},{"id":"a4ceba06.cdd43","type":"function","z":"8f4a1c25.fc2518","name":"msg","func":"var msg = {\n\"payload\": {\"chatId\" : 173173012,\n    \"type\" : 'message',\n    \"content\" : \".\"} };\nreturn msg;","outputs":1,"noerr":0,"x":2510,"y":1860,"wires":[["fd0d0210.64e55"]]},{"id":"6fe269cb.808748","type":"comment","z":"8f4a1c25.fc2518","name":"to get file_id","info":"","x":2470,"y":1480,"wires":[]},{"id":"c00406b9.e339","type":"function","z":"8f4a1c25.fc2518","name":"Send Photo8","func":"msg.payload.content = 'telegrambot/file8.jpg';\nmsg.payload.type = 'photo';\nreturn msg;","outputs":1,"noerr":0,"x":1570,"y":200,"wires":[["51be9186.ba204"]]}]